import{r as ee,c as L,i as b,u as v,b as q,d as e,e as m,S as Ie,f as w,g as C,h as xe,j as Je,k as Ze,l as n,L as T,F as Re,m as E,n as f,o as te,p as me,q as Jt,s as Ne,t as U,w as D,x as oe,y as _,z as et,A as Zt}from"./q-49bd109d.js";import{createClient as el}from"@libsql/client";import{ChatOpenAI as tt}from"@langchain/openai";import{SystemMessage as se,HumanMessage as Me,AIMessage as lt}from"@langchain/core/messages";import{Resend as at}from"resend";import tl from"country-flag-icons/string/3x2/US";import ll from"country-flag-icons/string/3x2/ES";import al from"country-flag-icons/string/3x2/IT";import nl from"country-flag-icons/string/3x2/FR";import rl from"country-flag-icons/string/3x2/BR";function nt(t){return new TextEncoder().encode(t)}function Le(t){return Array.from(new Uint8Array(t)).map(l=>l.toString(16).padStart(2,"0")).join("")}async function rt(t){console.log("[AUTH] Hashing password");const l=nt(t),a=crypto.getRandomValues(new Uint8Array(16)),s=await crypto.subtle.importKey("raw",l,{name:"PBKDF2"},!1,["deriveBits"]),r=await crypto.subtle.deriveBits({name:"PBKDF2",salt:a,iterations:1e5,hash:"SHA-256"},s,256),o=new Uint8Array(a.length+32);o.set(a),o.set(new Uint8Array(r),a.length);const u=Le(o);return console.log("[AUTH] Password hashed successfully"),u}async function sl(t,l){console.log("[AUTH] Verifying password");const a=new Uint8Array(l.match(/.{1,2}/g).map(g=>parseInt(g,16))),s=a.slice(0,16),r=a.slice(16),o=nt(t),u=await crypto.subtle.importKey("raw",o,{name:"PBKDF2"},!1,["deriveBits"]),c=await crypto.subtle.deriveBits({name:"PBKDF2",salt:s,iterations:1e5,hash:"SHA-256"},u,256),d=Le(c)===Le(r);return console.log(`[AUTH] Password verification result: ${d}`),d}const st=(t,l,a)=>{const s=String(l),r=86400;t.cookie.set("auth_token",s,{path:"/",httpOnly:!0,sameSite:"lax",secure:!0,maxAge:r}),t.cookie.set("user_type",a,{path:"/",httpOnly:!0,sameSite:"lax",secure:!0,maxAge:r}),t.cookie.set("session_active","true",{path:"/",httpOnly:!1,sameSite:"lax",secure:!0,maxAge:r})},ot=t=>{t.cookie.delete("auth_token",{path:"/"}),t.cookie.delete("user_type",{path:"/"}),t.cookie.delete("session_active",{path:"/"})},ie=t=>{var a;const l=(a=t.cookie.get("auth_token"))==null?void 0:a.value;return console.log(`[AUTH] Retrieved user_id: ${l||"none"}`),l||null},Ue=async t=>{var a;console.log("[AUTH] Verifying authentication");const l=(a=t.cookie.get("auth_token"))==null?void 0:a.value;return console.log(`[AUTH] Found auth_token: ${l?"yes":"no"}`),l?(console.log("[AUTH] User authenticated successfully"),!0):(console.log("[AUTH] No auth_token found - user not authenticated"),!1)},ol=async t=>{const l=await Ue(t);if(l&&!t.pathname.includes("/auth/logout"))throw t.redirect(302,"/");return{isAuthenticated:l}},il=ee(b(ol,"s_xckjbOj1HPc")),ul=()=>{const t=v(!1);return q(w("s_xhcLYhTye5s",[t])),e("div",{class:`min-h-screen font-sans ${t.value?"dark bg-gradient-to-br from-teal-900 via-green-900 to-gray-900 text-gray-100":"bg-gradient-to-br from-teal-50 via-green-50 to-gray-50 text-gray-900"}`},{style:{paddingTop:"calc(env(safe-area-inset-top))"}},[e("div",null,{class:"fixed inset-0 pointer-events-none overflow-hidden opacity-40 z-0"},[" ",e("div",null,{class:"w-20 h-20 bg-teal-500/10 dark:bg-teal-400/10 rounded-full absolute top-[15%] left-[55%] animate-[float_15s_infinite]"},null,3,null),e("div",null,{class:"w-32 h-32 bg-green-500/10 dark:bg-green-400/10 rounded-full absolute top-[40%] left-[75%] animate-[float_18s_infinite]",style:"animation-delay: 0.5s;"},null,3,null),e("div",null,{class:"w-16 h-16 bg-teal-600/10 dark:bg-teal-500/10 rounded-full absolute top-[70%] left-[65%] animate-[float_12s_infinite]",style:"animation-delay: 1s;"},null,3,null),e("div",null,{class:"w-24 h-24 bg-green-600/10 dark:bg-green-500/10 rounded-full absolute top-[30%] left-[40%] animate-[float_20s_infinite]",style:"animation-delay: 1.5s;"},null,3,null)],3,null),e("div",null,{class:"relative z-10 pt-safe"},m(Ie,null,3,"9u_0"),1,null),e("style",null,null,`
        @keyframes float {
          0% { transform: translate(0, 0); }
          25% { transform: translate(5px, -15px); }
          50% { transform: translate(10px, 0); }
          75% { transform: translate(5px, 15px); }
          100% { transform: translate(0, 0); }
        }
      `,3,null)],1,"9u_1")},cl=L(b(ul,"s_nNgqqIoeIss")),dl=Object.freeze(Object.defineProperty({__proto__:null,default:cl,useAuthCheck:il},Symbol.toStringTag,{value:"Module"})),gl=t=>C("svg",{...t,children:[e("circle",null,{cx:"12",cy:"12",r:"10"},null,3,null),e("line",null,{x1:"12",x2:"12",y1:"8",y2:"12"},null,3,null),e("line",null,{x1:"12",x2:"12.01",y1:"16",y2:"16"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Ui_0"),Te=t=>C("svg",{...t,children:[e("path",null,{d:"m12 19-7-7 7-7"},null,3,null),e("path",null,{d:"M19 12H5"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"VY_0"),De=t=>C("svg",{...t,children:[e("path",null,{d:"M5 12h14"},null,3,null),e("path",null,{d:"m12 5 7 7-7 7"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Ye_0"),he=t=>C("svg",{...t,children:[e("path",null,{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},null,3,null),e("path",null,{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"uO_0"),pl=t=>C("svg",{...t,children:[e("rect",null,{height:"18",rx:"2",ry:"2",width:"18",x:"3",y:"4"},null,3,null),e("line",null,{x1:"16",x2:"16",y1:"2",y2:"6"},null,3,null),e("line",null,{x1:"8",x2:"8",y1:"2",y2:"6"},null,3,null),e("line",null,{x1:"3",x2:"21",y1:"10",y2:"10"},null,3,null),e("path",null,{d:"M8 14h.01"},null,3,null),e("path",null,{d:"M12 14h.01"},null,3,null),e("path",null,{d:"M16 14h.01"},null,3,null),e("path",null,{d:"M8 18h.01"},null,3,null),e("path",null,{d:"M12 18h.01"},null,3,null),e("path",null,{d:"M16 18h.01"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"R5_0"),Pe=t=>C("svg",{...t,children:[e("rect",null,{height:"4",rx:"1",ry:"1",width:"8",x:"8",y:"2"},null,3,null),e("path",null,{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},null,3,null),e("path",null,{d:"M12 11h4"},null,3,null),e("path",null,{d:"M12 16h4"},null,3,null),e("path",null,{d:"M8 11h.01"},null,3,null),e("path",null,{d:"M8 16h.01"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"kq_0"),Z=t=>C("svg",{...t,children:[e("path",null,{d:"M22 10v6M2 10l10-5 10 5-10 5z"},null,3,null),e("path",null,{d:"M6 12v5c3 3 9 3 12 0v-5"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Df_0"),ml=t=>C("svg",{...t,children:e("path",null,{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"},null,3,null)},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"z9_0"),Ve=t=>C("svg",{...t,children:[e("path",null,{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},null,3,null),e("polyline",null,{points:"9 22 9 12 15 12 15 22"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"pt_0"),We=t=>C("svg",{...t,children:[e("rect",null,{height:"9",rx:"1",width:"7",x:"3",y:"3"},null,3,null),e("rect",null,{height:"5",rx:"1",width:"7",x:"14",y:"3"},null,3,null),e("rect",null,{height:"9",rx:"1",width:"7",x:"14",y:"12"},null,3,null),e("rect",null,{height:"5",rx:"1",width:"7",x:"3",y:"16"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"uX_0"),hl=t=>C("svg",{...t,children:[e("path",null,{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"},null,3,null),e("path",null,{d:"M9 18h6"},null,3,null),e("path",null,{d:"M10 22h4"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"JJ_0"),pe=t=>C("svg",{...t,children:[e("line",null,{x1:"12",x2:"12",y1:"2",y2:"6"},null,3,null),e("line",null,{x1:"12",x2:"12",y1:"18",y2:"22"},null,3,null),e("line",null,{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"},null,3,null),e("line",null,{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"},null,3,null),e("line",null,{x1:"2",x2:"6",y1:"12",y2:"12"},null,3,null),e("line",null,{x1:"18",x2:"22",y1:"12",y2:"12"},null,3,null),e("line",null,{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"},null,3,null),e("line",null,{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"kT_0"),Ye=t=>C("svg",{...t,children:[e("rect",null,{height:"11",rx:"2",ry:"2",width:"18",x:"3",y:"11"},null,3,null),e("path",null,{d:"M7 11V7a5 5 0 0 1 10 0v4"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"WS_0"),Qe=t=>C("svg",{...t,children:[e("path",null,{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"},null,3,null),e("polyline",null,{points:"10 17 15 12 10 7"},null,3,null),e("line",null,{x1:"15",x2:"3",y1:"12",y2:"12"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"ca_0"),$e=t=>C("svg",{...t,children:[e("path",null,{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},null,3,null),e("polyline",null,{points:"16 17 21 12 16 7"},null,3,null),e("line",null,{x1:"21",x2:"9",y1:"12",y2:"12"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"0h_0"),bl=t=>C("svg",{...t,children:[e("rect",null,{height:"16",rx:"2",width:"20",x:"2",y:"4"},null,3,null),e("path",null,{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"n4_0"),yl=t=>C("svg",{...t,children:[e("line",null,{x1:"4",x2:"20",y1:"12",y2:"12"},null,3,null),e("line",null,{x1:"4",x2:"20",y1:"6",y2:"6"},null,3,null),e("line",null,{x1:"4",x2:"20",y1:"18",y2:"18"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"f1_0"),_e=t=>C("svg",{...t,children:e("path",null,{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},null,3,null)},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"42_0"),fl=t=>C("svg",{...t,children:[e("line",null,{x1:"2",x2:"22",y1:"2",y2:"22"},null,3,null),e("path",null,{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"},null,3,null),e("path",null,{d:"M5 10v2a7 7 0 0 0 12 5"},null,3,null),e("path",null,{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33"},null,3,null),e("path",null,{d:"M9 9v3a3 3 0 0 0 5.12 2.12"},null,3,null),e("line",null,{x1:"12",x2:"12",y1:"19",y2:"22"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Vn_0"),xl=t=>C("svg",{...t,children:[e("path",null,{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"},null,3,null),e("path",null,{d:"M19 10v2a7 7 0 0 1-14 0v-2"},null,3,null),e("line",null,{x1:"12",x2:"12",y1:"19",y2:"22"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"xC_0"),Xe=t=>C("svg",{...t,children:e("path",null,{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"},null,3,null)},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Oe_0"),vl=t=>C("svg",{...t,children:[e("path",null,{d:"m22 2-7 20-4-9-9-4Z"},null,3,null),e("path",null,{d:"M22 2 11 13"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Ll_0"),wl=t=>C("svg",{...t,children:[e("path",null,{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"},null,3,null),e("path",null,{d:"M5 3v4"},null,3,null),e("path",null,{d:"M19 17v4"},null,3,null),e("path",null,{d:"M3 5h4"},null,3,null),e("path",null,{d:"M17 19h4"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"61_0"),Ge=t=>C("svg",{...t,children:[e("circle",null,{cx:"12",cy:"12",r:"4"},null,3,null),e("path",null,{d:"M12 2v2"},null,3,null),e("path",null,{d:"M12 20v2"},null,3,null),e("path",null,{d:"m4.93 4.93 1.41 1.41"},null,3,null),e("path",null,{d:"m17.66 17.66 1.41 1.41"},null,3,null),e("path",null,{d:"M2 12h2"},null,3,null),e("path",null,{d:"M20 12h2"},null,3,null),e("path",null,{d:"m6.34 17.66-1.41 1.41"},null,3,null),e("path",null,{d:"m19.07 4.93-1.41 1.41"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Qm_0"),kl=t=>C("svg",{...t,children:[e("circle",null,{cx:"12",cy:"12",r:"10"},null,3,null),e("circle",null,{cx:"12",cy:"12",r:"6"},null,3,null),e("circle",null,{cx:"12",cy:"12",r:"2"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"t5_0"),_l=t=>C("svg",{...t,children:[e("path",null,{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"},null,3,null),e("circle",null,{cx:"12",cy:"7",r:"4"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"sX_0"),be=t=>C("svg",{...t,children:[e("path",null,{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},null,3,null),e("circle",null,{cx:"9",cy:"7",r:"4"},null,3,null),e("path",null,{d:"M22 21v-2a4 4 0 0 0-3-3.87"},null,3,null),e("path",null,{d:"M16 3.13a4 4 0 0 1 0 7.75"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"pI_0"),Sl=t=>C("svg",{...t,children:[e("polygon",null,{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},null,3,null),e("path",null,{d:"M15.54 8.46a5 5 0 0 1 0 7.07"},null,3,null),e("path",null,{d:"M19.07 4.93a10 10 0 0 1 0 14.14"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"0H_0"),El=t=>C("svg",{...t,children:[e("polygon",null,{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},null,3,null),e("line",null,{x1:"22",x2:"16",y1:"9",y2:"15"},null,3,null),e("line",null,{x1:"16",x2:"22",y1:"9",y2:"15"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"gs_0"),Al=t=>C("svg",{...t,children:[e("path",null,{d:"M18 6 6 18"},null,3,null),e("path",null,{d:"m6 6 12 12"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"CN_0");function j(t){var l,a;try{console.log("[TURSO] Creating database client");const s=(l=t.env.get("PRIVATE_TURSO_DATABASE_URL"))==null?void 0:l.trim();if(!s)throw console.error("[TURSO] Missing database URL"),new Error("PRIVATE_TURSO_DATABASE_URL is not defined");const r=(a=t.env.get("PRIVATE_TURSO_AUTH_TOKEN"))==null?void 0:a.trim();if(!r){if(!s.includes("file:"))throw console.error("[TURSO] Missing auth token for remote database"),new Error("PRIVATE_TURSO_AUTH_TOKEN is not defined");console.log("[TURSO] No auth token needed for local database")}return console.log(`[TURSO] Creating client for URL: ${s.substring(0,20)}...`),el({url:s,authToken:r})}catch(s){throw console.error("[TURSO] Error creating database client:",s),s}}const Tl=["sistemamoa2023@gmail.com","golfredo.pf@gmail.com"],it=t=>{if(!t)return!1;const l=t.trim().toLowerCase();return Tl.some(a=>a.toLowerCase()===l)},Cl=async t=>{console.log("[Layout Loader] Starting auth check");try{const l=await Ue(t),a=ie(t);let s=null,r=!1;if(l&&a)try{const u=await j(t).execute({sql:"SELECT email FROM users WHERE id = ? LIMIT 1",args:[a]});u.rows.length>0&&(s=u.rows[0].email,r=it(s))}catch(o){console.error("[Layout Loader] Failed to load user email",o)}return console.log(`[Layout Loader] Is Authenticated: ${l}`),{isAuthenticated:l,userEmail:s,canAccessDashboard:r}}catch(l){return console.error("[Layout Loader] Error checking auth:",l),{user_id:null,isAuthenticated:!1,canAccessDashboard:!1,userEmail:null}}},ut=ee(b(Cl,"s_I1dLegD8h0k")),Il=()=>{const[t]=E();t.value=!t.value,t.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},Rl=`
    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .animate-slideDown {
      animation: slideDown 0.2s ease-out;
    }
    
    /* Hide scrollbars but keep functionality */
    .scrollbar-hide {
      -ms-overflow-style: none;  /* IE and Edge */
      scrollbar-width: none;  /* Firefox */
    }
    
    .scrollbar-hide::-webkit-scrollbar {
      display: none;  /* Chrome, Safari and Opera */
    }
    
    html, body {
      overscroll-behavior: none;
    }
  `,Ml=()=>{const[t]=E();return t.value=!1},Ll=()=>{const[t]=E();return t.value=!1},Pl=()=>{const[t]=E();return t.value=!1},$l=()=>{const[t]=E();return t.value=!1},Ol=()=>{const[t]=E();return t.value=!1},ql=()=>{const[t]=E();return t.value=!1},jl=()=>{const[t]=E();return t.value=!1},Nl=()=>{const[t]=E();return t.value=!1},Ul=()=>{var c,d,g,i,p,h;xe();const t=ut(),l=Je(),a=v(!1),s=v(!1),r=v(!1),o=x=>l.url.pathname.startsWith(x);q(w("s_c6Pb49uSSiw",[a,r,l]));const u=b(Il,"s_0whHyN0kxrI",[a]);return l.url.pathname.startsWith("/auth")?m(Ie,null,3,"as_0"):(q(w("s_70w0lA9O1OU",[r,l])),q(w("s_io02Bdne6Z4",[t])),Ze(b(Rl,"s_17GNTBxO8HE")),e("div",null,{class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200"},[e("header",null,{class:"sticky top-0 z-50 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm"},e("div",null,{class:"container mx-auto px-4 flex justify-between items-center h-16"},[e("div",null,{class:"flex items-center"},m(T,{href:"/",class:"flex items-center group",children:[e("div",null,{class:"w-8 h-8 rounded-full bg-gradient-to-br from-teal-500 to-green-500 flex items-center justify-center text-white shadow group-hover:scale-105 transition-transform"},[m(Z,{class:"w-5 h-5",[n]:{class:n}},3,"as_1")," "],1,null),e("span",null,{class:"ml-2 text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-teal-600 to-green-600 dark:from-teal-400 dark:to-green-400"},"MOA Academy",3,null)],[n]:{href:n,class:n}},1,"as_2"),1,null),e("nav",null,{class:"hidden md:flex items-center space-x-1"},[m(T,{href:"/",class:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${l.url.pathname==="/"?"bg-teal-50 text-teal-700 dark:bg-teal-900/50 dark:text-teal-300":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700/50"}`,children:e("div",null,{class:"flex items-center"},[m(Ve,{class:"w-5 h-5 mr-1.5",[n]:{class:n}},3,"as_3"),e("span",null,null,"Home",3,null)],1,null),[n]:{href:n}},1,"as_4"),m(T,{href:"/courses",class:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${o("/courses")?"bg-teal-50 text-teal-700 dark:bg-teal-900/50 dark:text-teal-300":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700/50"}`,children:e("div",null,{class:"flex items-center"},[m(he,{class:"w-5 h-5 mr-1.5",[n]:{class:n}},3,"as_5"),e("span",null,null,"Courses",3,null)],1,null),[n]:{href:n}},1,"as_6"),m(T,{href:"/about",class:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${o("/about")?"bg-teal-50 text-teal-700 dark:bg-teal-900/50 dark:text-teal-300":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700/50"}`,children:e("div",null,{class:"flex items-center"},[m(be,{class:"w-5 h-5 mr-1.5",[n]:{class:n}},3,"as_7"),e("span",null,null,"About",3,null)],1,null),[n]:{href:n}},1,"as_8"),((c=t.value)==null?void 0:c.isAuthenticated)&&m(Re,{children:[m(T,{href:"/chat",class:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${o("/chat")?"bg-teal-50 text-teal-700 dark:bg-teal-900/50 dark:text-teal-300":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700/50"}`,children:e("div",null,{class:"flex items-center"},[m(_e,{class:"w-5 h-5 mr-1.5",[n]:{class:n}},3,"as_9")," ",e("span",null,null,"Chat",3,null)],1,null),[n]:{href:n}},1,"as_10"),m(T,{href:"/placement-test",class:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${o("/placement-test")?"bg-teal-50 text-teal-700 dark:bg-teal-900/50 dark:text-teal-300":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700/50"}`,children:e("div",null,{class:"flex items-center"},[m(Pe,{class:"w-5 h-5 mr-1.5",[n]:{class:n}},3,"as_11"),e("span",null,null,"Placement",3,null)],1,null),[n]:{href:n}},1,"as_12"),((d=t.value)==null?void 0:d.canAccessDashboard)&&m(T,{href:"/dashboard",class:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${o("/dashboard")?"bg-teal-50 text-teal-700 dark:bg-teal-900/50 dark:text-teal-300":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700/50"}`,children:e("div",null,{class:"flex items-center"},[m(We,{class:"w-5 h-5 mr-1.5",[n]:{class:n}},3,"as_13"),e("span",null,null,"Dashboard",3,null)],1,null),[n]:{href:n}},1,"as_14"),m(T,{href:"/auth/logout",class:"px-3 py-2 rounded-md text-sm font-medium text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30 transition-colors",children:e("div",null,{class:"flex items-center"},[m($e,{class:"w-5 h-5 mr-1.5",[n]:{class:n}},3,"as_15"),e("span",null,null,"Logout",3,null)],1,null),[n]:{href:n,class:n}},1,"as_16")]},1,"as_17"),!((g=t.value)!=null&&g.isAuthenticated)&&m(T,{href:"/auth",class:"px-3 py-2 rounded-md text-sm font-medium text-teal-600 hover:bg-teal-50 dark:text-teal-400 dark:hover:bg-teal-900/30 transition-colors",children:e("div",null,{class:"flex items-center"},[m(Qe,{class:"w-5 h-5 mr-1.5",[n]:{class:n}},3,"as_18")," ",e("span",null,null,"Login / Sign Up",3,null)],1,null),[n]:{href:n,class:n}},1,"as_19"),e("button",null,{class:"ml-2 p-2 rounded-full text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700/50 transition-colors","aria-label":"Toggle Dark Mode",onClick$:u},a.value?m(Ge,{class:"w-5 h-5",[n]:{class:n}},3,"as_20"):m(Xe,{class:"w-5 h-5",[n]:{class:n}},3,"as_21"),1,null)],1,null),e("div",null,{class:"flex items-center md:hidden"},[e("button",null,{class:"p-2 rounded-md text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700/50 focus:outline-none","aria-label":"Toggle Menu",onClick$:w("s_a0eSFtWPV0I",[s])},s.value?m(Al,{class:"w-6 h-6",[n]:{class:n}},3,"as_22"):m(yl,{class:"w-6 h-6",[n]:{class:n}},3,"as_23"),1,null),e("button",null,{class:"ml-2 p-2 rounded-full text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700/50 transition-colors","aria-label":"Toggle Dark Mode",onClick$:u},a.value?m(Ge,{class:"w-5 h-5",[n]:{class:n}},3,"as_24"):m(Xe,{class:"w-5 h-5",[n]:{class:n}},3,"as_25"),1,null)],1,null)],1,null),1,null),s.value&&e("div",null,{class:"md:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-md animate-slideDown"},e("div",null,{class:"px-2 pt-2 pb-3 space-y-1"},[m(T,{href:"/",class:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${l.url.pathname==="/"?"bg-teal-50 text-teal-700 dark:bg-teal-900/50 dark:text-teal-300":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700/50"}`,onClick$:b(Ml,"s_bcoLfcxcKec",[s]),children:e("div",null,{class:"flex items-center"},[m(Ve,{class:"w-5 h-5 mr-3",[n]:{class:n}},3,"as_26"),e("span",null,null,"Home",3,null)],1,null),[n]:{href:n,onClick$:n}},1,"as_27"),m(T,{href:"/courses",class:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${o("/courses")?"bg-teal-50 text-teal-700 dark:bg-teal-900/50 dark:text-teal-300":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700/50"}`,onClick$:b(Ll,"s_hhWSyA6Pzn0",[s]),children:e("div",null,{class:"flex items-center"},[m(he,{class:"w-5 h-5 mr-3",[n]:{class:n}},3,"as_28"),e("span",null,null,"Courses",3,null)],1,null),[n]:{href:n,onClick$:n}},1,"as_29"),m(T,{href:"/about",class:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${o("/about")?"bg-teal-50 text-teal-700 dark:bg-teal-900/50 dark:text-teal-300":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700/50"}`,onClick$:b(Pl,"s_PgppD3zDhYc",[s]),children:e("div",null,{class:"flex items-center"},[m(be,{class:"w-5 h-5 mr-3",[n]:{class:n}},3,"as_30"),e("span",null,null,"About",3,null)],1,null),[n]:{href:n,onClick$:n}},1,"as_31"),((i=t.value)==null?void 0:i.isAuthenticated)&&m(Re,{children:[m(T,{href:"/chat",class:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${o("/chat")?"bg-teal-50 text-teal-700 dark:bg-teal-900/50 dark:text-teal-300":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700/50"}`,onClick$:b($l,"s_sP0ivQGS40I",[s]),children:e("div",null,{class:"flex items-center"},[m(_e,{class:"w-5 h-5 mr-3",[n]:{class:n}},3,"as_32"),e("span",null,null,"Chat",3,null)],1,null),[n]:{href:n,onClick$:n}},1,"as_33"),m(T,{href:"/placement-test",class:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${o("/placement-test")?"bg-teal-50 text-teal-700 dark:bg-teal-900/50 dark:text-teal-300":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700/50"}`,onClick$:b(Ol,"s_WWUKJMPJgBU",[s]),children:e("div",null,{class:"flex items-center"},[m(Pe,{class:"w-5 h-5 mr-3",[n]:{class:n}},3,"as_34"),e("span",null,null,"Placement",3,null)],1,null),[n]:{href:n,onClick$:n}},1,"as_35"),((p=t.value)==null?void 0:p.canAccessDashboard)&&m(T,{href:"/dashboard",class:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${o("/dashboard")?"bg-teal-50 text-teal-700 dark:bg-teal-900/50 dark:text-teal-300":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700/50"}`,onClick$:b(ql,"s_ms2sIVmsuEk",[s]),children:e("div",null,{class:"flex items-center"},[m(We,{class:"w-5 h-5 mr-3",[n]:{class:n}},3,"as_36"),e("span",null,null,"Dashboard",3,null)],1,null),[n]:{href:n,onClick$:n}},1,"as_37"),m(T,{href:"/auth/logout",class:"block px-3 py-2 rounded-md text-base font-medium text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30 transition-colors",onClick$:b(jl,"s_F0eLKE27GVQ",[s]),children:e("div",null,{class:"flex items-center"},[m($e,{class:"w-5 h-5 mr-3",[n]:{class:n}},3,"as_38"),e("span",null,null,"Logout",3,null)],1,null),[n]:{href:n,class:n,onClick$:n}},1,"as_39")]},1,"as_40"),!((h=t.value)!=null&&h.isAuthenticated)&&m(T,{href:"/auth",class:"block px-3 py-2 rounded-md text-base font-medium text-teal-600 hover:bg-teal-50 dark:text-teal-400 dark:hover:bg-teal-900/30 transition-colors",onClick$:b(Nl,"s_ITpEgQ01eVw",[s]),children:e("div",null,{class:"flex items-center"},[m(Qe,{class:"w-5 h-5 mr-3",[n]:{class:n}},3,"as_41")," ",e("span",null,null,"Login / Sign Up",3,null)],1,null),[n]:{href:n,class:n,onClick$:n}},1,"as_42")],1,null),1,"as_43"),e("main",null,{class:"container mx-auto py-4 px-4 md:px-6"},m(Ie,null,3,"as_44"),1,null),!l.url.pathname.startsWith("/chat")&&!l.url.pathname.startsWith("/text-chat")&&e("footer",null,{class:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 py-6 mt-auto"},e("div",null,{class:"container mx-auto px-4"},e("div",null,{class:"flex flex-col md:flex-row justify-between items-center"},[e("div",null,{class:"flex items-center mb-4 md:mb-0"},[e("div",null,{class:"w-8 h-8 rounded-full bg-gradient-to-br from-teal-500 to-green-500 flex items-center justify-center text-white shadow"},m(Z,{class:"w-5 h-5",[n]:{class:n}},3,"as_45"),1,null),e("span",null,{class:"ml-2 text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-teal-600 to-green-600 dark:from-teal-400 dark:to-green-400"},"Move On Academy",3,null)],1,null),e("div",null,{class:"text-center md:text-right text-sm text-gray-600 dark:text-gray-400"},[e("p",null,null,["© ",new Date().getFullYear()," Move On Academy. All rights reserved."],1,null),e("div",null,{class:"mt-2 space-x-4"},[m(T,{href:"/terms",class:"hover:text-teal-600 dark:hover:text-teal-400",children:"Terms",[n]:{href:n,class:n}},3,"as_46"),m(T,{href:"/privacy",class:"hover:text-teal-600 dark:hover:text-teal-400",children:"Privacy",[n]:{href:n,class:n}},3,"as_47"),m(T,{href:"/contact",class:"hover:text-teal-600 dark:hover:text-teal-400",children:"Contact",[n]:{href:n,class:n}},3,"as_48")],1,null)],1,null)],1,null),1,null),1,"as_49")],1,"as_50"))},Dl=L(b(Ul,"s_08vswLB0CwY")),Bl=Object.freeze(Object.defineProperty({__proto__:null,default:Dl,useLayoutAuthLoader:ut},Symbol.toStringTag,{value:"Module"})),Fl=async t=>({isAuthenticated:await Ue(t)}),ct=ee(b(Fl,"s_9m08qemiN58")),Hl=()=>{const t=ct();return e("div",null,{class:"flex flex-col min-h-screen bg-gray-50 dark:bg-gray-900"},[e("section",null,{class:"relative py-16 lg:py-20 px-4 sm:px-6 overflow-hidden"},[e("div",null,{class:"absolute inset-0 pointer-events-none overflow-hidden"},e("div",null,{class:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-teal-100/60 to-green-50/30 dark:from-teal-900/30 dark:to-green-900/10"},null,3,null),3,null),e("div",null,{class:"max-w-7xl mx-auto relative px-2 sm:px-4"},e("div",null,{class:"flex flex-col sm:flex-row items-center gap-6 w-full"},[e("div",null,{class:"w-full sm:w-auto max-w-xs mx-auto sm:mx-0 order-2 sm:order-1"},e("div",null,{class:"rounded-lg overflow-hidden shadow-lg border-2 border-teal-200 dark:border-teal-800 aspect-[3/4] sm:aspect-auto bg-gray-100 dark:bg-gray-800"},e("video",null,{autoplay:!0,loop:!0,muted:!0,playsInline:!0,class:"w-full h-full object-cover object-center",style:{maxHeight:"280px"}},[e("source",null,{src:"/prs_alice.idle.mp4",type:"video/mp4"},null,3,null),"Your browser does not support the video tag."],3,null),3,null),3,null),e("div",null,{class:"w-full sm:flex-1 text-center order-1 sm:order-2"},[e("h1",null,{class:"text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 dark:text-white leading-tight"},[e("span",null,{class:"block text-transparent bg-clip-text bg-gradient-to-r from-teal-600 to-green-600 dark:from-teal-400 dark:to-green-400"},"Moa Academy",3,null),e("span",null,{class:"block mt-1"},"Unlock Your Language Potential",3,null)],3,null),e("p",null,{class:"mt-3 mt-4 mb-4 sm:mt-4 text-lg text-gray-600 dark:text-gray-300 leading-relaxed mx-auto max-w-lg"},"Join our vibrant community and embark on a journey to fluency. Interactive courses, expert instructors, and real-world practice.",3,null),e("div",null,{class:"mt-5 sm:mt-8 flex flex-wrap gap-3 justify-center"},[m(T,{href:"/courses",class:"px-4 sm:px-6 py-2 sm:py-3 rounded-lg bg-teal-600 hover:bg-teal-700 text-white font-medium transition-colors shadow-md hover:shadow-lg flex items-center text-sm sm:text-base",children:["Explore Courses",m(De,{class:"ml-2 h-4 w-4 sm:h-5 sm:w-5",[n]:{class:n}},3,"k9_0")],[n]:{href:n,class:n}},1,"k9_1"),m(T,{href:"/chat",class:"px-4 sm:px-6 py-2 sm:py-3 rounded-lg bg-white dark:bg-gray-800 text-teal-600 dark:text-teal-400 border border-teal-200 dark:border-teal-800 hover:bg-teal-50 dark:hover:bg-gray-700 font-medium transition-colors shadow-sm hover:shadow-md text-sm sm:text-base",children:"Chat with Alice",[n]:{href:n,class:n}},3,"k9_2"),m(T,{get href(){var l;return(l=t.value)!=null&&l.isAuthenticated?"/placement-test":"/auth"},class:"px-4 sm:px-6 py-2 sm:py-3 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-medium transition-colors shadow-md hover:shadow-lg flex items-center text-sm sm:text-base",children:[m(Pe,{class:"mr-2 h-4 w-4 sm:h-5 sm:w-5",[n]:{class:n}},3,"k9_3"),"Placement Test"],[n]:{href:f(l=>{var a;return(a=l.value)!=null&&a.isAuthenticated?"/placement-test":"/auth"},[t],'p0.value?.isAuthenticated?"/placement-test":"/auth"'),class:n}},1,"k9_4")],1,null)],1,null)],1,null),1,null)],1,null),e("section",null,{class:"py-12 px-4 sm:px-6 lg:py-16"},e("div",null,{class:"max-w-7xl mx-auto"},[e("div",null,{class:"text-center mb-12"},[e("h2",null,{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Why Choose Moa Academy?",3,null),e("p",null,{class:"mt-4 text-xl text-gray-600 dark:text-gray-300"},"A modern approach to language learning designed for success.",3,null)],3,null),e("div",null,{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"},[e("div",null,{class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow border border-gray-100 dark:border-gray-700"},[e("div",null,{class:"flex items-center justify-center w-12 h-12 rounded-full bg-teal-100 dark:bg-teal-900 mb-4"},m(he,{class:"w-6 h-6 text-teal-600 dark:text-teal-400",[n]:{class:n}},3,"k9_5"),1,null),e("h3",null,{class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},"Interactive Courses",3,null),e("p",null,{class:"text-gray-600 dark:text-gray-300"},"Engaging lessons designed for all levels, from beginner to advanced.",3,null)],1,null),e("div",null,{class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow border border-gray-100 dark:border-gray-700"},[e("div",null,{class:"flex items-center justify-center w-12 h-12 rounded-full bg-green-100 dark:bg-green-900 mb-4"},m(Z,{class:"w-6 h-6 text-green-600 dark:text-green-400",[n]:{class:n}},3,"k9_6"),1,null),e("h3",null,{class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},"Expert Instructors",3,null),e("p",null,{class:"text-gray-600 dark:text-gray-300"},"Learn from experienced teachers passionate about language education.",3,null)],1,null),e("div",null,{class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow border border-gray-100 dark:border-gray-700"},[e("div",null,{class:"flex items-center justify-center w-12 h-12 rounded-full bg-cyan-100 dark:bg-cyan-900 mb-4"},m(_e,{class:"w-6 h-6 text-cyan-600 dark:text-cyan-400",[n]:{class:n}},3,"k9_7"),1,null),e("h3",null,{class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},"AI Practice Partner",3,null),e("p",null,{class:"text-gray-600 dark:text-gray-300"},"Practice conversation anytime with Alice, our intelligent AI tutor.",3,null)],1,null),e("div",null,{class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow border border-gray-100 dark:border-gray-700"},[e("div",null,{class:"flex items-center justify-center w-12 h-12 rounded-full bg-lime-100 dark:bg-lime-900 mb-4"},m(be,{class:"w-6 h-6 text-lime-600 dark:text-lime-400",[n]:{class:n}},3,"k9_8"),1,null),e("h3",null,{class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},"Supportive Community",3,null),e("p",null,{class:"text-gray-600 dark:text-gray-300"},"Connect with fellow learners, practice together, and share your progress.",3,null)],1,null)],1,null)],1,null),1,null),e("section",null,{class:"py-12 px-4 sm:px-6 lg:py-16 bg-gradient-to-r from-teal-500 to-green-600 dark:from-teal-800 dark:to-green-900"},e("div",null,{class:"max-w-4xl mx-auto text-center"},[e("h2",null,{class:"text-3xl font-bold text-white"},"Ready to Start Your Language Journey?",3,null),e("p",null,{class:"mt-4 text-xl text-teal-100 dark:text-teal-200"},"Sign up today and take the first step towards mastering a new language.",3,null),e("div",null,{class:"mt-8"},m(T,{href:"/auth",class:"px-8 py-3 rounded-lg bg-white text-teal-600 font-medium transition-colors shadow-lg hover:bg-teal-50",children:"Sign Up Now",[n]:{href:n,class:n}},3,"k9_9"),1,null)],1,null),1,null),e("footer",null,{class:"py-8 px-4 sm:px-6 bg-gray-100 dark:bg-gray-950 border-t border-gray-200 dark:border-gray-800"},e("div",null,{class:"max-w-7xl mx-auto text-center text-gray-500 dark:text-gray-400"},["© ",new Date().getFullYear()," Moa Academy. All rights reserved. |",m(T,{href:"/terms",class:"hover:text-teal-600 dark:hover:text-teal-400 ml-2",children:"Terms",[n]:{href:n,class:n}},3,"k9_10")," |",m(T,{href:"/privacy",class:"hover:text-teal-600 dark:hover:text-teal-400 ml-2",children:"Privacy",[n]:{href:n,class:n}},3,"k9_11")],1,null),1,null)],1,"k9_12")},zl=L(b(Hl,"s_0H7JnAEW1p0")),Vl={title:"Moa Academy - Learn Languages Effectively",meta:[{name:"description",content:"Join Moa Academy to learn new languages with interactive courses, expert instructors, and an AI practice partner. Start your journey to fluency today!"}]},Wl=Object.freeze(Object.defineProperty({__proto__:null,default:zl,head:Vl,useHomeAuthLoader:ct},Symbol.toStringTag,{value:"Module"})),dt=10,Oe=t=>{if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t??"")}},Yl=async t=>{try{const l=ie(t);if(!l)return t.json(401,{success:!1,error:"Authentication required"});const a=await t.request.json(),{message:s,formatResponse:r=!0}=a;if(!s)return t.json(400,{success:!1,error:"Message is required"});const o=t.env.get("OPENAI_API_KEY")||{}.OPENAI_API_KEY;if(!o)return t.json(500,{success:!1,error:"OpenAI API key is not configured"});const u=j(t),c=await u.execute({sql:`SELECT role, content 
            FROM text_chat_messages 
            WHERE user_id = ? 
            ORDER BY created_at DESC 
            LIMIT ?`,args:[l,dt]}),d=[];if(c.rows.length===0){const h=new se("You are Alice, a helpful and friendly AI assistant. You provide clear, concise, and accurate information.");d.push(h),await u.execute({sql:"INSERT INTO text_chat_messages (user_id, role, content) VALUES (?, ?, ?)",args:[l,"system",Oe(h.content)]})}else for(let h=c.rows.length-1;h>=0;h--){const x=c.rows[h],y=String(x.content||"");x.role==="user"?d.push(new Me(y)):x.role==="assistant"?d.push(new lt(y)):x.role==="system"&&d.push(new se(y))}d.push(new Me(s)),await u.execute({sql:"INSERT INTO text_chat_messages (user_id, role, content) VALUES (?, ?, ?)",args:[l,"user",s]});const g=new tt({openAIApiKey:o,modelName:"gpt-4-turbo-preview",temperature:.7});if(r){const h=d.findIndex(x=>x instanceof se);if(h>=0){const x=d[h];d[h]=new se(`${x.content}

Format your responses using Markdown where appropriate: use **double asterisks** around important information, concepts, or key terms to highlight them in bold.`)}else d.unshift(new se("You are Alice, a helpful and friendly AI assistant. You provide clear, concise, and accurate information. Format your responses using Markdown where appropriate: use **double asterisks** around important information, concepts, or key terms to highlight them in bold."))}const i=await g.invoke(d),p=Oe(i.content);return await u.execute({sql:"INSERT INTO text_chat_messages (user_id, role, content) VALUES (?, ?, ?)",args:[l,"assistant",p]}),t.json(200,{success:!0,message:p})}catch(l){return console.error("Error in chat-text API:",l),t.json(500,{success:!1,error:l instanceof Error?l.message:"Unknown error occurred"})}},Ql=b(Yl,"s_7H78osu0XaI"),Xl=Object.freeze(Object.defineProperty({__proto__:null,_auto_MAX_CONTEXT_MESSAGES:dt,_auto_serializeMessageContent:Oe,onPost:Ql},Symbol.toStringTag,{value:"Module"})),Gl=({cookie:t,redirect:l})=>{throw t.delete("auth_token",{path:"/"}),t.delete("user_type",{path:"/"}),l(302,"/auth")},Kl=async(t,l)=>{try{console.log("[LOGOUT] Starting logout process"),ot(l);const a=l.cookie.get("auth_token"),s=l.cookie.get("user_type");if(a||s)throw console.error("[LOGOUT] Cookies not cleared properly:",{authToken:a,userType:s}),new Error("Failed to clear authentication cookies");return console.log("[LOGOUT] Successfully cleared all cookies"),l.redirect(302,"/auth"),{success:!0}}catch(a){return console.error("Logout error:",a),{success:!1,error:a instanceof Error?a.message:"Logout failed"}}},gt=te(b(Kl,"s_X10g1MGFVho")),Jl=()=>{},Zl=()=>{var a,s;xe();const t=gt(),l=((a=t.value)==null?void 0:a.success)===!1;return e("div",null,{class:"min-h-screen w-full flex items-center justify-center transition-colors duration-300 bg-gradient-to-b from-blue-50 to-indigo-100 dark:from-gray-950 dark:to-blue-950 py-6 px-4 sm:px-6 lg:px-8 overflow-hidden relative"},[e("div",null,{class:"fixed inset-0 pointer-events-none overflow-hidden"},[e("div",null,{class:"w-20 h-20 bg-blue-500/10 rounded-full absolute top-[10%] left-[15%] animate-[float_15s_infinite]"},null,3,null),e("div",null,{class:"w-32 h-32 bg-indigo-500/10 rounded-full absolute top-[30%] left-[65%] animate-[float_18s_infinite]",style:"animation-delay: 0.5s;"},null,3,null),e("div",null,{class:"w-16 h-16 bg-teal-500/10 rounded-full absolute top-[70%] left-[25%] animate-[float_12s_infinite]",style:"animation-delay: 1s;"},null,3,null)],3,null),e("div",null,{class:"absolute top-6 left-1/2 transform -translate-x-1/2"},e("div",null,{class:"flex items-center"},[e("div",null,{class:"relative"},e("div",null,{class:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-indigo-600 flex items-center justify-center text-white shadow-lg"},e("svg",null,{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},e("path",null,{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 9 10.5-3m0 6.553v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 1 1-.99-3.467l2.31-.66a2.25 2.25 0 0 0 1.632-2.163Zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 0 1-.99-3.467l2.31-.66A2.25 2.25 0 0 0 9 15.553Z"},null,3,null),3,null),3,null),3,null),e("h1",null,{class:"ml-2 text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400"},"Move On Challenge",3,null)],3,null),3,null),e("div",null,{class:"max-w-md w-full z-10"},[e("div",null,{class:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden backdrop-blur-sm p-8 animate-[fade-in_0.5s_ease-out]"},[e("div",null,{class:"text-center mb-8"},[e("h2",null,{class:"text-3xl font-bold mb-3 text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400"},"Log Out",3,null),e("p",null,{class:"text-gray-600 dark:text-gray-400"},"Are you sure you want to log out?",3,null)],3,null),m(me,{action:t,class:"space-y-6",spaReset:!0,get"preventdefault:submit"(){return t.isRunning},onSubmitCompleted$:b(Jl,"s_GZ039Xhc9W0"),children:[e("button",null,{type:"submit",disabled:f(r=>r.isRunning,[t],"p0.isRunning"),class:"w-full flex justify-center items-center py-3 px-4 rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 dark:from-blue-500 dark:to-indigo-500 dark:hover:from-blue-600 dark:hover:to-indigo-600 font-medium shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed",onClick$:w("s_CCfP4YxazY4")},t.isRunning?e("span",null,{class:"flex items-center"},[m(pe,{class:"animate-spin mr-2 h-5 w-5",[n]:{class:n}},3,"S9_0"),"Logging out..."],1,"S9_1"):e("span",null,{class:"flex items-center"},[m($e,{class:"mr-2 h-5 w-5",[n]:{class:n}},3,"S9_2"),"Confirm Logout"],1,null),1,null),l&&e("div",null,{class:"p-3 bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300 text-sm mt-4"},[e("p",null,null,"There was a problem logging you out. Please try again.",3,null),((s=t.value)==null?void 0:s.error)&&e("p",null,{class:"mt-1 text-xs opacity-80"},f(r=>r.value.error,[t],"p0.value.error"),3,"S9_3")],1,"S9_4"),e("a",null,{href:"/marketplace",class:"block w-full text-center mt-4 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors duration-200"},"Cancel",3,null)],[n]:{action:n,class:n,spaReset:n,"preventdefault:submit":f(r=>r.isRunning,[t],"p0.isRunning"),onSubmitCompleted$:n}},1,"S9_5")],1,null),e("div",null,{class:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400"},"Thank you for using Move On Challenge",3,null)],1,null),e("style",null,null,`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes float {
          0% { transform: translate(0, 0); }
          25% { transform: translate(5px, -15px); }
          50% { transform: translate(10px, 0); }
          75% { transform: translate(5px, 15px); }
          100% { transform: translate(0, 0); }
        }
        
        @keyframes fade-in {
          0% { opacity: 0; }
          100% { opacity: 1; }
        }
      `,3,null)],1,"S9_6")},ea=L(b(Zl,"s_JBiTm0tuWIY")),ta=Object.freeze(Object.defineProperty({__proto__:null,default:ea,onGet:Gl,useLogout:gt},Symbol.toStringTag,{value:"Module"})),pt=async t=>{const l=new TextEncoder().encode(t),a=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(a),s=>s.toString(16).padStart(2,"0")).join("")},la=async(t,l)=>{const{token:a,password:s}=t;if(!a||!s)return{success:!1,error:"Token o contrasena faltante."};const r=j(l),o=await pt(a),c=(await r.execute({sql:"SELECT user_id, expires_at FROM password_reset_tokens WHERE token_hash = ?",args:[o]})).rows[0];if(!(c!=null&&c.user_id)||!c.expires_at)return{success:!1,error:"Token invalido o expirado."};const d=new Date,g=new Date(c.expires_at);if(Number.isNaN(g.getTime())||g<d)return await r.execute({sql:"DELETE FROM password_reset_tokens WHERE token_hash = ?",args:[o]}),{success:!1,error:"Token invalido o expirado."};const i=await rt(s);return await r.execute({sql:"UPDATE users SET password_hash = ? WHERE id = ?",args:[i,c.user_id]}),await r.execute({sql:"DELETE FROM password_reset_tokens WHERE user_id = ?",args:[c.user_id]}),{success:!0}},mt=te(b(la,"s_PITm1O4byjQ")),aa=()=>{const t=mt(),l=v(""),a=v(""),s=v(""),r=v(!1),o=Je(),u=Jt(),c=o.url.searchParams.get("token")||"";return e("div",null,{class:"min-h-screen flex items-center justify-center"},e("form",{onSubmit$:w("s_i0aeXJS7Kf4",[a,s,u,l,t,r,c])},{class:"space-y-6 max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8","preventdefault:submit":!0},[e("h2",null,{class:"text-2xl font-bold mb-4"},"Restablecer contrasena",3,null),e("input",{value:c},{type:"hidden",name:"token"},null,3,null),e("div",null,null,[e("label",null,{class:"block text-sm font-medium mb-1"},"Nueva contrasena",3,null),e("input",null,{type:"password",class:"w-full rounded-lg border px-4 py-3",value:f(d=>d.value,[l],"p0.value"),required:!0,minLength:6,onInput$:w("s_BxWUX7RzXpk",[l])},null,3,null)],3,null),e("div",null,null,[e("label",null,{class:"block text-sm font-medium mb-1"},"Confirmar contrasena",3,null),e("input",null,{type:"password",class:"w-full rounded-lg border px-4 py-3",value:f(d=>d.value,[a],"p0.value"),required:!0,minLength:6,onInput$:w("s_Vu0AgHmx10U",[a])},null,3,null)],3,null),s.value&&e("div",null,{class:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-xl"},f(d=>d.value,[s],"p0.value"),3,"e3_0"),r.value&&e("div",null,{class:"p-3 bg-green-50 border border-green-200 text-green-700 rounded-xl"},"Contrasena cambiada con exito!",3,"e3_1"),e("button",null,{type:"submit",class:"w-full py-3 rounded-lg bg-teal-600 text-white font-semibold mt-4"},"Cambiar contrasena",3,null)],0,null),1,"e3_2")},na=L(b(aa,"s_mtCTBvJs97M")),ra=Object.freeze(Object.defineProperty({__proto__:null,_auto_hashToken:pt,default:na,useResetPassword:mt},Symbol.toStringTag,{value:"Module"})),sa=`
    .hero {
      /* Updated gradient for Move On Academy */
      background-image: linear-gradient(to right, rgba(13, 148, 136, 0.9), rgba(5, 150, 105, 0.8)), url('/images/language-learning-bg.jpg'); /* Replace with a relevant background image */
      background-size: cover;
      background-position: center;
      color: white;
    }

    .section {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }

    .visible {
      opacity: 1;
      transform: translateY(0);
    }

    .feature-card {
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1); /* Enhanced hover shadow */
    }

    .icon-gradient {
      /* Updated icon background gradient */
      @apply bg-gradient-to-r from-teal-500 to-green-600 p-3 rounded-lg text-white inline-flex shadow-md;
    }

    /* Timeline styling (Optional - can be adapted or removed if not needed for About page) */
    .timeline-container {
      @apply relative;
    }

    .timeline-item {
      @apply relative pl-10 pb-10;
    }

    .timeline-item:before {
      content: '';
      /* Updated timeline color */
      @apply absolute left-3 top-2 h-full w-0.5 bg-teal-200 dark:bg-teal-900;
    }

    .timeline-item:last-child:before {
      @apply h-6;
    }

    .timeline-circle {
      /* Updated timeline circle color */
      @apply absolute left-0 top-2 h-6 w-6 rounded-full bg-teal-500 flex items-center justify-center text-white text-xs font-bold shadow;
    }
  `,oa=()=>{Ne(b(sa,"s_0qQ3k6L1bs0"));const t=[v(),v(),v()];return q(w("s_XQghmw02tBA")),e("div",null,{class:"flex flex-col min-h-screen bg-gray-50 dark:bg-gray-900"},[e("div",null,{class:"hero py-20 px-4 sm:px-6 lg:px-8 flex items-center justify-center"},e("div",null,{class:"max-w-4xl text-center"},[e("h1",null,{class:"text-4xl md:text-5xl font-extrabold tracking-tight mb-6 text-white"},"About Move On Academy",3,null),e("p",null,{class:"text-xl md:text-2xl mb-10 text-white/90 max-w-3xl mx-auto"},"Empowering individuals through language education and fostering global understanding with innovative teaching methods.",3,null),e("div",null,{class:"flex flex-col sm:flex-row gap-4 justify-center"},[m(T,{href:"/courses",class:"px-8 py-3 bg-white text-teal-700 rounded-lg font-semibold hover:bg-gray-100 transition-colors text-center shadow-md",children:"Explore Our Courses",[n]:{href:n,class:n}},3,"iL_0"),m(T,{href:"/contact",class:"px-8 py-3 bg-teal-700 border border-white text-white rounded-lg font-semibold hover:bg-teal-600 transition-colors text-center shadow-md",children:"Get In Touch",[n]:{href:n,class:n}},3,"iL_1")],1,null)],1,null),1,null),e("section",{ref:t[0]},{class:"py-16 px-4 bg-white dark:bg-gray-800 section"},e("div",null,{class:"max-w-5xl mx-auto grid md:grid-cols-2 gap-12 items-center"},[e("div",null,null,[e("span",null,{class:"inline-block px-3 py-1 text-sm font-semibold text-teal-800 bg-teal-100 dark:bg-teal-900 dark:text-teal-200 rounded-full mb-3"},"Our Purpose",3,null),e("h2",null,{class:"text-3xl font-bold mb-4 text-gray-900 dark:text-white"},"Our Mission & Vision",3,null),e("p",null,{class:"text-lg text-gray-600 dark:text-gray-300 mb-6"},"Move On Academy is dedicated to making language learning accessible, engaging, and effective for everyone. We believe that mastering a new language opens doors to new cultures, opportunities, and personal growth.",3,null),e("p",null,{class:"text-lg text-gray-600 dark:text-gray-300"},"Our vision is to build a global community of confident communicators, breaking down barriers and fostering connection through the power of language.",3,null)],3,null),e("div",null,{class:"flex justify-center"},m(kl,{class:"w-48 h-48 text-teal-500 dark:text-teal-400 opacity-80",[n]:{class:n}},3,"iL_2"),1,null)],1,null),1,null),e("section",{ref:t[1]},{class:"py-16 px-4 bg-gray-50 dark:bg-gray-900 section"},e("div",null,{class:"max-w-7xl mx-auto"},[e("h2",null,{class:"text-3xl font-bold text-center mb-12 text-gray-900 dark:text-white"},"What We Stand For",3,null),e("div",null,{class:"grid md:grid-cols-2 lg:grid-cols-3 gap-8"},[e("div",null,{class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow feature-card border-t-4 border-teal-500 dark:border-teal-400"},[e("div",null,{class:"icon-gradient mb-4"},m(Z,{class:"w-6 h-6",[n]:{class:n}},3,"iL_3"),1,null),e("h3",null,{class:"text-xl font-semibold mb-2 text-gray-800 dark:text-white"},"Effective Learning",3,null),e("p",null,{class:"text-gray-600 dark:text-gray-300"},"Utilizing proven teaching methodologies combined with modern technology for optimal results.",3,null)],1,null),e("div",null,{class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow feature-card border-t-4 border-green-500 dark:border-green-400"},[e("div",null,{class:"icon-gradient mb-4"},m(be,{class:"w-6 h-6",[n]:{class:n}},3,"iL_4"),1,null),e("h3",null,{class:"text-xl font-semibold mb-2 text-gray-800 dark:text-white"},"Supportive Community",3,null),e("p",null,{class:"text-gray-600 dark:text-gray-300"},"Fostering a welcoming environment where learners can connect, practice, and grow together.",3,null)],1,null),e("div",null,{class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow feature-card border-t-4 border-cyan-500 dark:border-cyan-400"},[e("div",null,{class:"icon-gradient mb-4"},m(ml,{class:"w-6 h-6",[n]:{class:n}},3,"iL_5"),1,null),e("h3",null,{class:"text-xl font-semibold mb-2 text-gray-800 dark:text-white"},"Passion & Respect",3,null),e("p",null,{class:"text-gray-600 dark:text-gray-300"},"Driven by a love for languages and respect for diverse cultures and individual learning journeys.",3,null)],1,null)],1,null)],1,null),1,null),e("section",{ref:t[2]},{class:"py-16 px-4 bg-white dark:bg-gray-800 section"},e("div",null,{class:"max-w-5xl mx-auto grid md:grid-cols-2 gap-12 items-center"},[e("div",null,{class:"flex justify-center md:order-last"},m(hl,{class:"w-48 h-48 text-green-500 dark:text-green-400 opacity-80",[n]:{class:n}},3,"iL_6"),1,null),e("div",null,{class:"md:order-first"},[e("span",null,{class:"inline-block px-3 py-1 text-sm font-semibold text-green-800 bg-green-100 dark:bg-green-900 dark:text-green-200 rounded-full mb-3"},"How We Teach",3,null),e("h2",null,{class:"text-3xl font-bold mb-4 text-gray-900 dark:text-white"},"Our Teaching Approach",3,null),e("p",null,{class:"text-lg text-gray-600 dark:text-gray-300 mb-4"},"We blend interactive lessons, real-world scenarios, and cutting-edge AI tools like our chat partner, Alice, to create a dynamic and personalized learning experience.",3,null),e("ul",null,{class:"space-y-3 text-gray-600 dark:text-gray-300"},[e("li",null,{class:"flex items-start"},[m(wl,{class:"w-5 h-5 text-teal-500 mr-3 mt-1 flex-shrink-0",[n]:{class:n}},3,"iL_7"),e("span",null,null,"Focus on practical communication skills from day one.",3,null)],1,null),e("li",null,{class:"flex items-start"},[m(he,{class:"w-5 h-5 text-teal-500 mr-3 mt-1 flex-shrink-0",[n]:{class:n}},3,"iL_8"),e("span",null,null,"Curriculum designed for engagement and long-term retention.",3,null)],1,null),e("li",null,{class:"flex items-start"},[m(_e,{class:"w-5 h-5 text-teal-500 mr-3 mt-1 flex-shrink-0",[n]:{class:n}},3,"iL_9"),e("span",null,null,"Integration of AI for personalized practice and feedback.",3,null)],1,null)],1,null)],1,null)],1,null),1,null),e("div",null,{class:"py-16 px-4 text-center bg-gray-50 dark:bg-gray-900"},e("div",null,{class:"max-w-3xl mx-auto"},[e("h2",null,{class:"text-3xl font-bold mb-6 text-teal-700 dark:text-teal-300"},"Ready to Begin Your Language Adventure?",3,null),e("p",null,{class:"text-lg mb-8 text-gray-600 dark:text-gray-300"},"Join the Move On Academy community today and discover the joy of learning a new language.",3,null),m(T,{href:"/auth",class:"inline-flex items-center justify-center px-8 py-3 bg-gradient-to-r from-teal-600 to-green-600 text-white font-medium rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-300",children:["Sign Up Now",m(De,{class:"w-5 h-5 ml-2",[n]:{class:n}},3,"iL_10")],[n]:{href:n,class:n}},1,"iL_11")],1,null),1,null)],1,"iL_12")},ia=L(b(oa,"s_tPTKrVT0pR0")),ua={title:"About Move On Academy",meta:[{name:"description",content:"Learn about Move On Academy's mission, values, and innovative approach to language learning. Join our community and start your journey to fluency."}]},ca=Object.freeze(Object.defineProperty({__proto__:null,default:ia,head:ua},Symbol.toStringTag,{value:"Module"}));async function da(t){console.log("[DB-INIT] Starting database initialization");const l=j(t);try{console.log("[DB-INIT] Using hardcoded auth schema");const s=`
      -- Users Table for Authentication
      CREATE TABLE IF NOT EXISTS users (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          email TEXT UNIQUE NOT NULL,
          password_hash TEXT NOT NULL,
          type TEXT DEFAULT 'normal' CHECK (type IN ('admin', 'coordinator', 'normal')),
          name TEXT,
          session_expires TIMESTAMP,
          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
      );

      -- Password reset tokens
      CREATE TABLE IF NOT EXISTS password_reset_tokens (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          user_id INTEGER NOT NULL,
          token_hash TEXT NOT NULL UNIQUE,
          expires_at TIMESTAMP NOT NULL,
          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
      );

      -- Create indexes for better performance
      CREATE INDEX IF NOT EXISTS idx_users_email ON users(email);
      CREATE INDEX IF NOT EXISTS idx_users_type ON users(type);
      CREATE INDEX IF NOT EXISTS idx_reset_token_hash ON password_reset_tokens(token_hash);
      CREATE INDEX IF NOT EXISTS idx_reset_user ON password_reset_tokens(user_id);

      -- Chat History Table
      CREATE TABLE IF NOT EXISTS chat_history (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          user_id INTEGER NOT NULL,
          role TEXT NOT NULL CHECK (role IN ('user', 'assistant')), -- Who sent the message
          content TEXT NOT NULL, -- The message text
          timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE -- Link to users table
      );

      -- Index for faster history retrieval per user
      CREATE INDEX IF NOT EXISTS idx_chat_history_user_id ON chat_history(user_id);
      
      -- Text Chat Messages Table (for chat without avatar)
      CREATE TABLE IF NOT EXISTS text_chat_messages (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          user_id INTEGER NOT NULL,
          role TEXT NOT NULL CHECK (role IN ('user', 'assistant', 'system')), -- Who sent the message
          content TEXT NOT NULL, -- The message text
          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE -- Link to users table
      );

      -- Index for faster text chat history retrieval per user
      CREATE INDEX IF NOT EXISTS idx_text_chat_messages_user_id ON text_chat_messages(user_id);

      -- Placement test attempts
      CREATE TABLE IF NOT EXISTS placement_test_attempts (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          user_id INTEGER NOT NULL,
          full_name TEXT,
          email TEXT,
          phone TEXT,
          country TEXT,
          date_of_birth TEXT,
          address TEXT,
          answers_json TEXT NOT NULL,
          auto_score INTEGER NOT NULL DEFAULT 0,
          max_auto_score INTEGER NOT NULL DEFAULT 0,
          level TEXT,
          status TEXT NOT NULL DEFAULT 'submitted',
          feedback_summary TEXT,
          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
      );

      CREATE INDEX IF NOT EXISTS idx_placement_attempts_user ON placement_test_attempts(user_id);
    `.split(";").map(o=>o.trim()).filter(o=>o.length>0);console.log(`[DB-INIT] Executing ${s.length} SQL statements`);for(const o of s)await l.execute(o);const r=await l.batch(["SELECT name FROM sqlite_master WHERE type='table' AND name='users'","SELECT name FROM sqlite_master WHERE type='table' AND name='chat_history'"],"read");return r[0].rows.length===0||r[1].rows.length===0?(console.error("[DB-INIT] Verification failed: users or chat_history table not found."),{success:!1,message:"Required tables (users, chat_history) were not created successfully"}):(console.log("[DB-INIT] Database initialized successfully"),{success:!0,message:"Authentication database initialized successfully"})}catch(a){return console.error("[DB-INIT] Error initializing database:",a),{success:!1,message:`Database initialization failed: ${a instanceof Error?a.message:String(a)}`}}}async function ga(t){console.log("[DB-CHECK] Checking database connection");const l=j(t);try{const a=await l.execute("SELECT 1 as test");return a.rows&&a.rows.length>0?(console.log("[DB-CHECK] Database connection successful"),{connected:!0,message:"Database connection successful"}):(console.error("[DB-CHECK] Database connection failed: No rows returned"),{connected:!1,message:"Database connection test failed: No rows returned"})}catch(a){return console.error("[DB-CHECK] Database connection error:",a),{connected:!1,message:`Database connection failed: ${a instanceof Error?a.message:String(a)}`}}}const ht=()=>{const t=new Uint8Array(32);return crypto.getRandomValues(t),Array.from(t,l=>l.toString(16).padStart(2,"0")).join("")},bt=async t=>{const l=new TextEncoder().encode(t),a=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(a),s=>s.toString(16).padStart(2,"0")).join("")},pa=D(async function(t){const l=this.env.get("RESEND_API_KEY");if(!l)throw new Error("Resend API key not configured");const a=j(this),r=(await a.execute({sql:"SELECT id FROM users WHERE email = ?",args:[t]})).rows[0];if(!(r!=null&&r.id))return console.log("[RESET] Email not found, returning success to avoid enumeration"),{success:!0};const o=new at(l),u=(this.env.get("PUBLIC_APP_URL")||this.url.origin).replace(/\/+$/,""),c=this.env.get("SENDER_EMAIL")||"onboarding@resend.dev",d=ht(),g=await bt(d),i=new Date(Date.now()+36e5).toISOString();await a.execute({sql:"DELETE FROM password_reset_tokens WHERE user_id = ?",args:[r.id]}),await a.execute({sql:"INSERT INTO password_reset_tokens (user_id, token_hash, expires_at) VALUES (?, ?, ?)",args:[r.id,g,i]});const p=`${u}/auth/reset-password?token=${d}`,{data:h,error:x}=await o.emails.send({from:c,to:t,subject:"Recupera tu contrasena",html:`<p>Haz clic en el siguiente enlace para restablecer tu contrasena (valido por 1 hora):</p><p><a href="${p}">${p}</a></p>`});if(x)throw console.error("Resend error:",x),new Error(x.message);return{success:!0,id:h==null?void 0:h.id}},"vA9tuPJMQIw"),ma=U(b(pa,"s_vA9tuPJMQIw")),ha=async(t,l)=>{try{return console.log("[LOGOUT] Starting logout process"),ot(l),l.redirect(302,"/auth"),{success:!0}}catch(a){return console.error("Logout error:",a),{success:!1,error:a instanceof Error?a.message:"Logout failed"}}},ba=te(b(ha,"s_iyKbdfOHuOI")),ya=async(t,l)=>{const a=j(l),{email:s}=t;try{return{success:!0,isRegistered:(await a.execute({sql:"SELECT id FROM users WHERE email = ?",args:[s]})).rows.length>0}}catch(r){return console.error("Email check error:",r),{success:!1,error:r instanceof Error?r.message:"Failed to check email"}}},yt=te(b(ya,"s_Emz3Bmx8A2s")),fa=async(t,l)=>{const a=j(l),{email:s,password:r,fullName:o}=t;try{const u=await rt(r),c=await a.execute({sql:"SELECT COUNT(*) as count FROM users",args:[]}),d=c.rows.length>0&&c.rows[0].count===0;let g,i;i=d?"admin":"normal";const p=o?"INSERT INTO users (email, password_hash, type, name) VALUES (?, ?, ?, ?)":"INSERT INTO users (email, password_hash, type) VALUES (?, ?, ?)",h=o?[s,u,i,o.trim()]:[s,u,i];if(g=(await a.execute({sql:p,args:h})).lastInsertRowid,!g)throw new Error("Registration failed: userId is undefined");const y=String(g);return st(l,y,i),i==="admin"?l.redirect(302,"/"):l.redirect(302,"/chat"),{success:!0}}catch(u){return console.error("Registration error:",u),{success:!1,error:u instanceof Error?u.message:"Registration failed"}}},ft=te(b(fa,"s_dp10BsJQTcg")),xa=async(t,l)=>{const a=j(l),{email:s,password:r}=t;try{const u=(await a.execute({sql:"SELECT * FROM users WHERE email = ?",args:[s]})).rows[0];if(!u||typeof u.password_hash!="string"||!u.id)return{success:!1,error:"Invalid user data"};if(!await sl(r,u.password_hash))return{success:!1,error:"Invalid password"};const d=String(u.id);await a.execute({sql:"UPDATE users SET session_expires = ? WHERE id = ?",args:[new Date(Date.now()+36e5),d]});const g=u.type==="admin"?"admin":u.type==="coordinator"?"coordinator":"normal";return st(l,d,g),g==="admin"?l.redirect(302,"/"):l.redirect(302,"/chat"),{success:!0}}catch(o){return console.error("Login error:",o),{success:!1,error:"Login failed"}}},xt=te(b(xa,"s_R0sJTR90Tks")),va=async t=>{console.log("[AUTH-SETUP] Starting database setup");try{const l=await ga(t);if(!l.connected)return console.error("[AUTH-SETUP] Database connection failed:",l.message),{success:!1,error:"Database connection failed. Check your environment configuration.",details:l.message};const a=await da(t);if(!a.success)return console.error("[AUTH-SETUP] Database initialization failed:",a.message),{success:!1,error:"Failed to initialize authentication database.",details:a.message};const s=ie(t);return console.log(`[AUTH-SETUP] Current user ID: ${s||"none"}`),console.log("[AUTH-SETUP] Database setup completed successfully"),{success:!0,message:"Database initialized successfully",user_id:s}}catch(l){return console.error("[AUTH-SETUP] Unexpected error during setup:",l),{success:!1,error:"An unexpected error occurred during setup",details:l instanceof Error?l.message:String(l)}}},vt=ee(b(va,"s_wERsQ0wluBY")),wa=`
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes slide-up {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes float {
      0% { transform: translate(0, 0); }
      25% { transform: translate(5px, -15px); }
      50% { transform: translate(10px, 0); }
      75% { transform: translate(5px, 15px); }
      100% { transform: translate(0, 0); }
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 0.5; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.05); }
    }
    
    @keyframes fade-in {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
    
    input:-webkit-autofill,
    input:-webkit-autofill:hover,
    input:-webkit-autofill:focus {
      -webkit-box-shadow: 0 0 0px 1000px white inset !important;
      box-shadow: 0 0 0px 1000px white inset !important;
      border-color: #d1d5db !important;
      transition: background-color 5000s ease-in-out 0s !important;
    }
    
    .dark input:-webkit-autofill,
    .dark input:-webkit-autofill:hover,
    .dark input:-webkit-autofill:focus {
      -webkit-box-shadow: 0 0 0px 1000px #374151 inset !important; /* Use gray-700 */
      box-shadow: 0 0 0px 1000px #374151 inset !important; /* Use gray-700 */
      border-color: #4B5563 !important;
      -webkit-text-fill-color: #F3F4F6 !important;
    }
  `,ka=()=>{var x;xe();const t=vt(),l=yt(),a=ft(),s=xt(),r=v(!1),o=v(""),u=v("idle"),c=v(""),d=v("email"),g=v(""),i=v(""),p=v(""),h=v(null);return q(w("s_U06dSvVd2qw",[l,p,d])),q(w("s_52Jt3D7OwC4",[p,s])),q(w("s_KmLEw99uQbY",[p,a])),q(w("s_L00ube5A5nM",[p,h,t])),Ze(b(wa,"s_jzc733Hxaos")),e("div",null,{class:"min-h-screen w-full flex items-center justify-center py-6 px-4 sm:px-6 lg:px-8 relative"},[e("div",null,{class:"fixed inset-0 pointer-events-none overflow-hidden z-0"},[e("div",null,{class:"w-3 h-3 bg-teal-400/50 dark:bg-teal-300/40 rounded-full absolute top-[20%] left-[35%] animate-[pulse_4s_infinite]"},null,3,null),e("div",null,{class:"w-2 h-2 bg-green-400/50 dark:bg-green-300/40 rounded-full absolute top-[60%] left-[70%] animate-[pulse_5s_infinite]",style:"animation-delay: 0.7s;"},null,3,null),h.value&&e("div",null,{class:"fixed top-20 left-1/2 transform -translate-x-1/2 bg-blue-50 border border-blue-200 text-blue-800 rounded-md px-4 py-2 text-sm max-w-xs text-center z-50"},f(y=>y.value,[h],"p0.value"),3,"lQ_0")],1,null),e("div",null,{class:"absolute top-6 left-1/2 transform -translate-x-1/2"},e("div",null,{class:"flex items-center"},[e("div",null,{class:"relative"},e("div",null,{class:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-500 to-green-500 flex items-center justify-center text-white shadow-lg"},m(Z,{class:"w-6 h-6",[n]:{class:n}},3,"lQ_1"),1,null),1,null),e("div",null,{class:"ml-2 flex flex-col"},[e("h1",null,{class:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-teal-600 to-green-600 dark:from-teal-400 dark:to-green-400"},"Move On Academy",3,null),e("span",null,{class:"text-xs text-teal-700 dark:text-teal-400"},"Language Learning Platform",3,null)],3,null)],1,null),1,null),e("div",null,{class:"max-w-md w-full z-10"},[e("div",null,{class:"bg-white dark:bg-gray-800/80 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden backdrop-blur-sm p-8 animate-[fade-in_0.5s_ease-out]"},[e("div",null,{class:"text-center mb-8"},[e("h2",null,{class:"text-3xl font-bold mb-3 text-transparent bg-clip-text bg-gradient-to-r from-teal-600 to-green-600 dark:from-teal-400 dark:to-green-400"},f(y=>y.value==="email"?"Welcome Back!":y.value==="password"?"Sign In":"Join Move On Academy",[d],'p0.value==="email"?"Welcome Back!":p0.value==="password"?"Sign In":"Join Move On Academy"'),3,null),e("p",null,{class:"text-gray-600 dark:text-gray-300"},f((y,S)=>S.value==="email"?"Enter your email to continue":S.value==="password"?`Signing in as ${y.value}`:`Complete registration for ${y.value}`,[g,d],'p1.value==="email"?"Enter your email to continue":p1.value==="password"?`Signing in as ${p0.value}`:`Complete registration for ${p0.value}`'),3,null)],3,null),d.value==="email"&&m(me,{action:l,class:"space-y-6",children:[e("div",null,{class:"space-y-2"},[e("label",null,{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Email Address",3,null),e("div",null,{class:"relative"},[e("div",null,{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},m(bl,{class:"h-5 w-5 text-gray-400 dark:text-gray-500",[n]:{class:n}},3,"lQ_2"),1,null),e("input",null,{id:"email",name:"email",type:"email",required:!0,value:f(y=>y.value,[g],"p0.value"),class:"pl-10 block w-full rounded-lg border-0 py-3 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-700 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-teal-600 dark:focus:ring-teal-500 bg-white dark:bg-gray-700",placeholder:"you@example.com",onInput$:w("s_Huo49utfGIw",[g])},null,3,null)],1,null),e("p",null,{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"We'll check if you already have an account",3,null)],1,null),e("button",null,{type:"submit",disabled:f(y=>y.isRunning,[l],"p0.isRunning"),class:"w-full flex justify-center items-center py-3 px-4 rounded-lg text-white bg-gradient-to-r from-teal-600 to-green-600 hover:from-teal-700 hover:to-green-700 font-medium shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed"},l.isRunning?e("span",null,{class:"flex items-center"},[m(pe,{class:"animate-spin mr-2 h-5 w-5 text-white",[n]:{class:n}},3,"lQ_3"),"Checking..."],1,"lQ_4"):"Continue",1,null)],[n]:{action:n,class:n}},1,"lQ_5"),d.value==="password"&&!r.value&&m(me,{action:s,class:"space-y-6",children:[e("input",null,{type:"hidden",name:"email",value:f(y=>y.value,[g],"p0.value")},null,3,null),e("div",null,{class:"space-y-2"},[e("label",null,{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Password",3,null),e("div",null,{class:"relative"},[e("div",null,{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},m(Ye,{class:"h-5 w-5 text-gray-400 dark:text-gray-500",[n]:{class:n}},3,"lQ_6"),1,null),e("input",null,{id:"password",name:"password",type:"password",required:!0,class:"pl-10 block w-full rounded-lg border-0 py-3 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-700 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-teal-600 dark:focus:ring-teal-500 bg-white dark:bg-gray-700",placeholder:"••••••••"},null,3,null)],1,null),e("div",null,{class:"flex justify-end"},e("button",null,{type:"button",class:"text-sm text-teal-600 hover:text-teal-500 dark:text-teal-400 dark:hover:text-teal-300 underline",onClick$:w("s_tCa1Fn2TIOI",[r])},"Forgot password?",3,null),3,null)],1,null),e("div",null,{class:"flex justify-between items-center"},[e("button",null,{type:"button",class:"flex items-center px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 text-sm",onClick$:w("s_Hkz91dGcq04",[p,i,d])},[m(Te,{class:"mr-2 h-4 w-4",[n]:{class:n}},3,"lQ_7"),"Back"],1,null),e("button",null,{type:"submit",disabled:f(y=>y.isRunning,[s],"p0.isRunning"),class:"flex justify-center items-center py-2 px-6 rounded-lg text-white bg-gradient-to-r from-teal-600 to-green-600 hover:from-teal-700 hover:to-green-700 font-medium shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed"},s.isRunning?e("span",null,{class:"flex items-center"},[m(pe,{class:"animate-spin mr-2 h-5 w-5 text-white",[n]:{class:n}},3,"lQ_8"),"Signing in..."],1,"lQ_9"):"Sign In",1,null)],1,null)],[n]:{action:n,class:n}},1,"lQ_10"),r.value&&e("form",null,{class:"space-y-6","preventdefault:submit":!0,onSubmit$:w("s_LtLocgfpB08",[o,c,u])},[e("div",null,{class:"space-y-2"},[e("label",null,{htmlFor:"recoveryEmail",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Ingresa tu email para recuperar tu contraseña",3,null),e("input",null,{id:"recoveryEmail",type:"email",required:!0,value:f(y=>y.value,[o],"p0.value"),class:"block w-full rounded-lg border-0 py-3 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-700 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-teal-600 dark:focus:ring-teal-500 bg-white dark:bg-gray-700",placeholder:"you@example.com",onInput$:w("s_157XF8xTtRI",[o])},null,3,null)],3,null),e("div",null,{class:"flex justify-between items-center"},[e("button",null,{type:"button",class:"flex items-center px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 text-sm",onClick$:w("s_j6wWUXnveLI",[c,u,r])},[m(Te,{class:"mr-2 h-4 w-4",[n]:{class:n}},3,"lQ_11")," Volver"],1,null),e("button",null,{type:"submit",disabled:f(y=>y.value==="sending",[u],'p0.value==="sending"'),class:"flex justify-center items-center py-2 px-6 rounded-lg text-white bg-gradient-to-r from-teal-600 to-green-600 hover:from-teal-700 hover:to-green-700 font-medium shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed"},u.value==="sending"?e("span",null,{class:"flex items-center"},[m(pe,{class:"animate-spin mr-2 h-5 w-5 text-white",[n]:{class:n}},3,"lQ_12"),"Enviando..."],1,"lQ_13"):"Enviar recuperación",1,null)],1,null),c.value&&e("div",null,{class:"mt-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-xl"},f(y=>y.value,[c],"p0.value"),3,"lQ_14"),u.value==="sent"&&e("div",null,{class:"mt-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded-xl"},"¡Email enviado! Revisa tu bandeja de entrada.",3,"lQ_15")],1,"lQ_16"),d.value==="register"&&m(me,{action:a,class:"space-y-6",children:[e("input",null,{type:"hidden",name:"email",value:f(y=>y.value,[g],"p0.value")},null,3,null),e("div",null,{class:"space-y-2"},[e("label",null,{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Create Password",3,null),e("div",null,{class:"relative"},[e("div",null,{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},m(Ye,{class:"h-5 w-5 text-gray-400 dark:text-gray-500",[n]:{class:n}},3,"lQ_17"),1,null),e("input",null,{id:"password",name:"password",type:"password",required:!0,class:"pl-10 block w-full rounded-lg border-0 py-3 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-700 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-teal-600 dark:focus:ring-teal-500 bg-white dark:bg-gray-700",placeholder:"Choose a strong password",minLength:6},null,3,null)],1,null),e("p",null,{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Password must be at least 6 characters",3,null)],1,null),e("div",null,{class:"space-y-2"},[e("label",null,{for:"fullName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Full Name (Optional)",3,null),e("div",null,{class:"relative"},[e("div",null,{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},m(_l,{class:"h-5 w-5 text-gray-400 dark:text-gray-500",[n]:{class:n}},3,"lQ_18"),1,null),e("input",null,{id:"fullName",name:"fullName",type:"text",class:"pl-10 block w-full rounded-lg border-0 py-3 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-700 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-teal-600 dark:focus:ring-teal-500 bg-white dark:bg-gray-700",placeholder:"Your Name"},null,3,null)],1,null)],1,null),e("div",null,{class:"flex justify-between items-center"},[e("button",null,{type:"button",class:"flex items-center px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 text-sm",onClick$:w("s_iXE2aeUX0tQ",[p,i,d])},[m(Te,{class:"mr-2 h-4 w-4",[n]:{class:n}},3,"lQ_19"),"Back"],1,null),e("button",null,{type:"submit",disabled:f(y=>y.isRunning,[a],"p0.isRunning"),class:"flex justify-center items-center py-2 px-6 rounded-lg text-white bg-gradient-to-r from-teal-600 to-green-600 hover:from-teal-700 hover:to-green-700 font-medium shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed"},a.isRunning?e("span",null,{class:"flex items-center"},[m(pe,{class:"animate-spin mr-2 h-5 w-5 text-white",[n]:{class:n}},3,"lQ_20"),"Creating account..."],1,"lQ_21"):"Create Account",1,null)],1,null)],[n]:{action:n,class:n}},1,"lQ_22"),p.value&&e("div",null,{class:"mt-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl animate-[slide-up_0.3s_ease-out]"},e("div",null,{class:"flex items-start"},[m(gl,{class:"h-5 w-5 text-red-500 dark:text-red-400 mt-0.5 mr-2 flex-shrink-0",[n]:{class:n}},3,"lQ_23"),e("div",null,null,[e("p",null,{class:"text-sm text-red-600 dark:text-red-300 font-semibold"},f(y=>y.value,[p],"p0.value"),3,null),((x=t.value)==null?void 0:x.details)&&e("p",null,{class:"text-xs text-red-500 dark:text-red-300 mt-1"},["Details: ",f(y=>y.value.details,[t],"p0.value.details")],3,"lQ_24")],1,null)],1,null),1,"lQ_25"),!1],1,null),e("div",null,{class:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400"},["By continuing, you agree to the Move On Academy",e("a",null,{href:"/terms",class:"text-teal-600 hover:text-teal-500 dark:text-teal-400 dark:hover:text-teal-300 ml-1"},"Terms of Service",3,null),e("span",null,{class:"mx-1"},"and",3,null),e("a",null,{href:"/privacy",class:"text-teal-600 hover:text-teal-500 dark:text-teal-400 dark:hover:text-teal-300"},"Privacy Policy",3,null)],3,null)],1,null)],1,"lQ_28")},_a=L(b(ka,"s_Rhbq243Q8qQ")),Sa=Object.freeze(Object.defineProperty({__proto__:null,_auto_generateResetToken:ht,_auto_hashToken:bt,default:_a,sendPasswordResetEmail:ma,useCheckEmail:yt,useLogin:xt,useLogout:ba,useRegister:ft,useTableSetup:vt},Symbol.toStringTag,{value:"Module"})),Se=10,ue={}.DID_API_URL||"https://api.d-id.com",qe=t=>{for(const l of ye)if(l.value===t)return l.code;return"US"},ge={US:tl,ES:ll,IT:al,FR:nl,BR:rl},ye=[{value:"en-US",label:"English",code:"US",flagSvg:ge.US},{value:"es-ES",label:"Spanish",code:"ES",flagSvg:ge.ES},{value:"it-IT",label:"Italian",code:"IT",flagSvg:ge.IT},{value:"fr-FR",label:"French",code:"FR",flagSvg:ge.FR},{value:"pt-BR",label:"Portuguese",code:"BR",flagSvg:ge.BR}],Q={"en-US":"English","es-ES":"Spanish","it-IT":"Italian","fr-FR":"French","pt-BR":"Portuguese"},Ke={"en-US":{type:"microsoft",voice_id:"en-US-JennyNeural"},"es-ES":{type:"microsoft",voice_id:"es-ES-AbrilNeural"},"it-IT":{type:"microsoft",voice_id:"it-IT-IsabellaNeural"},"fr-FR":{type:"microsoft",voice_id:"fr-FR-DeniseNeural"},"pt-BR":{type:"microsoft",voice_id:"pt-BR-BrendaNeural"}},wt=t=>Ke[t]||Ke["en-US"],kt=t=>{if(!t)return"";let l=t.replace(/\*\*([^*]+)\*\*/g,"$1");return l=l.replace(/\*([^*]+)\*/g,"$1"),l=l.replace(/~~([^~]+)~~/g,"$1"),l=l.replace(/`([^`]+)`/g,"$1"),l=l.replace(/```[a-z]*\n([\s\S]*?)```/g,"code block omitted"),l=l.replace(/^#{1,6}\s+(.+)$/gm,"$1"),l=l.replace(/\[([^\]]+)\]\([^)]+\)/g,"$1"),l=l.replace(/https?:\/\/\S+/g,"URL"),l=l.replace(/www\.\S+/g,"URL"),l=l.replace(/\n\s*[-•*+]\s*/g,", "),l=l.replace(/\n/g," "),l=l.replace(/[#_~<>{}|]/g,""),l=l.replace(/&[a-z]+;/g," "),l=l.replace(/["']([^"']+)["']/g,"$1"),l=l.replace(/\s+/g," ").trim(),l},_t=(t,l=400)=>t?t.replace(/[`]/g,"'").replace(/\s+/g," ").trim().slice(0,l):"",Ea=D(function(){const t=this.env.get("DID_API_KEY")||{}.DID_API_KEY;return t?`Basic ${t}`:(console.error("D-ID API Key is not configured on the server."),"")},"cZmc7P5UUuA"),ce=U(b(Ea,"s_cZmc7P5UUuA")),Aa=D(async function(t,l,a=0){try{console.log(`Server Fetch: Making request to: ${t}`,{method:l.method});const o=await fetch(t,l);if(!o.ok){const u=await o.text().catch(()=>"No error details");if(console.error(`Server Fetch: Request failed status ${o.status}: ${u}`),o.status===401||o.status===403)throw console.error("Server Fetch: Authentication failed. Check D-ID API key."),new Error(`Authentication failed: ${o.status}`);if(a<3){const c=Math.min(Math.pow(2,a)/4+Math.random(),4)*3e3;return console.log(`Server Fetch: Retrying in ${c}ms...`),await new Promise(d=>setTimeout(d,c)),X(t,l,a+1)}throw new Error(`Server Fetch: Request failed status: ${o.status}`)}return o}catch(o){if(a<3){const u=Math.min(Math.pow(2,a)/4+Math.random(),4)*3e3;return console.log(`Server Fetch: Request error: ${o.message}, retrying in ${u}ms...`),await new Promise(c=>setTimeout(c,u)),X(t,l,a+1)}throw console.error("Server Fetch: Max retries exceeded:",o),o}},"ZZpOGQZsXss"),X=U(b(Aa,"s_ZZpOGQZsXss")),Ta=D(async function(){console.log("Server: Step 1: Creating a new stream");const t=await ce();if(!t)throw new Error("Server Auth Header failed");const a=await(await X(`${ue}/talks/streams`,{method:"POST",headers:{Authorization:t,"Content-Type":"application/json"},body:JSON.stringify({source_url:"https://i.postimg.cc/fLdQq0DW/thumbnail.jpg"})})).json();if(console.log("Server: Stream creation response:",a),!a.id||!a.session_id)throw new Error("Server: Stream ID or Session ID missing");return{streamId:a.id,offer:a.offer||a.jsep,iceServers:a.ice_servers,sessionId:a.session_id}},"CfpRc90J9U4"),St=U(b(Ta,"s_CfpRc90J9U4")),Ca=D(async function(t,l,a){console.log("Server: Step 3: Sending SDP answer");const s=await ce();if(!s)throw new Error("Server Auth Header failed");const r=await X(`${ue}/talks/streams/${t}/sdp`,{method:"POST",headers:{Authorization:s,"Content-Type":"application/json"},body:JSON.stringify({answer:a,session_id:l})});if(!r.ok)throw new Error(`Server: SDP response error: ${r.status}`);return console.log("Server: SDP answer sent successfully"),await r.json()},"3nz0mRTbAs8"),Et=U(b(Ca,"s_3nz0mRTbAs8")),Ia=D(async function(t,l,a){console.log("Server: Sending ICE candidate");const s=await ce();if(!s)throw new Error("Server Auth Header failed");const r=await X(`${ue}/talks/streams/${t}/ice`,{method:"POST",headers:{Authorization:s,"Content-Type":"application/json"},body:JSON.stringify({...a,session_id:l})});r.ok?console.log("Server: ICE candidate sent successfully"):console.error(`Server: Failed to send ICE candidate: ${r.status}`)},"9bTWdD9eHtM"),At=U(b(Ia,"s_9bTWdD9eHtM")),Ra=D(async function(t,l,a,s){console.log("Server: Step 4: Creating a talk");const r=await ce();if(!r)throw new Error("Server Auth Header failed");const o=await X(`${ue}/talks/streams/${a}`,{method:"POST",headers:{Authorization:r,"Content-Type":"application/json"},body:JSON.stringify({session_id:s,script:{type:"text",input:kt(t),provider:{type:l.type,voice_id:l.voice_id}},config:{stitch:!0},driver_url:"bank://lively"})});if(!o.ok)throw new Error(`Server: Talk request failed status: ${o.status}`);const u=await o.json();return console.log("Server: Talk created successfully:",u),u},"zVEU324USAY"),Tt=U(b(Ra,"s_zVEU324USAY")),Ma=D(async function(t,l){if(!t||!l)return;console.log("Server: Step 5: Closing the stream");const a=await ce();if(!a){console.error("Server: Cannot close stream, auth header failed");return}try{await X(`${ue}/talks/streams/${t}`,{method:"DELETE",headers:{Authorization:a,"Content-Type":"application/json"},body:JSON.stringify({session_id:l})}),console.log("Server: Stream closed successfully")}catch(s){console.error("Server: Error closing stream:",s.message)}},"EshFHZDaKXA"),Ct=U(b(Ma,"s_EshFHZDaKXA")),It=(t,l=Se)=>{if(t.length<=l)return[...t];const a=t.filter(o=>o.role==="system"),r=t.filter(o=>o.role!=="system").slice(-l);return[...a,...r]},La=D(async function(t,l,a,s=[],r){console.log("Server: Fetching LangChain response for thread:",l);const o=this.env.get("OPENAI_API_KEY")||{}.OPENAI_API_KEY;if(!o)return console.error("OpenAI API Key not configured on server."),"Error: AI service not configured.";try{const u=new tt({openAIApiKey:o,model:"gpt-4o-mini",temperature:0}),c=(r==null?void 0:r.autoScore)!==null&&(r==null?void 0:r.autoScore)!==void 0&&(r==null?void 0:r.maxAutoScore)!==null&&(r==null?void 0:r.maxAutoScore)!==void 0?` (auto score ${r==null?void 0:r.autoScore}/${r==null?void 0:r.maxAutoScore})`:"",d=r!=null&&r.level?`Placement insight: Latest MOA placement test indicates CEFR ${r.level}${c}. Coach from this baseline, celebrate strengths, and map the bridge to the next band.`:"Placement insight: No placement test on record yet. Invite the learner to share current evidence or to complete the MOA placement test so you can calibrate instruction.",g=r!=null&&r.feedbackSummary?` Recent academic feedback: ${_t(r.feedbackSummary)}.`:"",p=`Before we begin - REMEMBER THIS: methods, habits, structures, and routines matter, but always keep it fun. Metodo MOA thrives on joyful rigor and reflective teaching. Keep asking, "Does knowing a lot about a subject automatically make us good teachers?"

Mission (MOA SCHOOL):
- Serve children, teens, and adults inside an interactive, family-like, communicative environment that highlights human values and community.
- Customize content per group, address particular needs, and use culture as a formative vehicle to help learners fall in love with the language.
- Recognize that learning a new language is complex, so accompany students with empathy: "Estamos aqui para ensenarte, ayudarte y aprender contigo."

Video reminder:
- "The Big Bang Theory - Sheldon teaches Penny Physics" is your cautionary tale. Avoid monologues; lean into relational, balanced facilitation.

Reflection axes to keep alive in every response: COMPETENCIAS | PERSONALIZADO | CULTURAL | COMUNICATIVO | MCER.

${`${d}${g}`}

Personalization:
- Personalization is co-created by teacher and learner. Ask for aspirations, objectives, preferred themes, and relevant info; encourage students to own their learning.
- Highlight positive traits to leverage and sensitive areas to strengthen; design assignments for home that extend practice and competence.
- Repeat the mantra: "Conozca a sus estudiantes."

Culture ("Link it"):
- As Enrico Arcaini (1991) noted, language study is inseparable from culture. Use cultural references to connect prior and new knowledge ("Learn it -> Link it") and to build new neural pathways.
- Promote values that create community while showing how culture makes the language meaningful.

MCER quick map:
- A1: Exchange everyday phrases, introduce oneself, request basic info when speech is slow and cooperative.
- A2: Navigate frequent topics (family, shopping, work, places) with simple exchanges and short past descriptions.
- B1: Grasp main points of clear speech/text on familiar matters, manage travel situations, narrate experiences, and justify opinions briefly.
- B2: Understand complex concrete/abstract content, interact fluently with natives, craft detailed texts with pros/cons.
- C1: Decode demanding texts, capture implicit meaning, express ideas fluently for social/academic/pro contexts with cohesive organization.
- C2: Comprehend almost everything heard/read, synthesize diverse sources, and communicate with nuanced precision.

Teaching style expectations:
- Avoid authoritarian traits (dominance, intimidation, ridicule, rigid one-way delivery, emotional distance) and permissive traits (anything-goes ambiguity, blurred limits, poor observation, ignoring feedback).
- Embody the equilibrado style: organized, differentiated, well-planned, self-possessed, strategy-rich, stimulating active participation, and fostering teacher-student communication.

Metodo MOA structure (PPU / "I do, We do, You do, Extend it"):
- Teacher-directed (I do / Presentation): deliver short segments, inductive teaching, retrieval practice, modeling, demonstrations, multimodal and real-life contexts.
- Guided (We do / Practice): connect practice tightly to presentation, use worksheets, role-play, deduction, declarative + procedural systems, and corrective feedback.
- Student-directed (You do / Use & Extend it): grant independence, act as guide-on-the-side, integrate problem/inquiry/exploratory/experiential work, WebQuests, cultural links, assignments for home, and "Extend it" opportunities for deeper dives.
- Always articulate SWAT ("Students will be able to...") goals per activity and monitor progression from teacher-driven to student-driven protagonism.
- Remember: executing PPU well is what makes a class truly MOA and keeps fun + learning in balance.

Lesson-plan cues to confirm or request:
- Teacher name, schedule, level, number of students, unit number, recommended time, main grammar focus.
- Warm up -> Presentation -> Practice -> Use (and Extend It) description with activity modes (video, song, presentation, game, dialogue, role-play, other) plus comments and code (e.g., MOA/ACAD/0001).
- Ensure cultural touchpoints, retrieval practice moments, and assignments are visible to learners.

Guidelines:
- Respond entirely in ${a} unless the learner explicitly requests a different language.
- Tie every suggestion to competencies, personalization, culture, communication, and MCER outcomes; cite strategies like inductive teaching, retrieval practice, worksheets, role-play, problem-based learning, Learn it -> Link it, and home assignments.
- Align explanations with the learner's placement level while nudging toward the next MCER band.
- Encourage learners to share interests/goals and remind them that personalization relies on both teacher and student effort.
- Provide actionable cultural links and next steps that gradually reduce teacher talk and increase student agency.
- Keep a warm, organized, encouraging tone - never authoritarian, never permissive; be the supportive guide.
- Avoid discussions about sexual content, violence, or religion; gently redirect to safe, pedagogical topics if prompted.

Your goal is to help the learner progress through Metodo MOA with joy, rigor, and community, weaving competencies, personalization, culture, communication, and MCER alignment into every response.`,h=s.some(A=>A.role==="system");let x=[...s];h||x.unshift({role:"system",content:p}),x.push({role:"user",content:t});const S=It(x).map(A=>A.role==="system"?new se(A.content):A.role==="user"?new Me(A.content):new lt(A.content));console.log(`Server: Using ${S.length} messages for context`);const I=await u.invoke(S);return console.log("Server: LangChain response:",I.content),I.content}catch(u){return console.error("Server: Error in LangChain model:",u),"I'm sorry, I encountered an error processing your request."}},"dVPtsXiqStU"),Rt=U(b(La,"s_dVPtsXiqStU")),Pa=D(async function(t,l,a){console.log("Server: Processing audio with OpenAI STT");const s=this.env.get("OPENAI_API_KEY");if(!s)return console.error("OpenAI API Key not configured on server."),"Error: Speech service not configured.";try{const r=Buffer.from(t,"base64"),o=new FormData,u=new Blob([r],{type:l});o.append("file",u,"audio.webm");let c="";switch(a.toLowerCase()){case"english":c="en";break;case"spanish":c="es";break;case"italian":c="it";break;case"french":c="fr";break;case"portuguese":c="pt";break;default:c="en"}o.append("language",c),console.log(`Server: Audio processing - Using language code '${c}' for '${a}'`),o.append("prompt",`The following is a conversation in ${a}. Please transcribe accurately maintaining the original language.`),o.append("model","whisper-1"),o.append("response_format","text"),console.log("Server: Sending audio data to OpenAI, size:",r.length,"bytes");const d=await fetch("https://api.openai.com/v1/audio/transcriptions",{method:"POST",headers:{Authorization:`Bearer ${s}`},body:o});if(!d.ok){const i=await d.text();throw console.error("Server: OpenAI STT API error:",d.status,i),new Error(`OpenAI STT API error: ${d.status}`)}const g=await d.text();return console.log(`Server: Transcription result (${a}):`,g),console.log(`Server: Transcription length: ${g.length} characters`),g.trim()}catch(r){return console.error("Server: Error processing audio with OpenAI:",r),"Error processing audio."}},"Q89AFdX2E0U"),Mt=U(b(Pa,"s_Q89AFdX2E0U")),$a=D(async function(t,l,a,s){if(!s){console.warn("Server: Cannot save chat message, user not logged in.");return}console.log("Server: Saving chat message for user:",s);try{const r=j(this),o=await r.execute({sql:"PRAGMA table_info(chat_history)"});console.log("Chat history table structure:",o.rows);const u=o.rows.map(g=>g.name);console.log("Chat history columns:",u.join(", "));const c=o.rows.find(g=>g.name==="user_id"||g.name==="userId");if(!c){console.error("Server: chat_history table is missing the user_id/userId column!");return}const d=c.name;console.log(`Server: Using column name "${d}" for user ID`);try{const g=`INSERT INTO chat_history (${d}, role, content, timestamp) VALUES (?, ?, ?, ?)`,i=await r.execute({sql:g,args:[s,"user",l,new Date().toISOString()]});console.log("Server: User message saved successfully",i);const p=await r.execute({sql:g,args:[s,"assistant",a,new Date().toISOString()]});console.log("Server: Assistant message saved successfully",p)}catch(g){throw console.error("Server: SQL insert error:",g.message),g.message.includes("no column named")&&(console.error("Server: Column name error - check that column names match exactly with the schema"),console.error("Server: Available columns:",u.join(", ")),console.error("Server: Attempted to use column:",d)),g}console.log("Server: Chat messages saved successfully")}catch(r){console.error("Server: Error saving chat message to Turso:",r.message),console.error("Server: Error details:",r)}},"t5qavYemaxA"),Lt=U(b($a,"s_t5qavYemaxA")),Oa=D(async function(t,l){if(!t){console.warn("Server: Cannot update language, user not logged in.");return}console.log("Server: Updating language for user:",t,"to",l);try{const a=j(this),s=await a.execute({sql:"PRAGMA table_info(users)"});console.log("Users table structure:",s.rows);const r=s.rows.find(o=>o.name.toLowerCase().includes("chatbot")&&o.name.toLowerCase().includes("lang"));if(r){const o=r.name;console.log(`Found language column: ${o}`),await a.execute({sql:`UPDATE users SET ${o} = ? WHERE id = ?`,args:[l,t]}),console.log("Server: User language updated successfully")}else console.error("Server: Couldn't find chatbot language column in users table")}catch(a){console.error("Server: Error updating user language in Turso:",a.message)}},"Q1ZuWs0UdZw"),qa=U(b(Oa,"s_Q1ZuWs0UdZw")),ja=D(async function(t,l=50){if(!t)return console.warn("Server: Cannot load chat history, user not logged in."),[];console.log("Server: Loading chat history for user:",t);try{const r=(await j(this).execute({sql:"SELECT role, content, timestamp FROM chat_history WHERE user_id = ? ORDER BY timestamp ASC LIMIT ?",args:[t,l*2]})).rows.map(o=>({role:o.role,content:o.content,timestamp:o.timestamp}));if(console.log(`Server: Loaded ${r.length} chat history messages`),r.length>Se){const o=Math.max(0,r.length-Se),u=r[o].role==="assistant"?o-1:o,c=r.slice(Math.max(0,u));return console.log(`Server: Trimmed history from ${r.length} to ${c.length} messages`),c}return r}catch(a){return console.error("Server: Error loading chat history:",a.message),[]}},"PJb0eS0Gg0U");U(b(ja,"s_PJb0eS0Gg0U"));const Na=async t=>{var o,u;const l=t.sharedMap.get("session");let a="en-US",s,r={level:null,autoScore:null,maxAutoScore:null,feedbackSummary:null};if((o=l==null?void 0:l.user)!=null&&o.id)s=l.user.id;else{const c=(u=t.cookie.get("auth_token"))==null?void 0:u.value;if(!c)throw console.log("[CHAT] No authentication found, redirecting to login"),t.redirect(302,"/auth/");console.log("[CHAT] Using auth_token cookie for authentication"),s=c}try{const c=j(t),d=s,g=await c.execute({sql:"PRAGMA table_info(users)"});console.log("[CHAT] Users table structure:",g.rows);const i=g.rows.find(p=>p.name.toLowerCase().includes("chatbot")&&p.name.toLowerCase().includes("lang"));if(i){const p=i.name;console.log(`[CHAT] Found language column: ${p}`);const h=await c.execute({sql:`SELECT ${p} AS chatbot_language FROM users WHERE id = ? LIMIT 1`,args:[d]});if(h.rows.length>0&&h.rows[0].chatbot_language){const x=h.rows[0].chatbot_language;ye.some(S=>S.value===x)?a=x:console.warn(`[CHAT] Loaded invalid language '${x}' for user ${s}, using default.`)}}else console.warn("[CHAT] Couldn't find chatbot language column in users table");try{const p=await c.execute({sql:`SELECT level, auto_score, max_auto_score, feedback_summary
                      FROM placement_test_attempts
                      WHERE user_id = ?
                      ORDER BY datetime(created_at) DESC
                      LIMIT 1`,args:[d]});if(p.rows.length>0){const h=p.rows[0];r={level:h.level?String(h.level):null,autoScore:h.auto_score!==void 0&&h.auto_score!==null?Number(h.auto_score):null,maxAutoScore:h.max_auto_score!==void 0&&h.max_auto_score!==null?Number(h.max_auto_score):null,feedbackSummary:h.feedback_summary?String(h.feedback_summary):null}}}catch(p){console.warn(`[CHAT] Could not load placement context for user ${s??"unknown"}:`,p)}}catch(c){console.error("[CHAT] Failed to load user language from DB:",c.message)}return{initialLanguage:a,userId:s,initialThreadId:crypto.randomUUID(),placementContext:r}},Pt=ee(b(Na,"s_2OxiK9FAl0U")),Ua=()=>{const[t,l,a,s,r,o]=E();if(l.value||t.value){console.log("Not playing idle video while loading or initiating");return}const u=o.value;if(!u){console.error("Cannot play idle video - video element reference is null");return}console.log("Attempting to play idle video");const c=s.value,d=c&&c.connectionState==="connected";if(d&&u.srcObject instanceof MediaStream){if(u.srcObject.getVideoTracks().filter(p=>p.readyState==="live"&&!p.muted).length>0&&r.value){console.log("Active video stream with data is playing, not switching to idle");return}console.log("Switching to idle despite connection because stream is inactive")}if(u.srcObject instanceof MediaStream)try{const i=u.srcObject.getTracks();d?(console.log("Preserving WebRTC tracks while switching to idle"),i.forEach(p=>{console.log(`Track preserved: ${p.id}, kind: ${p.kind}, state: ${p.readyState}`)})):(console.log("No active connection, safely stopping all tracks"),i.forEach(p=>{console.log(`Stopping track: ${p.id}, kind: ${p.kind}, state: ${p.readyState}`),p.stop()}))}catch(i){console.warn("Error handling stream tracks:",i)}if(u.src&&u.src.includes("prs_alice.idle.mp4")&&!u.paused&&!u.ended&&u.readyState>=3){console.log("Idle video already playing correctly, no need to restart");return}u.srcObject=null,u.pause(),u.removeAttribute("srcObject"),u.currentTime=0;const g=window.location.origin+"/prs_alice.idle.mp4";console.log("Idle video path:",g);try{u.removeAttribute("src"),u.load(),u.muted=!0,u.loop=!0,u.style.display="block",u.autoplay=!0,u.playsInline=!0,u.controls=!1,u.src=g,u.load(),console.log("Video configured, attempting to play idle video");const i=()=>u.play().then(()=>(console.log("Idle video playing successfully"),r.value=!1,setTimeout(()=>{u.muted=a.value},300),!0)).catch(p=>(console.error("Error playing idle video:",p),!1));i().then(p=>{p||(console.log("Retrying with forced mute after delay"),u.muted=!0,setTimeout(()=>{i().then(h=>{h||(console.log("Final retry with video reload"),u.load(),u.muted=!0,u.autoplay=!0,u.currentTime=0,u.play().catch(x=>{console.error("All idle video play attempts failed:",x)}))})},500))})}catch(i){console.error("Exception setting up idle video:",i)}},Da=(t,l)=>{const[a,s,r,o,u]=E();console.log("Video status change called - isPlaying:",t,"stream exists:",!!l);const c=a.value||s.value;if(t&&l){const d=l.getVideoTracks(),g=d.length>0&&d.some(i=>i.readyState==="live");if(console.log(`Stream has ${d.length} video tracks, active: ${g}`),g){if(console.log("Setting active video stream with live tracks"),c){console.log("Currently initiating or loading, scheduling stream for later"),setTimeout(()=>{if(u.value){console.log("Setting delayed video stream");const i=u.value;!i.srcObject||!(i.srcObject instanceof MediaStream)||i.srcObject.getVideoTracks().length===0?(console.log("Setting stream with safe transition"),i.srcObject=l,i.muted=r.value,i.style.display="block",i.play().catch(p=>{console.error("Error playing delayed video:",p),p.name==="NotAllowedError"&&(i.muted=!0,i.play().catch(h=>console.error("Still cannot play video:",h)))})):console.log("Video already has a valid srcObject, skipping update")}},1e3);return}if(u.value)try{const i=u.value;i.src&&(i.pause(),i.removeAttribute("src"),i.load()),console.log("Setting stream directly to video element"),i.srcObject=l,i.muted=r.value,i.style.display="block";const p=i.play();p!==void 0&&p.catch(h=>{console.error("Error playing video:",h),h.name==="NotAllowedError"&&(i.muted=!0,i.play().catch(x=>console.error("Still cannot play video:",x)))})}catch(i){console.error("Error setting video stream:",i)}else console.warn("Video ref is null, cannot set stream")}else console.log("Stream has no active tracks or all tracks ended"),c?console.log("Processing in progress, keeping current video state"):(console.log("No processing in progress, switching to idle video"),o())}else c?console.log("Loading or initiating, not switching to idle video yet"):(console.log("No active stream, playing idle video"),o())},Ba=()=>{const[t]=E(),l=t.value;l&&console.log("ICE gathering state:",l.iceGatheringState)},Fa=async t=>{const[l,a,s]=E(),r=l.value;if(!t.candidate||!s.value||!a.value||!r)return;console.log("ICE candidate:",t.candidate);const{candidate:o,sdpMid:u,sdpMLineIndex:c}=t.candidate;try{await At(s.value,a.value,{candidate:o,sdpMid:u,sdpMLineIndex:c})}catch(d){console.error("Client: Failed to send ICE candidate via server:",d)}},Ha=()=>{const[t,l,a,s]=E(),r=s.value;if(!r)return;const o=r.iceConnectionState;console.log("ICE connection state:",o),o==="connected"||o==="completed"?(a.value&&(clearTimeout(a.value),a.value=null),t.value=!0,l.value=null,console.log("Connection established successfully")):(o==="failed"||o==="closed"||o==="disconnected")&&(console.error("ICE connection failed or closed"),closePC$(!1),t.value=!1,l.value="Connection failed. Please try reconnecting.")},za=()=>{const[t,l,a]=E(),s=a.value;if(!s)return;const r=s.connectionState;console.log("Peer connection state:",r),r==="connected"?(t.value=!0,l.value=null):(r==="failed"||r==="closed")&&(t.value=!1,l.value="Connection failed. Please try reconnecting.",closePC$(!1))},Va=()=>{const[t]=E(),l=t.value;l&&console.log("Signaling state:",l.signalingState)},Wa=t=>{const[l,a,s,r,o,u,c,d]=E();console.log("onTrack event fired:",t);const g=o.value;if(!t.track||!g){console.log("onTrack: Event received but no valid track or PC found.");return}console.log(`Track received: ${t.track.id}, kind: ${t.track.kind}, state: ${t.track.readyState}`),t.track.addEventListener("ended",()=>{console.log(`Track ended: ${t.track.id}, kind: ${t.track.kind}`)}),t.track.addEventListener("unmute",()=>{if(console.log(`Track unmuted: ${t.track.id}, kind: ${t.track.kind}`),t.streams&&t.streams.length>0){const i=t.streams[0];if(t.track.kind==="video"&&i.getVideoTracks().length>0)if(console.log("Video stream available after unmute"),!a.value||c.value){const p=d.value;p&&(console.log("Setting unmuted stream directly to video element"),p.srcObject=i,p.style.display="block",p.muted=s.value,p.play().catch(h=>{console.error("Error playing unmuted stream:",h),h.name==="NotAllowedError"&&(p.muted=!0,p.play().catch(x=>{console.error("Still cannot play unmuted stream:",x)}))}))}else console.log("Not setting video element yet as we are still loading or waiting for active tracks")}}),u.value&&(clearInterval(u.value),u.value=null),u.value=setInterval(async()=>{if(!g||g.connectionState!=="connected"){u.value&&clearInterval(u.value),u.value=null;return}try{const i=g.getReceivers();let p=!1,h=0;const x=i.filter(y=>y.track&&y.track.kind==="video"&&y.track.readyState==="live").map(y=>y.track);console.log(`Found ${x.length} active video tracks`),x.length>0&&(await g.getStats()).forEach(S=>{if(S.type==="inbound-rtp"&&"mediaType"in S&&S.mediaType==="video"){p=!0;const I="bytesReceived"in S?S.bytesReceived:0;h+=I;const A=I>l.value&&I>0;if(c.value!==A)if(c.value=A,A){console.log("D-ID video stream now actively receiving data, switching from idle");const P=i.filter(H=>H.track&&H.track.readyState==="live").map(H=>H.track),B=new MediaStream(P);r(!0,B)}else a.value||(console.log("D-ID video stream paused, reverting to idle"),r(!1,null));l.value=h}}),!p&&c.value&&(console.log("No active video tracks found in stats"),c.value=!1,a.value||r(!1,null))}catch(i){console.error("Error getting stats:",i)}},1e3),console.log("Track handler set up, waiting for active video data before switching from idle")},Ya=(t=!0)=>{const[l,a,s,r,o,u,c,d,g,i,p,h,x,y,S,I]=E(),A=i.value;if(!A)return;console.log("Client: Closing peer connection"),A.removeEventListener("icegatheringstatechange",c),A.removeEventListener("icecandidate",o),A.removeEventListener("iceconnectionstatechange",u),A.removeEventListener("connectionstatechange",r),A.removeEventListener("signalingstatechange",d),A.removeEventListener("track",g),x.value&&(clearInterval(x.value),x.value=null),a.value&&(clearTimeout(a.value),a.value=null);const R=I.value;if(R!=null&&R.srcObject&&R.srcObject instanceof MediaStream){console.log("Stopping tracks during PC close - this IS the right place to stop tracks");const P=R.srcObject.getTracks();console.log(`Stopping ${P.length} tracks during peer connection close`),P.forEach(B=>{console.log(`Stopping track: ${B.id}, kind: ${B.kind}, state: ${B.readyState}`),B.stop()}),R.srcObject=null}A.close(),i.value=null,l.value=!1,S.value=!1,s.value=0,console.log("Client: Peer connection closed"),t&&y.value&&h.value&&(Ct(y.value,h.value).catch(P=>{console.error("Client: Error during server close stream:",P)}),y.value="",h.value=""),setTimeout(()=>{p(),console.log("Reproduciendo video de espera después de cerrar conexión")},500)},Qa=async(t,l)=>{const[a,s,r,o,u,c,d,g]=E();g.value&&(console.warn("Closing existing peer connection before creating new one."),a(!1));try{console.log("Client: Creating Peer Connection");const i=new RTCPeerConnection({iceServers:l});i.addEventListener("icegatheringstatechange",u),i.addEventListener("icecandidate",r),i.addEventListener("iceconnectionstatechange",o),i.addEventListener("connectionstatechange",s),i.addEventListener("signalingstatechange",c),i.addEventListener("track",d),console.log("Client: Setting remote description"),await i.setRemoteDescription(t),console.log("Client: Creating answer");const p=await i.createAnswer();return console.log("Client: Setting local description"),await i.setLocalDescription(p),g.value=et(i),p}catch(i){throw console.error("Client: Error creating peer connection:",i),g.value=null,i}},Xa=async()=>{const[t,l,a,s,r,o,u,c,d,g,i]=E();if(t.value){console.log("Avatar disabled, skipping connect");return}if(!(a.value||u.value)){u.value=!0,s.value=null,l(!1);try{d(),console.log("Client: Calling serverInitConnection");const{streamId:p,offer:h,iceServers:x,sessionId:y}=await St();i.value=p,g.value=y,console.log("Client: Stream/Session IDs received:",p,y),console.log("Client: Creating peer connection with offer");const S=await o(h,x);console.log("Client: Sending SDP answer via server"),await Et(p,y,S),r.value&&clearTimeout(r.value),r.value=setTimeout(()=>{if(!a.value){console.error("Connection timeout - checking status");const I=c.value;I&&(I.iceConnectionState==="checking"||I.iceConnectionState==="connected"||I.iceConnectionState==="completed")?(console.log("Connection appears stable despite timeout - forcing connected state"),a.value=!0,s.value=null):(console.error("Connection truly timed out"),s.value="Connection timed out. Please try reconnecting.",l(!0))}},15e3),console.log("Client: Waiting for ICE connection...")}catch(p){console.error("Client: Error during connection initialization:",p),s.value=`Connection error: ${p.message||"Unknown error"}`,l(!0),a.value=!1,i.value="",g.value="",setTimeout(()=>{d(),console.log("Attempting to play idle video after connection error")},1e3)}finally{u.value=!1}}},Ga=()=>{const[t,l]=E();t.value=!t.value,l.value&&(l.value.muted=t.value),console.log(`Video ${t.value?"muted":"unmuted"}`)},Ka=()=>{const[t]=E();console.log("Manual reconnect triggered"),t()},Ja=()=>{const[t,l,a,s,r,o]=E();t.value=!t.value,t.value&&(l(!0),a.value=!1,o.value="",r.value="",s.value=null)},Za=async t=>{var H,le;const[l,a,s,r,o,u,c,d,g,i,p,h,x,y,S,I,A,R,P,B]=E();if(t.trim()){i.value=!0,o.value=null,a.push({role:"user",content:t}),d.value&&(d.value.value="");try{console.log("Client: Fetching LangChain response with chat history context");const V=a.map($=>({role:$.role,content:$.content})),W=await Rt(t,R.value,Q[u.language]||"English",V,((H=c.value)==null?void 0:H.placementContext)??null);if(a.push({role:"assistant",content:W}),(le=c.value)!=null&&le.userId&&Lt(S.value||"no-session",t,W,c.value.userId).catch($=>console.error("Client: Failed to save chat message:",$)),p.value||l.value){console.log("Video muted, skipping talk creation."),i.value=!1;return}if(!r.value||!A.value||!S.value){console.warn("Not connected, attempting to connect before talk...");try{if(await s(),await new Promise($=>setTimeout($,3e3)),!r.value||!A.value||!S.value){console.error("Connection failed after reconnect attempt, cannot create talk."),o.value="Connection failed. Cannot play response.",i.value=!1;return}console.log("Successfully reconnected, proceeding with talk creation")}catch($){console.error("Error during reconnection attempt:",$),o.value="Connection failed. Cannot play response.",i.value=!1;return}}if(!r.value||!A.value||!S.value){console.error("Still not connected, cannot create talk."),o.value="Not connected. Cannot play response.",i.value=!1;return}console.log("Client: Creating talk");const G=wt(u.language);if(await Tt(W,G,A.value,S.value),console.log("Client: Talk request sent"),x.value&&B.value){console.log("Setting up enhanced talk stream detection"),P.value=!1,g.value=0,I.value&&(clearInterval(I.value),I.value=null);const $=x.value;I.value=setInterval(async()=>{if(!$||$.connectionState!=="connected"){I.value&&(clearInterval(I.value),I.value=null);return}try{const N=$.getReceivers(),O=N.filter(M=>M.track&&M.track.kind==="video"&&M.track.readyState==="live").map(M=>M.track);if(console.log(`Found ${O.length} active video tracks`),O.length>0){const M=await $.getStats();let K=!1,F=0;M.forEach(Y=>{if(Y.type==="inbound-rtp"&&"mediaType"in Y&&Y.mediaType==="video"){if(F="bytesReceived"in Y?Y.bytesReceived:0,K=F>g.value&&F>0,K&&!P.value){console.log("Talk video stream now active with data flow"),P.value=!0;const ne=N.filter(re=>re.track&&re.track.readyState==="live").map(re=>re.track),Ee=new MediaStream(ne);h(!0,Ee)}g.value=F}}),!K&&P.value&&!i.value&&(console.log("Talk video stream has no active data flow, reverting to idle"),P.value=!1,h(!1,null))}else P.value&&!i.value&&(console.log("No active video tracks found, reverting to idle"),P.value=!1,h(!1,null))}catch(N){console.error("Error monitoring video stream:",N)}},750);const de=$.getReceivers(),ae=de.filter(N=>N.track&&N.track.kind==="video"&&N.track.readyState==="live").map(N=>N.track);setInterval(()=>{if(ae.length>0){console.log(`Initial check: Found ${ae.length} active video tracks`),ae.forEach(O=>{console.log(`Ensuring video track is enabled: ${O.id}`),O.enabled=!0});const N=de.filter(O=>O.track&&O.track.readyState==="live").map(O=>O.track);try{const O=new MediaStream(N),M=B.value;M&&(!M.srcObject||M.srcObject.getVideoTracks().length===0||M.srcObject.getVideoTracks()[0].readyState!=="live")&&(console.log("Updating video element with active stream"),M.srcObject=O,M.muted=p.value,M.style.display="block",M.play().catch(F=>{console.error("Error playing video:",F),F.name==="NotAllowedError"&&(M.muted=!0,M.play().catch(Y=>{console.error("Still cannot play video:",Y)}))}))}catch(O){console.error("Error creating media stream:",O)}}},300)}}catch(V){console.error("Client: Error during startTalk:",V),a.push({role:"assistant",content:`Error: ${V.message||"Could not process request."}`}),o.value=`Error: ${V.message||"Could not process request."}`,B.value&&y()}finally{i.value=!1}}},en=()=>{const[t,l]=E();t.value&&t.value.value.trim()&&l(t.value.value)},tn=t=>{const[l,a]=E();t.key==="Enter"&&l.value&&l.value.value.trim()&&a(l.value.value)},ln=async t=>{const[l,a,s,r]=E();s.value=!0,l.push({role:"assistant",content:`Procesando grabación de voz en ${qe(a.language)} ${Q[a.language]||"English"}...`});try{const o=await t.arrayBuffer(),u=btoa(new Uint8Array(o).reduce((d,g)=>d+String.fromCharCode(g),""));console.log("Client: Audio converted to base64, size:",u.length),console.log(`Client: Processing voice recording in ${a.language} (${Q[a.language]||"English"})`),l.length>0&&l[l.length-1].role==="assistant"&&l[l.length-1].content.startsWith("Procesando grabación de voz")&&l.pop();const c=await Mt(u,t.type,Q[a.language]||"English");c&&!c.startsWith("Error:")?(console.log(`Client: Transcription successful in ${a.language}: "${c}"`),await r(c)):(console.error(`Client: Transcription failed in ${a.language}:`,c),l.push({role:"assistant",content:`No pude procesar correctamente el audio en ${Q[a.language]||"English"}. Por favor, intenta de nuevo o escribe tu mensaje.`}))}catch(o){console.error(`Client: Error processing audio in ${a.language}:`,o),l.length>0&&l[l.length-1].role==="assistant"&&l[l.length-1].content.startsWith("Procesando grabación de voz")&&l.pop();const u=`Lo siento, hubo un problema procesando tu grabación en ${qe(a.language)} ${Q[a.language]}. ${o.message}`;l.push({role:"assistant",content:u})}finally{s.value=!1}},an=async()=>{const[t,l,a,s,r,o]=E();if(!l.value)try{const u={audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:48e3}};console.log(`Client: Starting voice recording for language: ${t.language} (${Q[t.language]||"English"})`);const c=await navigator.mediaDevices.getUserMedia(u);let d="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(d)||(d="audio/webm",console.log("Client: Opus codec not supported, using standard audio/webm"));const g=new MediaRecorder(c,{mimeType:d,audioBitsPerSecond:128e3});s.value=et(g);const i=[];g.addEventListener("dataavailable",p=>{i.push(p.data)}),g.addEventListener("stop",async()=>{const p=new Blob(i,{type:g.mimeType});console.log("Found",c.getVideoTracks().length,"active video tracks"),c.getTracks().forEach(h=>h.stop()),l.value=!1,s.value=null,o.value&&clearInterval(o.value),r.value=0,p.size>0?await a(p):console.log("Empty recording, skipping processing.")}),g.start(),l.value=!0,r.value=0,o.value&&clearInterval(o.value),o.value=setInterval(()=>{r.value++},1e3),setTimeout(()=>{g.state==="recording"&&g.stop()},3e4)}catch(u){console.error("Error starting recording:",u),l.value=!1,alert("Could not start recording. Please ensure microphone permission is granted.")}},nn=()=>{const[t,l]=E();t.value&&t.value.state==="recording"&&t.value.stop(),l.value&&(clearInterval(l.value),l.value=null)},rn=()=>{const[t,l,a]=E();t.value?a():l()},sn=()=>{var Fe,He,ze;xe(),Ne(b($t,"s_k00z89YFKEE"));const t=Pt(),l=v(""),a=v(""),s=v(!1),r=v(!1),o=v(!1),u=v(!1),c=v(!1),d=v(null),g=v(!1),i=v(0),p=v(((Fe=t.value)==null?void 0:Fe.initialThreadId)??crypto.randomUUID()),h=oe([]),x=v(!1),y=oe({userResponse:"",language:((He=t.value)==null?void 0:He.initialLanguage)??"en-US"}),S=v(),I=v(),A=v(),R=v(null),P=v(null),B=v(null),H=v(null),le=v(0),V=v(!1),W=v(null),G=b(Ua,"s_N9e0IU0A4bo",[r,o,u,R,V,S]),$=b(Da,"s_Ju0f19q15Rc",[r,o,u,G,S]),de=b(Ba,"s_aAUOe9s9Jkk",[R]),ae=b(Fa,"s_HvRDpFr97uM",[R,a,l]),N=b(Ha,"s_EF7Cga3ZMCg",[s,d,W,R]),O=b(za,"s_MPQKybcKuto",[s,d,R]),M=b(Va,"s_hlWBljykoJs",[R]),K=b(Wa,"s_WBCTWzxfig4",[le,o,u,$,R,H,V,S]),F=b(Ya,"s_Y50Opu7cRuk",[s,W,le,O,ae,N,de,M,K,R,G,a,H,l,V,S]),ne=b(Xa,"s_F0oEfzF8QA8",[c,F,s,d,W,b(Qa,"s_84iu1gesId0",[F,O,ae,N,de,M,K,R]),r,R,G,a,l]);q(w("s_sXBaPboedo4",[c,F,ne,s,W,G,H,B])),q(w("s_rueDjDgQosU",[c,F,ne,s,d,r,a,l])),q(w("s_jqWZtbrPWYE",[h,x,t])),q(w("s_YAGfxIvYiGw",[h,I]));const Ee=b(Ga,"s_ZXBOyQKfLYM",[u,S]),re=b(Ka,"s_QG1bFHMosqw",[ne]),Qt=b(Ja,"s_FyvjHwqM76g",[c,F,s,d,a,l]),Ae=b(Za,"s_ir1spm36TUU",[c,h,ne,s,d,y,t,A,le,o,u,$,R,G,a,H,l,p,V,S]),Xt=b(en,"s_SVXZb4uUvRs",[A,Ae]),Gt=b(tn,"s_6fbfSHCjrkg",[A,Ae]),Kt=b(rn,"s_dxWeK02kSMA",[g,b(an,"s_NCM2QYVvCRs",[y,g,b(ln,"s_nlB6T0j3ySQ",[h,y,o,Ae]),P,i,B]),b(nn,"s_iZrhr7O0pfk",[P,B])]);return q(w("s_iHWJbsYMLF0")),e("div",null,{class:"chat-container",style:{height:"var(--available-height, 70vh)"}},[e("div",null,{class:"video-panel"},[e("video",{ref:S},{id:"talk-video",autoplay:!0,playsInline:!0,muted:f(k=>k.value,[u],"p0.value"),class:"video-element",preload:"auto"},null,3,null),o.value&&e("div",null,{class:"video-processing-indicator"},[m(ve,null,3,"Ba_0"),e("span",null,null,"Processing...",3,null)],1,"Ba_1"),r.value&&e("div",null,{class:"video-connecting-overlay"},[m(ve,null,3,"Ba_2"),e("p",null,null,"Connecting to Avatar...",3,null)],1,"Ba_3"),e("div",null,{class:"control-panel"},[e("div",null,{class:"control-left"},e("div",null,{class:"language-icons"},ye.map(k=>e("button",{class:`lang-icon-btn ${y.language===k.value?"active":""}`,title:_(k,"label"),"aria-label":_(k,"label"),dangerouslySetInnerHTML:_(k,"flagSvg"),onClick$:w("s_zgjxndRmwSE",[y,t,k])},null,null,2,k.value)),1,null),1,null),e("div",null,{class:"control-right"},[e("label",null,{class:"flex items-center gap-2 text-xs font-medium text-gray-700 mr-3"},[e("input",null,{type:"checkbox",class:"h-4 w-4 accent-emerald-600",checked:f(k=>k.value,[c],"p0.value"),onChange$:Qt},null,3,null),e("span",null,null,f(k=>k.value?"Avatar OFF":"Avatar ON",[c],'p0.value?"Avatar OFF":"Avatar ON"'),3,null)],3,null),!s.value&&!r.value&&e("button",null,{disabled:f(k=>k.value,[c],"p0.value"),class:f(k=>`connect-button ${k.value?"opacity-50 cursor-not-allowed":""}`,[c],'`connect-button ${p0.value?"opacity-50 cursor-not-allowed":""}`'),onClick$:re},f(k=>k.value?"Avatar off":"Connect",[c],'p0.value?"Avatar off":"Connect"'),3,"Ba_4")],1,null)],1,null)],1,null),e("div",null,{class:"chat-panel"},[e("div",{ref:I},{class:"chat-messages"},[h.map((k,J)=>e("div",{class:`message-container ${k.role==="user"?"user-message":"assistant-message"}`},null,e("div",{class:`message-bubble ${k.role==="user"?"user-bubble":"assistant-bubble"}`},null,[e("div",null,{class:"message-sender"},k.role==="user"?"You":"Assistant",1,null),e("p",null,{class:"message-content"},_(k,"content"),1,null)],1,null),1,J)),o.value&&((ze=h[h.length-1])==null?void 0:ze.role)==="user"&&e("div",null,{class:"message-container assistant-message"},e("div",null,{class:"message-bubble assistant-bubble"},[e("div",null,{class:"message-sender"},"Assistant",3,null),e("div",null,{class:"typing-indicator"},[e("span",null,null,null,3,null),e("span",null,null,null,3,null),e("span",null,null,null,3,null)],3,null)],3,null),3,"Ba_5")],1,null),e("div",null,{class:"chat-input-container fixed-mobile-input"},e("div",null,{class:"chat-input-wrapper"},[e("button",null,{class:"volume-button control-btn","aria-label":f(k=>k.value?"Unmute Video":"Mute Video",[u],'p0.value?"Unmute Video":"Mute Video"'),onClick$:Ee},u.value?m(El,{class:"w-4 h-4",[n]:{class:n}},3,"Ba_6"):m(Sl,{class:"w-4 h-4",[n]:{class:n}},3,"Ba_7"),1,null),e("div",null,{class:"language-icons desktop-only"},ye.map(k=>e("button",{class:`lang-icon-btn ${y.language===k.value?"active":""}`,title:_(k,"label"),"aria-label":_(k,"label"),dangerouslySetInnerHTML:_(k,"flagSvg"),onClick$:w("s_C6PrDmqOBSo",[y,t,k])},null,null,2,k.value)),1,null),e("button",null,{disabled:f((k,J)=>k.value||J.value,[r,o],"p0.value||p1.value"),class:f(k=>`mic-button ${k.value?"recording":""}`,[g],'`mic-button ${p0.value?"recording":""}`'),"aria-label":f(k=>k.value?"Stop Recording":"Start Recording",[g],'p0.value?"Stop Recording":"Start Recording"'),onClick$:Kt},g.value?m(xl,{class:"w-4 h-4",[n]:{class:n}},3,"Ba_8"):m(fl,{class:"w-4 h-4",[n]:{class:n}},3,"Ba_9"),1,null),e("input",{ref:A},{type:"text",placeholder:f(k=>k.value?"Connecting...":"Type a message...",[r],'p0.value?"Connecting...":"Type a message..."'),disabled:f((k,J)=>k.value||J.value,[r,o],"p0.value||p1.value"),class:"chat-input",onKeyUp$:Gt},null,3,null),e("button",null,{disabled:f((k,J)=>k.value||J.value,[r,o],"p0.value||p1.value"),class:"send-button",onClick$:Xt},o.value?m(ve,{size:"small",[n]:{size:n}},3,"Ba_10"):m(vl,{class:"w-4 h-4",[n]:{class:n}},3,"Ba_11"),1,null)],1,null),1,null)],1,null)],1,"Ba_12")},on=L(b(sn,"s_MrD3ZY10mAo")),un=t=>{const l=(t.size??"medium")==="small"?"w-4 h-4 border-2":"w-5 h-5 border-[3px]";return e("div",{class:`animate-spin rounded-full ${l} border-white border-t-transparent`},{role:"status","aria-label":"loading"},null,3,"Ba_13")},ve=L(b(un,"s_0l795rBK8oI")),$t=`
@keyframes spin {
  to { transform: rotate(360deg); }
}
.animate-spin {
  animation: spin 1s linear infinite;
}

@keyframes bubble-appear {
  from { opacity: 0; transform: translateY(10px) scale(0.95); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}
.animate-bubble-appear {
  animation: bubble-appear 0.3s ease forwards;
}

.typing-indicator span {
  width: 5px;
  height: 5px;
  background-color: currentColor;
  border-radius: 50%;
  display: inline-block;
  margin: 0 1px;
  animation: typing-bounce 1.2s infinite ease-in-out;
}
.typing-indicator span:nth-child(2) { animation-delay: 0.15s; }
.typing-indicator span:nth-child(3) { animation-delay: 0.3s; }

@keyframes typing-bounce {
  0%, 80%, 100% { transform: scale(0); }
  40% { transform: scale(1.0); }
}

@keyframes pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(1.05); }
}
.animate-pulse {
    animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes fade-in {
  from { opacity: 0; transform: translateY(5px); }
  to { opacity: 1; transform: translateY(0); }
}
.animate-fade-in {
    animation: fade-in 0.3s ease-out forwards;
}

/* Custom scrollbar (optional) */
/* Ensure the app takes exactly the viewport size */
html, body {
  margin: 0;
  padding: 0;
  height: 100vh;
  width: 100vw;
}

/* Estilos CSS para el nuevo diseño limpio y minimalista */
/* Base Styles */
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  overflow: hidden;
  font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  -webkit-font-smoothing: antialiased;
}

/* Main Container */
.chat-container {
  display: flex;
  flex-direction: column;
  width: 100%;
  background-color: #f8f9fa;
  overflow: hidden;
}

/* Video Panel */
.video-panel {
  width: 100%;
  position: relative;
  height: var(--video-height, 40vh);
  background-color: #000;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.video-element {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.control-panel {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 10px;
  background-color: rgba(255, 255, 255, 0.9);
}

.control-left, .control-right {
  display: flex;
  align-items: center;
}

/* Adjust language icons in control panel for mobile */
.control-left .language-icons {
  display: flex;
  gap: 4px;
}

.volume-button {
  width: 30px;
  height: 30px;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 50%;
  background-color: #eaeaea;
  border: none;
  margin-right: 10px;
  cursor: pointer;
}

.language-selector {
  height: 30px;
  padding: 0 10px;
  border-radius: 4px;
  border: 1px solid #e0e0e0;
  background-color: white;
  font-size: 14px;
}

.connect-button {
  padding: 6px 16px;
  background-color: #0cd15b;
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 14px;
  cursor: pointer;
}

/* Chat Panel */
.chat-panel {
  flex-grow: 1;
  height: var(--chat-height, 50vh);
  background-color: white;
  display: flex;
  flex-direction: column;
}

.chat-header {
  padding: 12px 16px;
  background-color: #f1f1f4;
  border-bottom: 1px solid #e0e0e0;
}

.chat-header-info {
  display: flex;
  flex-direction: column;
}

.chat-title {
  font-weight: 500;
  color: #333;
  font-size: 15px;
}

.chat-subtitle {
  font-size: 12px;
  color: #666;
  margin-top: 3px;
}

.chat-messages {
  flex-grow: 1;
  overflow-y: auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.message-container {
  display: flex;
}

.user-message {
  justify-content: flex-end;
}

.assistant-message {
  justify-content: flex-start;
}

.message-bubble {
  max-width: 80%;
  padding: 10px 14px;
  border-radius: 18px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.1);
  animation: bubble-appear 0.2s ease-out;
}

.user-bubble {
  background-color: #1a85ff;
  color: white;
  border-bottom-right-radius: 4px;
}

.assistant-bubble {
  background-color: #f1f1f4;
  color: #333;
  border-bottom-left-radius: 4px;
}

.message-sender {
  font-size: 11px;
  margin-bottom: 4px;
  opacity: 0.8;
  font-weight: 500;
}

.message-content {
  font-size: 14px;
  line-height: 1.4;
  white-space: pre-wrap;
  word-break: break-word;
}

/* Input Area */
.chat-input-container {
  padding: 12px 16px;
  border-top: 1px solid #e0e0e0;
}

/* Fixed Mobile Input */
.fixed-mobile-input {
  position: relative;
}

/* Fixed position for mobile */
@media (max-width: 767px) {
  .fixed-mobile-input {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: #f8f9fa;
    padding: 10px 16px;
    z-index: 20;
    border-top: 1px solid #e0e0e0;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
  }
  
  /* Add padding at the bottom of chat messages to prevent overlap with fixed input */
  .chat-messages {
    padding-bottom: 70px !important;
  }
}

.chat-input-wrapper {
  display: flex;
  align-items: center;
  background-color: white;
  width: 100%;
  border-radius: 24px;
  border: 1px solid #e0e0e0;
  padding: 0 6px;
  height: 42px;
}

.control-btn {
  width: 32px;
  height: 32px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: none;
  border: none;
  color: #666;
  cursor: pointer;
}

.mic-button {
  width: 32px;
  height: 32px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: none;
  border: none;
  color: #666;
  cursor: pointer;
}

.language-icons {
  display: flex;
  gap: 2px;
  margin: 0 2px;
}

/* This space intentionally left blank - removing obsolete CSS */

.lang-icon-btn {
  width: 36px;
  height: 36px;
  border: none;
  background: #f0f0f0;
  border-radius: 4px;
  cursor: pointer;
  padding: 2px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  transition: transform 0.2s ease;
}

/* Control panel language icons should be slightly smaller */
.control-left .lang-icon-btn {
  width: 34px;
  height: 24px;
  border-radius: 3px;
}

.lang-icon-btn:hover {
  transform: scale(1.05);
}

.lang-icon-btn.active {
  box-shadow: 0 0 0 2px #1a85ff, 0 0 0 4px rgba(26, 133, 255, 0.3);
}

/* SVG flag styling */
.lang-icon-btn svg {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.mic-button.recording {
  color: #f44336;
  animation: pulse 1.5s infinite;
}

.chat-input {
  flex-grow: 1;
  height: 100%;
  border: none;
  padding: 0 8px;
  font-size: 14px;
}

.chat-input:focus {
  outline: none;
}

.send-button {
  min-width: 32px;
  width: 32px;
  height: 32px;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #1a85ff;
  color: white;
  border: none;
  border-radius: 50%;
  cursor: pointer;
}

/* Loading and Status Indicators */
.typing-indicator {
  display: flex;
  gap: 4px;
  padding: 4px 0;
}

.typing-indicator span {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #888;
  animation: typing 1.4s infinite both;
}

.typing-indicator span:nth-child(2) {
  animation-delay: 0.2s;
}

.typing-indicator span:nth-child(3) {
  animation-delay: 0.4s;
}

.video-processing-indicator {
  position: absolute;
  right: 10px;
  bottom: 60px;
  background-color: rgba(0,0,0,0.7);
  color: white;
  padding: 6px 12px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
}

.video-connecting-overlay {
  position: absolute;
  inset: 0;
  background-color: rgba(0,0,0,0.7);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: white;
  gap: 10px;
}

/* Animations */
@keyframes bubble-appear {
  from { opacity: 0; transform: translateY(5px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: 0.6; }
  100% { opacity: 1; }
}

@keyframes typing {
  0% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
  100% { transform: translateY(0); }
}
/* Responsive Adjustments */
@media (min-width: 768px) {
  .chat-container {
    flex-direction: row;
  }
  
  .video-panel {
    width: 40%;
    height: var(--available-height, 90vh);
  }
  
  .chat-panel {
    width: 60%;
    height: var(--available-height, 100vh);
  }
  
  .control-panel {
    height: 40px;
  }
  
  .chat-input-wrapper {
    max-width: 90%;
    margin: 0 auto;
  }
  
  /* Reset fixed position for desktop */
  .fixed-mobile-input {
    position: relative;
    box-shadow: none;
  }
  
  /* Show language icons in input area only on desktop */
  .desktop-only {
    display: flex;
  }
}

/* Hide on mobile */
.desktop-only {
  display: none;
}

/* Hide scrollbars but maintain functionality */
.chat-messages::-webkit-scrollbar {
  width: 4px;
}

.chat-messages::-webkit-scrollbar-track {
  background: transparent;
}

.chat-messages::-webkit-scrollbar-thumb {
  background: rgba(0,0,0,0.1);
  border-radius: 10px;
  overflow: hidden;
}

/* Hide scrollbars on main layout */
.h-screen.w-screen.max-w-full {
  overflow: hidden;
}

.overflow-y-auto::-webkit-scrollbar {
  width: 3px;
}
.overflow-y-auto::-webkit-scrollbar-track {
  background: rgba(0,0,0,0.05);
  border-radius: 10px;
}
.overflow-y-auto::-webkit-scrollbar-thumb {
  background: rgba(0,0,0,0.2);
  border-radius: 10px;
}
.overflow-y-auto::-webkit-scrollbar-thumb:hover {
  background: rgba(0,0,0,0.3);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .overflow-y-auto::-webkit-scrollbar {
    width: 3px;
  }
}
`,cn=Object.freeze(Object.defineProperty({__proto__:null,STYLES:$t,Spinner:ve,_auto_DID_API_URL:ue,_auto_MAX_CONTEXT_MESSAGES:Se,_auto_fetchWithRetries:X,_auto_getAuthHeader:ce,_auto_getLanguageCode:qe,_auto_getVoiceSettings:wt,_auto_languageMap:Q,_auto_languages:ye,_auto_processTextForVoice:kt,_auto_sanitizeForPrompt:_t,_auto_serverCloseStream:Ct,_auto_serverCreateTalk:Tt,_auto_serverFetchLangChainResponse:Rt,_auto_serverInitConnection:St,_auto_serverProcessAudio:Mt,_auto_serverSaveChatMessage:Lt,_auto_serverSendIceCandidate:At,_auto_serverSendSdpAnswer:Et,_auto_serverUpdateUserLang:qa,_auto_trimChatHistory:It,default:on,useInitialData:Pt},Symbol.toStringTag,{value:"Module"})),dn=()=>e("div",null,{class:"min-h-screen bg-gray-50 dark:bg-gray-900"},[e("section",null,{class:"py-12 px-4 sm:px-6 text-center bg-gradient-to-r from-teal-500/10 to-green-500/10 dark:from-teal-900/30 dark:to-green-900/30"},e("div",null,{class:"max-w-3xl mx-auto"},[e("h1",null,{class:"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white"},"Our Language Courses",3,null),e("p",null,{class:"mt-4 text-lg text-gray-600 dark:text-gray-300"},"Discover a wide range of language courses designed to help you achieve fluency through personalized learning.",3,null)],3,null),3,null),e("section",null,{class:"py-6 px-4 sm:px-6 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"},e("div",null,{class:"max-w-7xl mx-auto flex justify-center"},e("div",null,{class:"inline-flex rounded-md shadow-sm",role:"group"},[e("button",null,{class:"px-4 py-2 text-sm font-medium text-teal-700 bg-teal-100 rounded-l-lg dark:bg-teal-900 dark:text-teal-300"},"All Courses",3,null),e("button",null,{class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border-t border-b border-r border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600"},"Beginner",3,null),e("button",null,{class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border-t border-b border-r border-gray-200 rounded-r-lg dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600"},"Advanced",3,null)],3,null),3,null),3,null),e("section",null,{class:"py-12 px-4 sm:px-6"},e("div",null,{class:"max-w-7xl mx-auto"},e("div",null,{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},[{id:1,title:"English for Beginners",level:"A1 - Beginner",duration:"8 weeks",description:"Start your English journey with this comprehensive beginner course. Learn essential vocabulary, basic grammar, and everyday phrases.",image:"https://images.unsplash.com/photo-1546410531-bb4caa6b424d?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",instructor:"Sarah Johnson"},{id:2,title:"Intermediate Spanish",level:"B1 - Intermediate",duration:"10 weeks",description:"Take your Spanish to the next level with our intermediate course focused on conversation, advanced grammar, and cultural context.",image:"https://images.unsplash.com/photo-1551504734-5ee1c4a1479b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",instructor:"Carlos Mendez"},{id:3,title:"Business French",level:"B2 - Upper Intermediate",duration:"6 weeks",description:"Specialized course for professionals looking to use French in business contexts. Focus on formal communication and industry vocabulary.",image:"https://images.unsplash.com/photo-1549737221-bef65e2604a6?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",instructor:"Marie Dupont"},{id:4,title:"Conversational Italian",level:"A2 - Elementary",duration:"8 weeks",description:"Practice speaking Italian in everyday situations. Learn practical phrases, improve pronunciation, and gain confidence in real conversations.",image:"https://images.unsplash.com/photo-1523906834658-6e24ef2386f9?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",instructor:"Marco Bianchi"}].map(l=>e("div",null,{class:"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden flex flex-col h-full transform transition-transform hover:scale-105 hover:shadow-lg"},[e("div",null,{class:"h-48 overflow-hidden"},e("img",{src:_(l,"image"),alt:_(l,"title")},{class:"w-full h-full object-cover"},null,3,null),1,null),e("div",null,{class:"p-6 flex-grow"},[e("div",null,{class:"flex justify-between items-start mb-2"},[e("span",null,{class:"px-2.5 py-0.5 bg-teal-100 dark:bg-teal-900 text-teal-800 dark:text-teal-300 text-xs font-medium rounded"},_(l,"level"),1,null),e("span",null,{class:"flex items-center text-xs text-gray-500 dark:text-gray-400"},[m(pl,{class:"h-3.5 w-3.5 mr-1",[n]:{class:n}},3,"DL_0"),_(l,"duration")],1,null)],1,null),e("h3",null,{class:"text-lg font-bold text-gray-900 dark:text-white mb-2"},_(l,"title"),1,null),e("p",null,{class:"text-gray-600 dark:text-gray-300 text-sm mb-4"},_(l,"description"),1,null),e("div",null,{class:"flex items-center text-sm text-gray-500 dark:text-gray-400 mb-4"},[m(Z,{class:"h-4 w-4 mr-1",[n]:{class:n}},3,"DL_1"),"Instructor: ",_(l,"instructor")],1,null)],1,null),e("div",null,{class:"px-6 pb-4"},e("button",null,{class:"w-full py-2 px-4 bg-teal-600 hover:bg-teal-700 text-white font-medium rounded-lg shadow transition-colors flex items-center justify-center"},["Enroll Now",m(De,{class:"ml-2 h-4 w-4",[n]:{class:n}},3,"DL_2")],1,null),1,null)],1,l.id)),1,null),1,null),1,null),e("section",null,{class:"py-12 px-4 sm:px-6 bg-gray-100 dark:bg-gray-800"},e("div",null,{class:"max-w-7xl mx-auto text-center"},[e("h2",null,{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-8"},"Why Learn With Us?",3,null),e("div",null,{class:"grid grid-cols-1 md:grid-cols-3 gap-6"},[e("div",null,{class:"p-6 bg-white dark:bg-gray-700 rounded-xl shadow"},[e("div",null,{class:"w-12 h-12 mx-auto bg-teal-100 dark:bg-teal-900 rounded-full flex items-center justify-center mb-4"},m(he,{class:"h-6 w-6 text-teal-600 dark:text-teal-400",[n]:{class:n}},3,"DL_3"),1,null),e("h3",null,{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Expert-Designed Curriculum",3,null),e("p",null,{class:"text-gray-600 dark:text-gray-300"},"Our courses are crafted by language experts to ensure effective learning and retention.",3,null)],1,null),e("div",null,{class:"p-6 bg-white dark:bg-gray-700 rounded-xl shadow"},[e("div",null,{class:"w-12 h-12 mx-auto bg-teal-100 dark:bg-teal-900 rounded-full flex items-center justify-center mb-4"},m(be,{class:"h-6 w-6 text-teal-600 dark:text-teal-400",[n]:{class:n}},3,"DL_4"),1,null),e("h3",null,{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Community Practice",3,null),e("p",null,{class:"text-gray-600 dark:text-gray-300"},"Join conversation groups with fellow learners to practice in a supportive environment.",3,null)],1,null),e("div",null,{class:"p-6 bg-white dark:bg-gray-700 rounded-xl shadow"},[e("div",null,{class:"w-12 h-12 mx-auto bg-teal-100 dark:bg-teal-900 rounded-full flex items-center justify-center mb-4"},m(Z,{class:"h-6 w-6 text-teal-600 dark:text-teal-400",[n]:{class:n}},3,"DL_5"),1,null),e("h3",null,{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Personalized Learning",3,null),e("p",null,{class:"text-gray-600 dark:text-gray-300"},"Adaptive lessons that adjust to your pace and learning style for maximum progress.",3,null)],1,null)],1,null)],1,null),1,null),e("section",null,{class:"py-12 px-4 sm:px-6 bg-gradient-to-r from-teal-600 to-green-600 dark:from-teal-800 dark:to-green-800"},e("div",null,{class:"max-w-3xl mx-auto text-center"},[e("h2",null,{class:"text-3xl font-bold text-white mb-4"},"Ready to Start Your Language Journey?",3,null),e("p",null,{class:"text-teal-100 mb-8"},"Join thousands of students already improving their language skills.",3,null),e("div",null,{class:"flex flex-wrap justify-center gap-4"},[m(T,{href:"/auth",class:"px-6 py-3 bg-white text-teal-600 font-medium rounded-lg shadow-lg hover:bg-teal-50 transition-colors",children:"Sign Up Now",[n]:{href:n,class:n}},3,"DL_6"),m(T,{href:"/chat",class:"px-6 py-3 bg-teal-700 text-white font-medium rounded-lg shadow-lg hover:bg-teal-800 transition-colors",children:"Try Free Chat Practice",[n]:{href:n,class:n}},3,"DL_7")],1,null)],1,null),1,null)],1,"DL_8"),gn=L(b(dn,"s_z0URBq6vKT0")),pn={title:"Courses - Move On Academy",meta:[{name:"description",content:"Browse our wide range of language courses for all levels. From beginner to advanced, find the perfect course to enhance your language skills."}]},mn=Object.freeze(Object.defineProperty({__proto__:null,default:gn,head:pn},Symbol.toStringTag,{value:"Module"})),hn=async t=>{const l=ie(t);if(!l)throw t.redirect(302,"/auth");const a=j(t),s=await a.execute({sql:"SELECT email FROM users WHERE id = ? LIMIT 1",args:[l]});if(s.rows.length===0)throw t.redirect(302,"/auth");const r=s.rows[0].email??null;if(!it(r))throw t.redirect(302,"/");const u=(await a.execute(`
    SELECT
      p.id,
      p.full_name,
      p.email,
      p.phone,
      p.country,
      p.date_of_birth,
      p.auto_score,
      p.max_auto_score,
      p.level,
      p.status,
      p.created_at,
      p.answers_json,
      p.feedback_summary,
      u.email AS account_email
    FROM placement_test_attempts p
    LEFT JOIN users u ON u.id = p.user_id
    ORDER BY p.created_at DESC
  `)).rows.map(i=>{let p={};try{p=i.answers_json?JSON.parse(i.answers_json):{}}catch(h){console.warn("[Dashboard] Failed to parse answers_json for attempt",i.id,h)}return{id:i.id,full_name:i.full_name??null,email:i.email??null,phone:i.phone??null,country:i.country??null,date_of_birth:i.date_of_birth??null,auto_score:Number(i.auto_score??0),max_auto_score:Number(i.max_auto_score??0),level:i.level??"Pendiente",status:i.status??"submitted",created_at:i.created_at??new Date().toISOString(),account_email:i.account_email??null,feedback_summary:i.feedback_summary??null,answers:p}}),c=u.length,d=u.reduce((i,p)=>p.max_auto_score?i+p.auto_score/p.max_auto_score:i,0),g=u.reduce((i,p)=>{const h=p.level??"Pendiente";return i[h]=(i[h]??0)+1,i},{});return{attempts:u,stats:{total:c,averagePercent:c>0?Math.round(d/c*100*10)/10:0,byLevel:g}}},Ot=ee(b(hn,"s_QkjOyUarfSs")),bn=()=>{const t=Ot(),l=Array.from(new Set(t.value.attempts.map(i=>i.level??"Pendiente"))).sort(),a=oe({level:"all",search:"",page:1,pageSize:10}),s=Object.entries(t.value.stats.byLevel).sort((i,p)=>p[1]-i[1]),r=a.search.trim().toLowerCase(),o=t.value.attempts.filter(i=>{const p=a.level==="all"||(i.level??"Pendiente")===a.level,h=!r||[i.full_name??"",i.email??"",i.account_email??"",i.country??"",i.level??""].join(" ").toLowerCase().includes(r);return p&&h}),u=Math.max(1,Math.ceil(o.length/a.pageSize)),c=Math.min(a.page,u),d=(c-1)*a.pageSize,g=o.slice(d,d+a.pageSize);return e("div",null,{class:"bg-gray-50 dark:bg-gray-900 min-h-screen py-10"},e("div",null,{class:"container mx-auto px-4"},[e("header",null,{class:"mb-8"},[e("p",null,{class:"text-sm text-teal-600 uppercase tracking-widest font-semibold"},"Internal",3,null),e("h1",null,{class:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2"},"Placement Dashboard",3,null),e("p",null,{class:"text-gray-600 dark:text-gray-300 max-w-3xl"},"Revisa los intentos de prueba técnica, analiza niveles y da seguimiento a cada estudiante.",3,null)],3,null),e("section",null,{class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"},[e("div",null,{class:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-5 shadow-sm"},[e("p",null,{class:"text-sm text-gray-500"},"Intentos totales",3,null),e("p",null,{class:"text-3xl font-bold text-gray-900 dark:text-white mt-1"},f(i=>i.value.stats.total,[t],"p0.value.stats.total"),3,null)],3,null),e("div",null,{class:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-5 shadow-sm"},[e("p",null,{class:"text-sm text-gray-500"},"Promedio (porcentaje)",3,null),e("p",null,{class:"text-3xl font-bold text-gray-900 dark:text-white mt-1"},[f(i=>i.value.stats.averagePercent,[t],"p0.value.stats.averagePercent"),"%"],3,null)],3,null),e("div",null,{class:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-5 shadow-sm"},[e("p",null,{class:"text-sm text-gray-500"},"Distribución por nivel",3,null),e("div",null,{class:"mt-2 flex flex-wrap gap-2"},[s.map(([i,p])=>e("span",null,{class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-teal-50 text-teal-700 dark:bg-teal-900/40 dark:text-teal-200"},[i,": ",p],1,i)),s.length===0&&e("span",null,{class:"text-sm text-gray-500"},"Sin datos",3,"Qw_0")],1,null)],1,null)],1,null),e("section",null,{class:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 shadow-sm"},[e("div",null,{class:"px-6 py-4 border-b border-gray-100 dark:border-gray-700 space-y-4"},[e("div",null,{class:"flex items-center justify-between"},[e("h2",null,{class:"text-xl font-semibold text-gray-900 dark:text-white"},"Intentos recientes",3,null),e("span",null,{class:"text-sm text-gray-500"},"Actualizado automáticamente",3,null)],3,null),e("div",null,{class:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between"},[e("div",null,{class:"flex gap-3 flex-1"},[e("div",null,{class:"flex-1"},[e("label",null,{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400"},"Buscar",3,null),e("input",null,{type:"text",class:"mt-1 w-full rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",placeholder:"Nombre, correo, país...",value:f(i=>i.search,[a],"p0.search"),onInput$:w("s_HmooeRS1jx0",[a])},null,3,null)],3,null),e("div",null,null,[e("label",null,{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400"},"Nivel",3,null),e("select",null,{class:"mt-1 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",value:f(i=>i.level,[a],"p0.level"),onChange$:w("s_hr09YSv3smc",[a])},[e("option",null,{value:"all"},"Todos",3,null),l.map(i=>e("option",{value:i},null,i,1,i))],1,null)],1,null)],1,null),e("div",null,{class:"flex items-center gap-3"},[e("div",null,null,[e("label",null,{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400"},"Por página",3,null),e("select",null,{class:"mt-1 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",value:f(i=>i.pageSize.toString(),[a],"p0.pageSize.toString()"),onChange$:w("s_maM2DrroiFA",[a])},[10,25,50].map(i=>e("option",{value:String(i)},null,i.toString(),1,i)),1,null)],1,null),e("div",null,{class:"flex items-center gap-2"},[e("button",{disabled:c<=1,onClick$:w("s_7Op6y6SgFtg",[a,c])},{class:"px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 text-sm disabled:opacity-50"},"Anterior",2,null),e("button",{disabled:c>=u,onClick$:w("s_FTHQyF3xJMw",[a,c,u])},{class:"px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 text-sm disabled:opacity-50"},"Siguiente",2,null)],1,null)],1,null)],1,null),e("p",null,{class:"text-xs text-gray-500"},["Mostrando"," ",o.length===0?"0":`${d+1}-${Math.min(d+g.length,o.length)}`," ","de ",_(o,"length")," resultados"],1,null)],1,null),e("div",null,{class:"overflow-x-auto"},e("table",null,{class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 text-sm"},[e("thead",null,{class:"bg-gray-50 dark:bg-gray-900/40"},e("tr",null,null,[e("th",null,{class:"px-6 py-3 text-left font-semibold text-gray-600 dark:text-gray-300"},"Estudiante",3,null),e("th",null,{class:"px-6 py-3 text-left font-semibold text-gray-600 dark:text-gray-300"},"Contacto",3,null),e("th",null,{class:"px-6 py-3 text-left font-semibold text-gray-600 dark:text-gray-300"},"Score",3,null),e("th",null,{class:"px-6 py-3 text-left font-semibold text-gray-600 dark:text-gray-300"},"Nivel",3,null),e("th",null,{class:"px-6 py-3 text-left font-semibold text-gray-600 dark:text-gray-300"},"Estado",3,null),e("th",null,{class:"px-6 py-3 text-left font-semibold text-gray-600 dark:text-gray-300"},"Feedback IA",3,null),e("th",null,{class:"px-6 py-3 text-left font-semibold text-gray-600 dark:text-gray-300"},"Cuenta",3,null),e("th",null,{class:"px-6 py-3 text-left font-semibold text-gray-600 dark:text-gray-300"},"Fecha",3,null)],3,null),3,null),e("tbody",null,{class:"divide-y divide-gray-100 dark:divide-gray-700"},[g.map(i=>e("tr",null,{class:"hover:bg-gray-50 dark:hover:bg-gray-900/30"},[e("td",null,{class:"px-6 py-4"},[e("p",null,{class:"font-semibold text-gray-900 dark:text-white"},i.full_name||"Sin nombre",1,null),e("p",null,{class:"text-xs text-gray-500"},["ID #",_(i,"id")],1,null)],1,null),e("td",null,{class:"px-6 py-4 text-gray-700 dark:text-gray-200"},[e("p",null,null,i.email||"—",1,null),e("p",null,{class:"text-xs text-gray-500"},i.phone||i.country||"—",1,null)],1,null),e("td",null,{class:"px-6 py-4 text-gray-900 dark:text-gray-100 font-semibold"},[_(i,"auto_score"),"/",_(i,"max_auto_score")],1,null),e("td",null,{class:"px-6 py-4"},e("span",null,{class:"inline-flex px-3 py-1 rounded-full text-xs font-semibold bg-amber-50 text-amber-700 dark:bg-amber-900/30 dark:text-amber-200"},_(i,"level"),1,null),1,null),e("td",null,{class:"px-6 py-4 text-gray-700 dark:text-gray-200"},_(i,"status"),1,null),e("td",null,{class:"px-6 py-4 text-gray-600 dark:text-gray-300"},e("p",{title:i.feedback_summary??"Sin feedback"},{class:"text-xs max-w-xs break-words"},i.feedback_summary||"—",1,null),1,null),e("td",null,{class:"px-6 py-4 text-gray-700 dark:text-gray-200"},i.account_email||"Cuenta eliminada",1,null),e("td",null,{class:"px-6 py-4 text-gray-600 dark:text-gray-300"},new Date(i.created_at).toLocaleString(),1,null)],1,i.id)),g.length===0&&e("tr",null,null,e("td",null,{colSpan:8,class:"px-6 py-10 text-center text-gray-500"},"Aún no hay intentos registrados.",3,null),3,"Qw_1")],1,null)],1,null),1,null)],1,null)],1,null),1,"Qw_2")},yn=L(b(bn,"s_M3Bhr6hR9hY")),fn={title:"Placement Dashboard | MOA Academy",meta:[{name:"robots",content:"noindex"}]},xn=Object.freeze(Object.defineProperty({__proto__:null,default:yn,head:fn,useDashboardData:Ot},Symbol.toStringTag,{value:"Module"})),vn=t=>e("svg",null,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:f(l=>l.class||"w-5 h-5",[t],'p0.class||"w-5 h-5"')},[e("polyline",null,{points:"16 18 22 12 16 6"},null,3,null),e("polyline",null,{points:"8 6 2 12 8 18"},null,3,null)],3,"Hi_0"),we=L(b(vn,"s_8P7p3IpX6Fs")),wn=t=>e("svg",null,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:f(l=>l.class||"w-5 h-5",[t],'p0.class||"w-5 h-5"')},[e("rect",null,{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},null,3,null),e("line",null,{x1:"1",y1:"10",x2:"23",y2:"10"},null,3,null)],3,"Hi_3"),qt=L(b(wn,"s_TB03ynRd0Wg")),kn=t=>e("svg",null,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:f(l=>l.class||"w-5 h-5",[t],'p0.class||"w-5 h-5"')},[e("rect",null,{x:"4",y:"2",width:"16",height:"20",rx:"2",ry:"2"},null,3,null),e("line",null,{x1:"9",y1:"6",x2:"15",y2:"6"},null,3,null),e("line",null,{x1:"9",y1:"10",x2:"15",y2:"10"},null,3,null),e("line",null,{x1:"9",y1:"14",x2:"15",y2:"14"},null,3,null)],3,"Hi_4"),jt=L(b(kn,"s_2vNnYhGWGdw")),_n=t=>e("svg",null,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:f(l=>l.class||"w-5 h-5",[t],'p0.class||"w-5 h-5"')},[e("rect",null,{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},null,3,null),e("path",null,{d:"M7 11V7a5 5 0 0 1 10 0v4"},null,3,null)],3,"Hi_5"),Nt=L(b(_n,"s_z2RZqqZkmR4")),Sn=t=>e("svg",null,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:f(l=>l.class||"w-5 h-5",[t],'p0.class||"w-5 h-5"')},[e("ellipse",null,{cx:"12",cy:"5",rx:"9",ry:"3"},null,3,null),e("path",null,{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},null,3,null),e("path",null,{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},null,3,null)],3,"Hi_6"),Ut=L(b(Sn,"s_0s3q0rsbMcs")),En=`
    .code-block {
      @apply bg-gray-50 dark:bg-gray-800 p-4 rounded-xl mb-6 overflow-x-auto font-mono text-sm;
      position: relative;
    }
    
    .copy-button {
      @apply absolute top-2 right-2 p-2 bg-indigo-500 text-white rounded opacity-0 transition-opacity;
    }
    
    .code-block:hover .copy-button {
      @apply opacity-100;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
      animation: fadeIn 0.5s ease-in-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .tab {
      @apply px-4 py-2 text-gray-600 dark:text-gray-400 cursor-pointer transition-colors;
    }
    
    .tab.active {
      @apply text-indigo-600 dark:text-indigo-400 border-b-2 border-indigo-600 dark:border-indigo-400 font-medium;
    }
    
    .section {
      @apply opacity-0;
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
      transform: translateY(20px);
    }
    
    .section.visible {
      @apply opacity-100;
      transform: translateY(0);
    }
    
    .toc-link {
      @apply block py-2 px-3 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded transition-colors;
    }
    
    .diagram-box {
      @apply border border-indigo-100 dark:border-indigo-900 rounded-xl p-4 relative;
      min-height: 100px;
    }
    
    .diagram-arrow {
      @apply absolute border-t-2 border-indigo-300 dark:border-indigo-700;
      width: 40px;
      transform: translateY(-50%);
    }
    
    .diagram-arrow::after {
      content: '';
      @apply absolute h-3 w-3 border-t-2 border-r-2 border-indigo-300 dark:border-indigo-700 transform rotate-45;
      right: -1px;
      top: -7px;
    }
    
    .snippet-tag {
      @apply inline-flex text-xs font-medium px-2 py-1 rounded-md;
    }
    
    .animated-bg {
      background-size: 400% 400%;
      animation: gradient 15s ease infinite;
    }
    
    @keyframes gradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .toc-link.active {
      @apply bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300 font-medium;
    }
  `,An=t=>{const[l]=E();l.value=t},Tn=t=>{const[l]=E();l.value=t;const a=document.getElementById(t);a&&a.scrollIntoView({behavior:"smooth",block:"start"})},Cn=()=>{Ne(b(En,"s_uYBjZvZkxow"));const t=v("architecture"),l=v("arch-overview"),a=v(),s=v(),r=v(),o=b(An,"s_85Fk8Ri0Dl8",[t]),u=b(Tn,"s_Yh9AXSXas0Q",[l]);return q(w("s_JwNEufPc0dE")),e("div",null,{class:"flex flex-col min-h-screen bg-white dark:bg-gray-900"},[e("div",null,{class:"bg-gradient-to-r from-indigo-600 to-blue-700 text-white py-16 px-4"},e("div",null,{class:"max-w-5xl mx-auto"},[e("h1",null,{class:"text-4xl md:text-5xl font-extrabold mb-4"},"Documentación Técnica",3,null),e("p",null,{class:"text-xl text-indigo-100 max-w-3xl"},"Guía completa de la plataforma TokenEstate para desarrolladores, arquitectos y usuarios técnicos",3,null)],3,null),3,null),e("div",null,{class:"max-w-6xl mx-auto px-4 py-12 flex flex-col md:flex-row gap-8"},[e("div",null,{class:"md:w-64 flex-shrink-0"},e("div",null,{class:"sticky top-8"},[e("div",null,{class:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl mb-6"},[e("h3",null,{class:"font-semibold text-lg mb-3 text-gray-800 dark:text-gray-200"},"Contenido",3,null),e("nav",null,{class:"space-y-1"},[e("a",null,{href:"#arch-overview",class:f(c=>`toc-link ${c.value==="arch-overview"?"active":""}`,[l],'`toc-link ${p0.value==="arch-overview"?"active":""}`'),onClick$:w("s_0Sd7oecTTOI",[u])},"Arquitectura",3,null),e("a",null,{href:"#system-layers",class:f(c=>`toc-link ${c.value==="system-layers"?"active":""}`,[l],'`toc-link ${p0.value==="system-layers"?"active":""}`'),onClick$:w("s_F2UsykvfDcU",[u])},"Capas del Sistema",3,null),e("a",null,{href:"#smart-contracts",class:f(c=>`toc-link ${c.value==="smart-contracts"?"active":""}`,[l],'`toc-link ${p0.value==="smart-contracts"?"active":""}`'),onClick$:w("s_KEqv48ErNIg",[u])},"Contratos Inteligentes",3,null),e("a",null,{href:"#security",class:f(c=>`toc-link ${c.value==="security"?"active":""}`,[l],'`toc-link ${p0.value==="security"?"active":""}`'),onClick$:w("s_SF0LrlyNP5s",[u])},"Seguridad y Auditoría",3,null),e("a",null,{href:"#timeline",class:f(c=>`toc-link ${c.value==="timeline"?"active":""}`,[l],'`toc-link ${p0.value==="timeline"?"active":""}`'),onClick$:w("s_bDXXA45JnUE",[u])},"Cronograma",3,null)],3,null)],3,null),e("div",null,{class:"p-4 bg-indigo-50 dark:bg-indigo-900/30 rounded-xl"},[e("h3",null,{class:"font-semibold text-lg mb-3 text-indigo-800 dark:text-indigo-300"},"Recursos",3,null),e("ul",null,{class:"space-y-2 text-sm"},[e("li",null,null,e("a",null,{href:"#",class:"text-indigo-600 dark:text-indigo-400 hover:underline flex items-center"},[e("span",null,{class:"mr-2"},"📄",3,null)," Whitepaper técnico"],3,null),3,null),e("li",null,null,e("a",null,{href:"#",class:"text-indigo-600 dark:text-indigo-400 hover:underline flex items-center"},[e("span",null,{class:"mr-2"},"💻",3,null)," Repositorio de código"],3,null),3,null),e("li",null,null,e("a",null,{href:"#",class:"text-indigo-600 dark:text-indigo-400 hover:underline flex items-center"},[e("span",null,{class:"mr-2"},"🧪",3,null)," Testnet Demo"],3,null),3,null),e("li",null,null,e("a",null,{href:"#",class:"text-indigo-600 dark:text-indigo-400 hover:underline flex items-center"},[e("span",null,{class:"mr-2"},"💬",3,null)," Canal de Discord"],3,null),3,null)],3,null)],3,null)],3,null),3,null),e("div",null,{class:"flex-1"},[e("div",null,{class:"border-b border-gray-200 dark:border-gray-700 mb-8"},e("div",null,{class:"flex"},[e("button",null,{class:f(c=>`tab ${c.value==="architecture"?"active":""}`,[t],'`tab ${p0.value==="architecture"?"active":""}`'),onClick$:w("s_Tb896FU2TvI",[o])},"Arquitectura",3,null),e("button",null,{class:f(c=>`tab ${c.value==="contracts"?"active":""}`,[t],'`tab ${p0.value==="contracts"?"active":""}`'),onClick$:w("s_jAmpfQOwVW8",[o])},"Contratos",3,null),e("button",null,{class:f(c=>`tab ${c.value==="security"?"active":""}`,[t],'`tab ${p0.value==="security"?"active":""}`'),onClick$:w("s_x0ZhfQ6FRlE",[o])},"Seguridad",3,null),e("button",null,{class:f(c=>`tab ${c.value==="implementation"?"active":""}`,[t],'`tab ${p0.value==="implementation"?"active":""}`'),onClick$:w("s_1RvbHfL96oo",[o])},"Implementación",3,null)],3,null),3,null),e("div",null,{class:f(c=>`tab-content ${c.value==="architecture"?"active":""}`,[t],'`tab-content ${p0.value==="architecture"?"active":""}`')},[e("section",{ref:a},{id:"arch-overview",class:"mb-12 section"},[e("h2",null,{class:"text-3xl font-bold mb-6 text-indigo-800 dark:text-indigo-300"},"Arquitectura del Sistema",3,null),e("p",null,{class:"text-gray-700 dark:text-gray-300 mb-6"},"La plataforma TokenEstate está diseñada con una arquitectura modular y escalable que permite la tokenización, comercialización y gestión de propiedades inmobiliarias a través de tecnología blockchain. Esta sección describe la arquitectura general y los componentes clave del sistema.",3,null),e("div",null,{class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md mb-8"},[e("h3",null,{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-white"},"Componentes Principales",3,null),e("div",null,{class:"grid md:grid-cols-2 gap-6"},[e("div",null,null,[e("h4",null,{class:"font-medium text-lg mb-2 text-indigo-700 dark:text-indigo-400"},"Frontend",3,null),e("ul",null,{class:"list-disc pl-5 mb-4 text-gray-700 dark:text-gray-300"},[e("li",null,null,"Aplicación web desarrollada con Qwik y React",3,null),e("li",null,null,"Interfaz para usuarios, propietarios y administradores",3,null),e("li",null,null,"Integración con billeteras Web3",3,null)],3,null)],3,null),e("div",null,null,[e("h4",null,{class:"font-medium text-lg mb-2 text-indigo-700 dark:text-indigo-400"},"Blockchain",3,null),e("ul",null,{class:"list-disc pl-5 mb-4 text-gray-700 dark:text-gray-300"},[e("li",null,null,"Implementado sobre red EVM-compatible",3,null),e("li",null,null,"Smart Contracts para tokens NFT (propiedades)",3,null),e("li",null,null,"Smart Contracts para tokens KNRT (pagos)",3,null)],3,null)],3,null),e("div",null,{class:"border border-gray-100 dark:border-gray-700 p-4 rounded-lg hover:border-indigo-200 dark:hover:border-indigo-800 transition-colors"},[e("h4",null,{class:"font-medium text-lg mb-2 text-indigo-700 dark:text-indigo-400 flex items-center"},[m(Ut,{class:"w-5 h-5 mr-2",[n]:{class:n}},3,"Hi_9"),"Backend"],1,null),e("ul",null,{class:"list-disc pl-5 mb-4 text-gray-700 dark:text-gray-300"},[e("li",null,null,"API REST para metadatos y funciones auxiliares",3,null),e("li",null,null,"Base de datos SQL para información no-blockchain",3,null),e("li",null,null,"Servicios de autenticación y verificación",3,null)],3,null),e("div",null,{class:"snippet-tag bg-yellow-50 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-300"},"TursoDb & Node.js",3,null)],1,null),e("div",null,{class:"border border-gray-100 dark:border-gray-700 p-4 rounded-lg hover:border-indigo-200 dark:hover:border-indigo-800 transition-colors"},[e("h4",null,{class:"font-medium text-lg mb-2 text-indigo-700 dark:text-indigo-400 flex items-center"},[m(we,{class:"w-5 h-5 mr-2",[n]:{class:n}},3,"Hi_10"),"Integración"],1,null),e("ul",null,{class:"list-disc pl-5 mb-4 text-gray-700 dark:text-gray-300"},[e("li",null,null,"Oráculos blockchain (Chainlink)",3,null),e("li",null,null,"IPFS para almacenamiento descentralizado",3,null),e("li",null,null,"Servicios KYC y verificación legal",3,null)],3,null),e("div",null,{class:"snippet-tag bg-purple-50 text-purple-700 dark:bg-purple-900/20 dark:text-purple-300"},"Integraciones API",3,null)],1,null)],1,null),e("div",null,{class:"mt-6 pt-4 border-t border-gray-100 dark:border-gray-700"},[e("h4",null,{class:"font-medium text-sm uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-2"},"Tecnologías Clave",3,null),e("div",null,{class:"flex flex-wrap gap-2"},[e("span",null,{class:"px-3 py-1 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 rounded-full text-xs font-medium"},"Solidity",3,null),e("span",null,{class:"px-3 py-1 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 rounded-full text-xs font-medium"},"Qwik.js",3,null),e("span",null,{class:"px-3 py-1 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 rounded-full text-xs font-medium"},"ERC721",3,null),e("span",null,{class:"px-3 py-1 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 rounded-full text-xs font-medium"},"ERC20",3,null),e("span",null,{class:"px-3 py-1 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 rounded-full text-xs font-medium"},"IPFS",3,null),e("span",null,{class:"px-3 py-1 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 rounded-full text-xs font-medium"},"TursoDb",3,null)],3,null)],3,null)],1,null),e("div",null,{class:"mb-8"},[e("h3",null,{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-white"},"Flujo de Datos",3,null),e("p",null,{class:"text-gray-700 dark:text-gray-300 mb-4"},"El flujo de datos entre los componentes del sistema sigue un patrón de comunicación asíncrono con verificaciones en múltiples niveles para garantizar la integridad y consistencia:",3,null),e("ol",null,{class:"list-decimal pl-5 mb-4 space-y-2 text-gray-700 dark:text-gray-300"},[e("li",null,null,[e("strong",null,null,"Solicitud de usuario",3,null),": Iniciada desde la interfaz frontend"],3,null),e("li",null,null,[e("strong",null,null,"Validación local",3,null),": Verificación preliminar en el cliente"],3,null),e("li",null,null,[e("strong",null,null,"API Backend",3,null),": Procesamiento y preparación de transacciones"],3,null),e("li",null,null,[e("strong",null,null,"Firma de transacción",3,null),": Usuario firma con su billetera Web3"],3,null),e("li",null,null,[e("strong",null,null,"Procesamiento blockchain",3,null),": Transacción procesada por smart contracts"],3,null),e("li",null,null,[e("strong",null,null,"Confirmación",3,null),": Resultados verificados y notificados al usuario"],3,null)],3,null)],3,null)],1,null),e("section",{ref:s},{id:"system-layers",class:"mb-12 section"},[e("h2",null,{class:"text-2xl font-bold mb-6 text-indigo-800 dark:text-indigo-300"},"Capas del Sistema",3,null),e("div",null,{class:"mb-8"},[e("h3",null,{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-white"},"1. Capa de Blockchain",3,null),e("div",null,{class:"bg-indigo-50 dark:bg-indigo-900/30 p-4 rounded-lg mb-4"},e("p",null,{class:"text-gray-700 dark:text-gray-300"},[e("span",null,{class:"font-medium"},"Red:",3,null)," Ethereum o red EVM-compatible (como Base) para optimizar costos de transacción."],3,null),3,null),e("p",null,{class:"text-gray-700 dark:text-gray-300 mb-4"},"Esta capa proporciona la infraestructura descentralizada sobre la que se ejecutan los contratos inteligentes. Se accede a través de nodos RPC y se monitorea mediante servicios de indexación para un rendimiento óptimo.",3,null)],3,null),e("div",null,{class:"mb-8"},[e("h3",null,{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-white"},"2. Capa de Smart Contracts",3,null),e("div",null,{class:"bg-indigo-50 dark:bg-indigo-900/30 p-4 rounded-lg mb-4"},e("ul",null,{class:"space-y-2 text-gray-700 dark:text-gray-300"},[e("li",null,null,[e("span",null,{class:"font-medium"},"Contrato ERC721:",3,null)," Tokenización y registro de inmuebles."],3,null),e("li",null,null,[e("span",null,{class:"font-medium"},"Contrato ERC20:",3,null)," Gestión del token de pago KNRT."],3,null),e("li",null,null,[e("span",null,{class:"font-medium"},"Contrato Marketplace:",3,null)," Listado, compra/venta y transferencia de NFTs."],3,null),e("li",null,null,[e("span",null,{class:"font-medium"},"Contrato de Alquiler:",3,null)," Gestión de contratos de arrendamiento."],3,null),e("li",null,null,[e("span",null,{class:"font-medium"},"Contrato de Escrow:",3,null)," Bloqueo y liberación de tokens según condiciones."],3,null)],3,null),3,null),e("p",null,{class:"text-gray-700 dark:text-gray-300 mb-4"},"Los contratos inteligentes están implementados en Solidity v0.8.22 o superior, con un enfoque en la seguridad, eficiencia de gas y facilidad de actualización. Siguen patrones establecidos como proxy actualizable y control de acceso basado en roles.",3,null)],3,null),e("div",null,{class:"mb-8"},[e("h3",null,{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-white"},"3. Capa de Interfaz de Usuario",3,null),e("div",null,{class:"bg-indigo-50 dark:bg-indigo-900/30 p-4 rounded-lg mb-4"},e("ul",null,{class:"space-y-2 text-gray-700 dark:text-gray-300"},[e("li",null,null,[e("span",null,{class:"font-medium"},"Frontend:",3,null)," Aplicación web desarrollada en Qwik.js"],3,null),e("li",null,null,[e("span",null,{class:"font-medium"},"Integración Web3:",3,null)," Ethers.js para interactuar con la blockchain"],3,null)],3,null),3,null),e("p",null,{class:"text-gray-700 dark:text-gray-300 mb-4"},"La interfaz de usuario está diseñada para ser intuitiva y responsiva, con soporte para múltiples billeteras y optimización para dispositivos móviles y de escritorio. Implementa principios de diseño centrado en el usuario y accesibilidad.",3,null)],3,null),e("div",null,{class:"mb-8"},[e("h3",null,{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-white"},"4. Capa de Backend",3,null),e("div",null,{class:"bg-indigo-50 dark:bg-indigo-900/30 p-4 rounded-lg mb-4"},e("ul",null,{class:"space-y-2 text-gray-700 dark:text-gray-300"},[e("li",null,null,[e("span",null,{class:"font-medium"},"Servidores:",3,null)," Node.js para API y servicios auxiliares"],3,null),e("li",null,null,[e("span",null,{class:"font-medium"},"Base de datos:",3,null)," SQL para almacenamiento estructurado"],3,null),e("li",null,null,[e("span",null,{class:"font-medium"},"IPFS:",3,null)," Almacenamiento descentralizado para metadatos"],3,null)],3,null),3,null),e("p",null,{class:"text-gray-700 dark:text-gray-300 mb-4"},"La capa de backend gestiona operaciones que requieren procesamiento fuera de la cadena, como la generación de metadatos, el almacenamiento de documentos legales y la indexación para búsquedas eficientes de propiedades.",3,null)],3,null),e("div",null,null,[e("h3",null,{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-white"},"5. Integraciones Adicionales",3,null),e("div",null,{class:"bg-indigo-50 dark:bg-indigo-900/30 p-4 rounded-lg mb-4"},e("ul",null,{class:"space-y-2 text-gray-700 dark:text-gray-300"},[e("li",null,null,[e("span",null,{class:"font-medium"},"Oráculos:",3,null)," Chainlink para validar condiciones externas"],3,null),e("li",null,null,[e("span",null,{class:"font-medium"},"KYC/AML:",3,null)," Servicios de verificación de identidad"],3,null),e("li",null,null,[e("span",null,{class:"font-medium"},"Pasarelas de Pago:",3,null)," Integración fiat-cripto (opcional)"],3,null)],3,null),3,null),e("p",null,{class:"text-gray-700 dark:text-gray-300 mb-4"},"Estas integraciones extienden la funcionalidad del sistema, permitiendo una conexión segura con sistemas externos y cumplimiento de requisitos regulatorios.",3,null)],3,null)],3,null),e("section",{ref:r},{id:"smart-contracts",class:"mb-12 section"},[e("h2",null,{class:"text-2xl font-bold mb-6 text-indigo-800 dark:text-indigo-300"},"Contratos Inteligentes",3,null),e("p",null,{class:"text-gray-700 dark:text-gray-300 mb-6"},"Los contratos inteligentes son el núcleo de la plataforma TokenEstate, proporcionando la lógica de negocio descentralizada que permite la tokenización y gestión de propiedades inmobiliarias. Están desarrollados en Solidity y siguen las mejores prácticas de seguridad y optimización.",3,null),e("div",null,{class:"mb-8"},[e("h3",null,{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-white flex items-center"},[m(we,{class:"w-5 h-5 mr-2 text-indigo-500",[n]:{class:n}},3,"Hi_11"),"Estructura de Contratos"],1,null),e("div",null,{class:"grid md:grid-cols-2 gap-6 mb-6"},[e("div",null,{class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border-l-4 border-blue-500"},[e("h4",null,{class:"font-medium text-lg mb-2 text-indigo-700 dark:text-indigo-400"},"PropertyNFT.sol",3,null),e("p",null,{class:"text-gray-600 dark:text-gray-400 text-sm mb-2"},"Contrato ERC721 para tokenización de propiedades inmobiliarias",3,null),e("ul",null,{class:"list-disc pl-5 text-sm text-gray-700 dark:text-gray-300"},[e("li",null,null,"Registro de propiedades con metadatos",3,null),e("li",null,null,"Sistema de verificación de autenticidad",3,null),e("li",null,null,"Actualización controlada de metadatos",3,null)],3,null)],3,null),e("div",null,{class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border-l-4 border-green-500"},[e("h4",null,{class:"font-medium text-lg mb-2 text-indigo-700 dark:text-indigo-400 flex items-center"},[m(qt,{class:"w-4 h-4 mr-2",[n]:{class:n}},3,"Hi_12")," KNRT.sol"],1,null),e("p",null,{class:"text-gray-600 dark:text-gray-400 text-sm mb-2"},"Token ERC20 utilizado para pagos en la plataforma",3,null),e("ul",null,{class:"list-disc pl-5 text-sm text-gray-700 dark:text-gray-300"},[e("li",null,null,"Transferencias con permisos específicos",3,null),e("li",null,null,"Funciones de congelamiento para escrow",3,null),e("li",null,null,"Controles anti-inflación",3,null)],3,null)],1,null),e("div",null,{class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border-l-4 border-yellow-500"},[e("h4",null,{class:"font-medium text-lg mb-2 text-indigo-700 dark:text-indigo-400 flex items-center"},[m(Nt,{class:"w-4 h-4 mr-2",[n]:{class:n}},3,"Hi_13")," Marketplace.sol"],1,null),e("p",null,{class:"text-gray-600 dark:text-gray-400 text-sm mb-2"},"Facilita la compra/venta de PropertyNFTs",3,null),e("ul",null,{class:"list-disc pl-5 text-sm text-gray-700 dark:text-gray-300"},[e("li",null,null,"Listado de propiedades con precios",3,null),e("li",null,null,"Funciones de oferta y contraoferta",3,null),e("li",null,null,"Comisiones configurables",3,null)],3,null)],1,null),e("div",null,{class:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border-l-4 border-purple-500"},[e("h4",null,{class:"font-medium text-lg mb-2 text-indigo-700 dark:text-indigo-400 flex items-center"},[m(jt,{class:"w-4 h-4 mr-2",[n]:{class:n}},3,"Hi_14")," RentalManager.sol"],1,null),e("p",null,{class:"text-gray-600 dark:text-gray-400 text-sm mb-2"},"Gestión de contratos de alquiler para propiedades",3,null),e("ul",null,{class:"list-disc pl-5 text-sm text-gray-700 dark:text-gray-300"},[e("li",null,null,"Creación de acuerdos de arrendamiento",3,null),e("li",null,null,"Programación de pagos periódicos",3,null),e("li",null,null,"Gestión de disputas y terminación",3,null)],3,null)],1,null)],1,null),e("div",null,{class:"mb-8"},[e("h3",null,{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-white flex items-center"},[m(we,{class:"w-5 h-5 mr-2 text-indigo-500",[n]:{class:n}},3,"Hi_15"),"Ejemplo de Código: PropertyNFT.sol"],1,null),e("div",null,{class:"code-block"},[e("button",null,{class:"copy-button"},"Copiar",3,null),e("pre",null,null,`// SPDX-License-Identifier: MIT
pragma solidity ^0.8.22;

import {ERC721} from "@openzeppelin/contracts/token/ERC721/ERC721.sol";
import {ERC721Burnable} from "@openzeppelin/contracts/token/ERC721/extensions/ERC721Burnable.sol";
import {ERC721Enumerable} from "@openzeppelin/contracts/token/ERC721/extensions/ERC721Enumerable.sol";
import {ERC721Pausable} from "@openzeppelin/contracts/token/ERC721/extensions/ERC721Pausable.sol";
import {ERC721URIStorage} from "@openzeppelin/contracts/token/ERC721/extensions/ERC721URIStorage.sol";
import {AccessControl} from "@openzeppelin/contracts/access/AccessControl.sol";

/**
 * @title PropertyNFT
 * @dev ERC721 token representing unique real estate properties.
 * Metadata URI should point to detailed property information (potentially on IPFS).
 */
contract PropertyNFT is ERC721, ERC721Enumerable, ERC721URIStorage, ERC721Pausable, AccessControl, ERC721Burnable {
    bytes32 public constant PAUSER_ROLE = keccak256("PAUSER_ROLE");
    bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");
    bytes32 public constant METADATA_UPDATER_ROLE = keccak256("METADATA_UPDATER_ROLE");

    uint256 private _nextTokenId;

    // --- Events ---
    event PropertyMinted(uint256 indexed tokenId, address indexed owner, string tokenURI);
    event TokenMetadataUpdated(uint256 indexed tokenId, string newUri);

    // Funciones y lógica contractual...
}`,3,null)],3,null)],1,null),e("div",null,null,[e("h3",null,{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-white"},"Próximos Pasos para Despliegue",3,null),e("ol",null,{class:"list-decimal pl-5 mb-6 text-gray-700 dark:text-gray-300 space-y-2"},[e("li",null,null,"Despliegue de tokens ERC721 para representación de propiedades.",3,null),e("li",null,null,"Despliegue del token KNRT (ERC20) para pagos en la plataforma.",3,null),e("li",null,null,"Despliegue de contrato RentalEscrow para gestión de garantías.",3,null),e("li",null,null,"Despliegue de Marketplace para compra/venta de propiedades.",3,null),e("li",null,null,"Configuración de roles y permisos en cada contrato.",3,null),e("li",null,null,"Auditoría de seguridad completa antes del lanzamiento en mainnet.",3,null)],3,null)],3,null)],1,null)],1,null),e("section",null,{id:"security",class:"mb-12"},[e("h2",null,{class:"text-2xl font-bold mb-6 text-indigo-800 dark:text-indigo-300"},"Seguridad y Auditoría",3,null),e("p",null,{class:"text-gray-700 dark:text-gray-300 mb-6"},"La seguridad es una prioridad crítica en la plataforma TokenEstate. Se implementan múltiples capas de seguridad y procesos de auditoría rigurosos para proteger los activos y datos de los usuarios.",3,null),e("div",null,{class:"grid md:grid-cols-2 gap-6 mb-8"},[e("div",null,{class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md"},[e("h3",null,{class:"text-xl font-semibold mb-3 text-gray-800 dark:text-white"},"Seguridad de Smart Contracts",3,null),e("ul",null,{class:"list-disc pl-5 space-y-1 text-gray-700 dark:text-gray-300"},[e("li",null,null,"Auditorías por firmas especializadas",3,null),e("li",null,null,"Tests de penetración y análisis estático",3,null),e("li",null,null,"Control de acceso basado en roles",3,null),e("li",null,null,"Patrones de diseño seguros (Checks-Effects-Interactions)",3,null),e("li",null,null,"Implementación gradual con pausas de emergencia",3,null)],3,null)],3,null),e("div",null,{class:"bg-white dark:bg-gray-800 p-5 rounded-xl shadow-md"},[e("h3",null,{class:"text-xl font-semibold mb-3 text-gray-800 dark:text-white"},"Seguridad de Aplicación",3,null),e("ul",null,{class:"list-disc pl-5 space-y-1 text-gray-700 dark:text-gray-300"},[e("li",null,null,"Autenticación multifactor",3,null),e("li",null,null,"Conexiones cifradas (HTTPS/TLS)",3,null),e("li",null,null,"Validación de entradas en frontend y backend",3,null),e("li",null,null,"Protección contra ataques comunes (XSS, CSRF)",3,null),e("li",null,null,"Monitoreo y alertas en tiempo real",3,null)],3,null)],3,null)],3,null),e("div",null,{class:"mb-8"},[e("h3",null,{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-white"},"Proceso de Auditoría",3,null),e("ol",null,{class:"list-decimal pl-5 mb-6 text-gray-700 dark:text-gray-300 space-y-2"},[e("li",null,null,[e("strong",null,null,"Auditoría Interna:",3,null)," Revisión de código por el equipo de desarrollo."],3,null),e("li",null,null,[e("strong",null,null,"Auditoría Comunitaria:",3,null)," Programa de recompensas para encontrar vulnerabilidades."],3,null),e("li",null,null,[e("strong",null,null,"Auditoría Profesional:",3,null)," Contratación de firmas especializadas en seguridad blockchain."],3,null),e("li",null,null,[e("strong",null,null,"Testnet Público:",3,null)," Despliegue en redes de prueba para validación amplia."],3,null),e("li",null,null,[e("strong",null,null,"Despliegue Mainnet:",3,null)," Lanzamiento progresivo con límites y monitoreo continuo."],3,null)],3,null)],3,null),e("div",null,null,[e("h3",null,{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-white"},"Gestión de Riesgos",3,null),e("div",null,{class:"overflow-x-auto"},e("table",null,{class:"min-w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"},[e("thead",null,null,e("tr",null,{class:"bg-gray-50 dark:bg-gray-700 text-left"},[e("th",null,{class:"py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-sm font-semibold text-gray-700 dark:text-gray-200"},"Escenario",3,null),e("th",null,{class:"py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-sm font-semibold text-gray-700 dark:text-gray-200"},"Medidas de Mitigación",3,null)],3,null),3,null),e("tbody",null,null,[e("tr",null,null,[e("td",null,{class:"py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300"},"Impago de alquiler",3,null),e("td",null,{class:"py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300"},"Garantías en escrow, ejecución automática por contrato",3,null)],3,null),e("tr",null,null,[e("td",null,{class:"py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300"},"Disputa contractual",3,null),e("td",null,{class:"py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300"},"Sistema de resolución con árbitros designados",3,null)],3,null),e("tr",null,null,[e("td",null,{class:"py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300"},"Fallo en oráculo",3,null),e("td",null,{class:"py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300"},"Múltiples fuentes de datos, mecanismo de fallback",3,null)],3,null),e("tr",null,null,[e("td",null,{class:"py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300"},"Vulnerabilidad en contrato",3,null),e("td",null,{class:"py-2 px-4 border-b border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300"},"Pausa de emergencia, actualizaciones por proxy",3,null)],3,null)],3,null)],3,null),3,null)],3,null)],3,null),e("section",null,{id:"timeline",class:"mb-12"},[e("h2",null,{class:"text-2xl font-bold mb-6 text-indigo-800 dark:text-indigo-300"},"Cronograma y Estimación de Tiempos",3,null),e("p",null,{class:"text-gray-700 dark:text-gray-300 mb-6"},"El desarrollo e implementación de la plataforma TokenEstate seguirá un enfoque iterativo, con fases bien definidas y entregables específicos para cada etapa.",3,null),e("div",null,{class:"overflow-x-auto mb-8"},e("table",null,{class:"min-w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg"},[e("thead",null,null,e("tr",null,{class:"bg-indigo-50 dark:bg-indigo-900/30"},[e("th",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-left font-semibold text-indigo-800 dark:text-indigo-300"},"Fase",3,null),e("th",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-left font-semibold text-indigo-800 dark:text-indigo-300"},"Actividades",3,null),e("th",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-left font-semibold text-indigo-800 dark:text-indigo-300"},"Duración",3,null)],3,null),3,null),e("tbody",null,null,[e("tr",null,null,[e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm font-medium text-gray-800 dark:text-gray-200"},"1. Diseño y Planificación",3,null),e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300"},"Arquitectura, especificaciones técnicas, planificación de sprints",3,null),e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300"},"2 - 3 semanas",3,null)],3,null),e("tr",null,null,[e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm font-medium text-gray-800 dark:text-gray-200"},"2. Desarrollo de Smart Contracts",3,null),e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300"},"Implementación, pruebas unitarias, auditoría interna",3,null),e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300"},"8 - 12 semanas",3,null)],3,null),e("tr",null,null,[e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm font-medium text-gray-800 dark:text-gray-200"},"3. Desarrollo Frontend/Backend",3,null),e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300"},"Interfaz de usuario, API, integración Web3",3,null),e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300"},"4 - 6 semanas",3,null)],3,null),e("tr",null,null,[e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm font-medium text-gray-800 dark:text-gray-200"},"4. Integración y Testing",3,null),e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300"},"Pruebas de integración, testnet público",3,null),e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300"},"2 - 3 semanas",3,null)],3,null),e("tr",null,null,[e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm font-medium text-gray-800 dark:text-gray-200"},"5. Auditoría de Seguridad",3,null),e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300"},"Auditoría externa, correcciones, validación final",3,null),e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300"},"3 - 4 semanas",3,null)],3,null),e("tr",null,null,[e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm font-medium text-gray-800 dark:text-gray-200"},"6. Despliegue y Launch",3,null),e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300"},"Mainnet, monitoreo, lanzamiento público",3,null),e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300"},"1 semana",3,null)],3,null),e("tr",null,{class:"bg-indigo-50 dark:bg-indigo-900/20"},[e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm font-bold text-gray-800 dark:text-gray-200"},"Total Estimado",3,null),e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700"},null,3,null),e("td",null,{class:"py-3 px-4 border-b border-gray-300 dark:border-gray-700 text-sm font-bold text-gray-800 dark:text-gray-200"},"20 - 29 semanas",3,null)],3,null)],3,null)],3,null),3,null),e("div",null,null,[e("h3",null,{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-white"},"Hitos Clave",3,null),e("ul",null,{class:"list-disc pl-5 space-y-2 text-gray-700 dark:text-gray-300"},[e("li",null,null,[e("span",null,{class:"font-medium"},"MVP en Testnet:",3,null)," Semana 14 - Funcionalidades básicas operativas"],3,null),e("li",null,null,[e("span",null,{class:"font-medium"},"Beta Pública:",3,null)," Semana 18 - Versión preliminar para testers seleccionados"],3,null),e("li",null,null,[e("span",null,{class:"font-medium"},"Auditoría Completa:",3,null)," Semana 24 - Finalización de auditorías de seguridad"],3,null),e("li",null,null,[e("span",null,{class:"font-medium"},"Launch en Mainnet:",3,null)," Semana 26-29 - Despliegue en red principal"],3,null)],3,null)],3,null)],3,null)],1,null),e("div",null,{class:f(c=>`tab-content ${c.value==="contracts"?"active":""}`,[t],'`tab-content ${p0.value==="contracts"?"active":""}`')},e("h2",null,{class:"text-3xl font-bold mb-6 text-indigo-800 dark:text-indigo-300"},"Contratos Inteligentes",3,null),3,null),e("div",null,{class:f(c=>`tab-content ${c.value==="security"?"active":""}`,[t],'`tab-content ${p0.value==="security"?"active":""}`')},e("h2",null,{class:"text-3xl font-bold mb-6 text-indigo-800 dark:text-indigo-300"},"Seguridad y Auditoría",3,null),3,null),e("div",null,{class:f(c=>`tab-content ${c.value==="implementation"?"active":""}`,[t],'`tab-content ${p0.value==="implementation"?"active":""}`')},e("h2",null,{class:"text-3xl font-bold mb-6 text-indigo-800 dark:text-indigo-300"},"Implementación y Despliegue",3,null),3,null),e("div",null,{class:"flex justify-between items-center mt-12 pt-6 border-t border-gray-200 dark:border-gray-700"},[e("a",null,{href:"/about",class:"inline-flex items-center text-indigo-600 dark:text-indigo-400 hover:underline"},[e("svg",null,{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e("path",null,{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"},null,3,null),3,null),"Volver a la Información General"],3,null),e("a",null,{href:"/marketplace",class:"inline-flex items-center text-indigo-600 dark:text-indigo-400 hover:underline"},["Explorar Marketplace",e("svg",null,{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e("path",null,{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,3,null),3,null)],3,null)],3,null)],1,null)],1,null)],1,"Hi_16")},In=L(b(Cn,"s_IVLxFPyAapY")),Rn=Object.freeze(Object.defineProperty({__proto__:null,_auto_BuildingIcon:jt,_auto_CodeIcon:we,_auto_CreditCardIcon:qt,_auto_DatabaseIcon:Ut,_auto_LockIcon:Nt,default:In},Symbol.toStringTag,{value:"Module"})),fe=[{id:"personal-info",title:"Personal Information",description:"Tell us more about you so we can contextualize your English level.",questions:[{id:"q1_name",prompt:"1. What is your name?",type:"text",required:!0,placeholder:"Full name",section:"Personal Information"},{id:"q1_email",prompt:"What is your email?",type:"text",required:!0,placeholder:"name@example.com",section:"Personal Information"},{id:"q1_phone",prompt:"What is your phone number?",type:"text",required:!0,placeholder:"+58 412-0000000",section:"Personal Information"},{id:"q2_country",prompt:"2. Where are you from?",type:"text",required:!0,placeholder:"Country / City",section:"Personal Information"},{id:"q3_birthdate",prompt:"3. Date of birth",type:"text",required:!0,placeholder:"DD/MM/YYYY",section:"Personal Information"},{id:"q4_address",prompt:"4. What is your address?",type:"text",required:!0,placeholder:"Street, City",section:"Personal Information"}]},{id:"listening-mp3",title:"Listening Comprehension",description:"Listen to each audio and answer the question in writing.",questions:[{id:"q_listen_3",type:"textarea",prompt:"Listen: ",audioSrc:"/breakfast.mp3",required:!0,placeholder:"Write your answer here",section:"Listening"},{id:"q_listen_2",type:"textarea",prompt:"Listen: ",audioSrc:"/tech.mp3",required:!0,placeholder:"Write your answer here",section:"Listening"},{id:"q_listen_1",type:"textarea",prompt:"Listen: ",audioSrc:"/future.mp3",required:!0,placeholder:"Write your answer here",section:"Listening"}]},{id:"speaking-audio",title:"Speaking (Audio)",description:"Record your answer to each question. You may leave it blank, but it will be marked as incorrect if no audio is provided.",questions:[{id:"q_audio_1",prompt:"Introduce yourself. Say your name, where you are from, and one thing you like doing in your free time.",type:"audio",required:!1,section:"Speaking"},{id:"q_audio_2",prompt:"Describe your city or town. Mention at least two places and what people can do there.",type:"audio",required:!1,section:"Speaking"},{id:"q_audio_3",prompt:"Talk about your daily routine on a typical weekday. Mention at least three activities and the time you usually do them.",type:"audio",required:!1,section:"Speaking"},{id:"q_audio_4",prompt:"Talk about your hobbies. Which activities do you enjoy and how often do you do them?",type:"audio",required:!1,section:"Speaking"},{id:"q_audio_5",prompt:"If you could travel anywhere in the world, where would you go and why?",type:"audio",required:!1,section:"Speaking"},{id:"q_audio_6",prompt:"Describe a memorable event from your life and its significance.",type:"audio",required:!1,section:"Speaking"}]},{id:"professions-spelling",title:"Professions & Spelling",description:"Quick vocabulary warm-up.",questions:[{id:"q5_profession",prompt:"5. Choose the profession that works with crops and animals.",type:"radio",required:!0,section:"Vocabulary",options:[{value:"farmer",label:"Farmer"},{value:"journalist",label:"Journalist"},{value:"astronaut",label:"Astronaut"},{value:"doctor",label:"Doctor"}],points:1,correctAnswer:"farmer"},{id:"q6_profession",prompt:"6. Choose the profession that represents people in court.",type:"radio",required:!0,section:"Vocabulary",options:[{value:"baseball_player",label:"Baseball player"},{value:"chef",label:"Chef"},{value:"lawyer",label:"Lawyer"},{value:"painter",label:"Painter"}],points:1,correctAnswer:"lawyer"},{id:"q7_spelling",prompt:"7. Choose the correctly spelled word.",type:"radio",required:!0,section:"Vocabulary",options:[{value:"bich",label:"Bich"},{value:"bech",label:"Bech"},{value:"baech",label:"Baech"},{value:"beach",label:"Beach"}],points:1,correctAnswer:"beach"}]},{id:"grammar-correction",title:"Grammar Correction",description:"Rewrite each sentence correctly.",questions:[{id:"q8_correction",prompt:"8. Correct this sentence: “Mary are in Merida.”",type:"text",required:!0,section:"Grammar"},{id:"q9_correction",prompt:"9. Correct this sentence: “Joey is mine brother.”",type:"text",required:!0,section:"Grammar"},{id:"q10_correction",prompt:"10. Correct this sentence: “My mom am in the kitchen.”",type:"text",required:!0,section:"Grammar"},{id:"q11_correction",prompt:"11. Correct this sentence: “They are at the supermarket.”",type:"text",required:!0,section:"Grammar"}]},{id:"verb-tenses",title:"Verb Tenses",description:`Complete the letter with the correct option.

Dear Ana,
I ____ to you so you know what is happening in my life. I ____ move to San Diego with a friend that I ____ last summer. She ____ help me get my things there since she ____ a car. I ____ an apartment next to a big square. You ____ love it.

Choose the best option for each blank.`,questions:[{id:"q12_letter",prompt:"12. I ______ to you so you know what is happening in my life.",type:"radio",required:!0,section:"Verb Tenses",options:[{value:"write",label:"Write"},{value:"writing",label:"Writing"},{value:"wrote",label:"Wrote"},{value:"writes",label:"Writes"}],points:1,correctAnswer:"write"},{id:"q13_letter",prompt:"13. so you know what is ______ on in my life.",type:"radio",required:!0,section:"Verb Tenses",options:[{value:"goes",label:"Goes"},{value:"go",label:"Go"},{value:"going",label:"Going"},{value:"goin",label:"Goin"}],points:1,correctAnswer:"going"},{id:"q14_letter",prompt:"14. I ______ move to San Diego with a friend.",type:"radio",required:!0,section:"Verb Tenses",options:[{value:"are_going_to",label:"Are going to"},{value:"is_go_to",label:"Is go to"},{value:"am_going_to",label:"Am going to"},{value:"am_goin_to",label:"Am goin to"}],points:1,correctAnswer:"am_going_to"},{id:"q15_letter",prompt:"15. that I ______ last summer.",type:"radio",required:!0,section:"Verb Tenses",options:[{value:"met",label:"Met"},{value:"meet",label:"Meet"},{value:"meeting",label:"Meeting"},{value:"meting",label:"Meting"}],points:1,correctAnswer:"met"},{id:"q16_letter",prompt:"16. She ______ help me get my things there.",type:"radio",required:!0,section:"Verb Tenses",options:[{value:"will",label:"Will"},{value:"be_going_to",label:"Be going to"},{value:"wont",label:"Won't"},{value:"will_go_to",label:"Will go to"}],points:1,correctAnswer:"will"},{id:"q17_letter",prompt:"17. since she ______ a car.",type:"radio",required:!0,section:"Verb Tenses",options:[{value:"have",label:"Have"},{value:"going_to_have",label:"Going to have"},{value:"has",label:"Has"},{value:"had",label:"Had"}],points:1,correctAnswer:"has"},{id:"q18_letter",prompt:"18. I ______ an apartment next to a big square.",type:"radio",required:!0,section:"Verb Tenses",options:[{value:"rented",label:"Rented"},{value:"rents",label:"Rents"},{value:"rent",label:"Rent"},{value:"renting",label:"Renting"}],points:1,correctAnswer:"rented"},{id:"q19_letter",prompt:"19. you ______ love it.",type:"radio",required:!0,section:"Verb Tenses",options:[{value:"are_to",label:"Are to"},{value:"will",label:"Will"},{value:"are_to_go",label:"Are to go"},{value:"be_will",label:"Be will"}],points:1,correctAnswer:"will"}]},{id:"vacation-writing",title:"Vacation Writing",description:"Tell us about your last vacation.",questions:[{id:"q20_vacation",prompt:"20. Tell us about the last time you went on vacation. Where did you go? Who did you go with? What did you do?",type:"textarea",required:!0,helperText:"Aim for 4-5 sentences.",section:"Writing"}]},{id:"climate-text",title:"Reading: Climate Change",description:"Complete the text with the correct option.",questions:[{id:"q21_climate",prompt:"21. Some organizations ______ that everybody can influence global warming.",type:"radio",required:!0,section:"Reading",options:[{value:"have_said",label:"Have said"},{value:"she_said",label:"She said"},{value:"talking",label:"Talking"},{value:"planet",label:"Planet"}],points:1,correctAnswer:"have_said"},{id:"q22_climate",prompt:"22. ______ can influence global warming.",type:"radio",required:!0,section:"Reading",options:[{value:"nobody",label:"Nobody"},{value:"everybody",label:"Everybody"},{value:"warming",label:"Warming"},{value:"something",label:"Something"}],points:1,correctAnswer:"everybody"},{id:"q23_climate",prompt:"23. We can limit the ______ greenhouse gases do to the atmosphere.",type:"radio",required:!0,section:"Reading",options:[{value:"improve",label:"Improve"},{value:"water",label:"Water"},{value:"star",label:"Star"},{value:"damage",label:"Damage"}],points:1,correctAnswer:"damage"},{id:"q24_climate",prompt:"24. Our Earth can ______ by the way we use energy.",type:"radio",required:!0,section:"Reading",options:[{value:"harm",label:"Harm"},{value:"benefit",label:"Benefit"},{value:"good",label:"Good"},{value:"mistaken",label:"Mistaken"}],points:1,correctAnswer:"benefit"},{id:"q25_climate",prompt:"25. around the ______.",type:"radio",required:!0,section:"Reading",options:[{value:"anyone",label:"Anyone"},{value:"trash",label:"Trash"},{value:"already",label:"Already"},{value:"world",label:"World"}],points:1,correctAnswer:"world"},{id:"q26_climate",prompt:"26. ______ they introduced fuel-efficient vehicles.",type:"radio",required:!0,section:"Reading",options:[{value:"just",label:"Just"},{value:"never",label:"Never"},{value:"always",label:"Always"},{value:"since",label:"Since"}],points:1,correctAnswer:"since"},{id:"q27_climate",prompt:"27. the environment ______ a little bit.",type:"radio",required:!0,section:"Reading",options:[{value:"it_could",label:"It could"},{value:"it_doesnt",label:"It doesn't"},{value:"has_changed",label:"Has changed"},{value:"should",label:"Should"}],points:1,correctAnswer:"has_changed"},{id:"q28_climate",prompt:"28. ______ is safe from changing their lifestyles.",type:"radio",required:!0,section:"Reading",options:[{value:"nobody",label:"Nobody"},{value:"no",label:"No"},{value:"all_the_world",label:"All the world"},{value:"life",label:"Life"}],points:1,correctAnswer:"nobody"},{id:"q29_climate",prompt:"29. Global warming ______.",type:"radio",required:!0,section:"Reading",options:[{value:"havent_stopped_yet",label:"Haven't stopped yet"},{value:"havent_stop_already",label:"Haven't stop already"},{value:"hasnt_stopped_yet",label:"Hasn't stopped yet"},{value:"has_stopped_already",label:"Has stopped already"}],points:1,correctAnswer:"hasnt_stopped_yet"},{id:"q30_climate",prompt:"30. ______ needs to do their part.",type:"radio",required:!0,section:"Reading",options:[{value:"solar_system",label:"The solar system"},{value:"since",label:"Since"},{value:"just",label:"Just"},{value:"everyone",label:"Everyone"}],points:1,correctAnswer:"everyone"}]},{id:"prepositions",title:"Prepositions",description:"Choose the correct preposition.",questions:[{id:"q31_preposition",prompt:"31. The birds are flying ______ the city.",type:"radio",required:!0,section:"Prepositions",options:[{value:"at",label:"At"},{value:"over",label:"Over"},{value:"in",label:"In"},{value:"under",label:"Under"}],points:1,correctAnswer:"over"},{id:"q32_preposition",prompt:"32. The rabbit is going ______ the cave.",type:"radio",required:!0,section:"Prepositions",options:[{value:"into",label:"Into"},{value:"out",label:"Out"},{value:"of",label:"Of"},{value:"on",label:"On"}],points:1,correctAnswer:"into"},{id:"q33_preposition",prompt:"33. Karl is running ______ the forest.",type:"radio",required:!0,section:"Prepositions",options:[{value:"along",label:"Along"},{value:"under",label:"Under"},{value:"through",label:"Through"},{value:"out",label:"Out"}],points:1,correctAnswer:"through"},{id:"q34_preposition",prompt:"34. The tourists are getting ______ the plane.",type:"radio",required:!0,section:"Prepositions",options:[{value:"above",label:"Above"},{value:"away_from",label:"Away from"},{value:"off",label:"Off"},{value:"on",label:"On"}],points:1,correctAnswer:"on"}]},{id:"phrasal-verbs",title:"Phrasal Verbs",description:"Choose the correct option.",questions:[{id:"q35_phrasal",prompt:"35. Please, can you ______ “teacher” in the dictionary?",type:"radio",required:!0,section:"Phrasal verbs",options:[{value:"look_from",label:"look from"},{value:"look_up",label:"look up"}],points:1,correctAnswer:"look_up"},{id:"q36_phrasal",prompt:"36. I need to ______ the use of the present perfect tense.",type:"radio",required:!0,section:"Phrasal verbs",options:[{value:"go_over",label:"go over"},{value:"go_out",label:"go out"}],points:1,correctAnswer:"go_over"},{id:"q37_phrasal",prompt:"37. I need you to ______ your sister while I’m at the shops.",type:"radio",required:!0,section:"Phrasal verbs",options:[{value:"look_after",label:"look after"},{value:"look_up",label:"look up"}],points:1,correctAnswer:"look_after"},{id:"q38_phrasal",prompt:"38. Carl ______ his uncle, they have the same mannerisms.",type:"radio",required:!0,section:"Phrasal verbs",options:[{value:"takes_after",label:"takes after"},{value:"takes_into",label:"takes into"}],points:1,correctAnswer:"takes_after"},{id:"q39_phrasal",prompt:"39. ______ this form and come back when you have completed it.",type:"radio",required:!0,section:"Phrasal verbs",options:[{value:"fill_on",label:"Fill on"},{value:"fill_out",label:"Fill out"}],points:1,correctAnswer:"fill_out"},{id:"q40_phrasal",prompt:"40. I can’t wait to ______ with my best friend.",type:"radio",required:!0,section:"Phrasal verbs",options:[{value:"catch_out",label:"catch out"},{value:"catch_up",label:"catch up"}],points:1,correctAnswer:"catch_up"}]},{id:"languages-reading",title:"Reading: Languages Around the World",description:`Read the excerpt, then answer the questions.

In his book *The Position of the German Language in the World*, sociolinguist Ulrich Ammon compares more than 12,000 languages. He notes that English is the most widely used international language in business, science, and the internet, while Mandarin Chinese has the largest number of native speakers. German is strong in engineering and exports, but it is rarely used for scientific publishing compared to English. A 2014 Natixis study predicted that French could become the most‑spoken language by 2050 because of African population growth, but the study ignored the dominance of English in higher education and technology. Ammon concludes that English will remain the global lingua franca in the near future, with regional powers like Spanish, Arabic, and French growing mainly through demographics.`,questions:[{id:"q41_language_article",prompt:"41. What is a proper title for the text?",type:"text",required:!0,section:"Reading Comprehension"},{id:"q42_language_article",prompt:"42. What is his book about?",type:"text",required:!0,section:"Reading Comprehension"},{id:"q43_language_article",prompt:"43. Which language will continue to top the rankings in the near future?",type:"text",required:!0,section:"Reading Comprehension"},{id:"q44_language_article",prompt:"44. Which language is rarely used in science according to the text?",type:"text",required:!0,section:"Reading Comprehension"},{id:"q45_language_article",prompt:"45. What did the 2014 Natixis study predict and what was its flaw?",type:"textarea",required:!0,section:"Reading Comprehension"},{id:"q46_language_article",prompt:"46. What is your favorite language and why?",type:"textarea",required:!0,section:"Reading Comprehension"}]},{id:"reported-speech",title:"Reported Speech",description:"Transform each quote.",questions:[{id:"q47_reported",prompt:"47. “These sculptures have been modern…” → The lady told the crowd…",type:"text",required:!0,section:"Reported Speech"},{id:"q48_reported",prompt:"48. “What was the answer?” → The Riddler asked…",type:"text",required:!0,section:"Reported Speech"},{id:"q49_reported",prompt:"49. “Speak now!” → The officer yelled at the witness…",type:"text",required:!0,section:"Reported Speech"}]},{id:"perfect-city",title:"Perfect City Essay",description:"Imagine a perfect city and describe it using all the highlighted connectors.",questions:[{id:"q50_perfect_city",prompt:"50. Imagine a perfect city and describe it using all the highlighted connectors. Use these words at least once: moreover, besides, apart from, although, therefore. (~360 words)",type:"textarea",required:!0,helperText:"Aim for ~360 words and include all five connectors.",section:"Writing"}]}],Dt=new Map;fe.forEach(t=>{t.questions.forEach(l=>{Dt.set(l.id,l)})});const Mn=[{minPercent:90,label:"C1"},{minPercent:75,label:"B2"},{minPercent:60,label:"B1"},{minPercent:45,label:"A2"},{minPercent:0,label:"A1"}];function Ln(t){let l=0,a=0;const s=[];for(const[o,u]of Object.entries(t)){const c=Dt.get(o);if(!c||!c.points||!c.correctAnswer)continue;const d=(u??"").toLowerCase().trim(),g=c.correctAnswer.toLowerCase().trim(),i=d===g,p=c.points;a+=p,i&&(l+=p),s.push({questionId:o,prompt:c.prompt,userAnswer:u,isCorrect:i,earned:i?p:0,points:p,correctAnswer:c.correctAnswer})}const r=Pn(l,a);return{total:l,max:a,level:r,details:s}}function Pn(t,l){if(l===0)return"Pending review";const a=t/l*100;for(const s of Mn)if(a>=s.minPercent)return s.label;return"Pending review"}const $n=async t=>{const l=ie(t);if(!l)throw t.redirect(302,"/auth");const a=j(t);await Be(a);const s=await a.execute({sql:"SELECT id, email, name FROM users WHERE id = ? LIMIT 1",args:[l]});if(s.rows.length===0)throw t.redirect(302,"/auth");const r=s.rows[0],o=await a.execute({sql:`SELECT id, auto_score, max_auto_score, level, status, created_at, answers_json
          FROM placement_test_attempts
          WHERE user_id = ?
          ORDER BY created_at DESC
          LIMIT 1`,args:[l]});let u=null,c={};if(o.rows.length>0){const d=o.rows[0];u={id:d.id,auto_score:Number(d.auto_score??0),max_auto_score:Number(d.max_auto_score??0),level:d.level??"Pending review",status:d.status??"submitted",created_at:d.created_at??new Date().toISOString()};try{const g=JSON.parse(d.answers_json??"{}");g&&typeof g=="object"&&(c=g)}catch(g){console.warn("[PLACEMENT] Could not parse stored answers",g)}}return{user:{id:String(r.id),email:r.email,name:r.name??null},latestAttempt:u,existingAnswers:c}},Bt=ee(b($n,"s_rucm00wbkag")),On=async(t,l)=>{try{const a=ie(l);if(!a)throw l.redirect(302,"/auth");const s={},r={},o=[];for(const p of fe)for(const h of p.questions){const x=t[h.id],y=typeof x=="string"?x.trim():"";s[h.id]=y,y&&(r[h.id]=y),h.required&&!y&&o.push(h.prompt)}if(o.length>0)return{success:!1,error:`Faltan respuestas obligatorias (${o.slice(0,3).join(", ")}${o.length>3?", ...":""}).`};const{total:u,max:c,level:d}=Ln(r),g=await Vt({answers:s,autoScore:u,maxScore:c,autoLevel:d}),i=j(l);try{await Be(i),await i.execute({sql:`INSERT INTO placement_test_attempts 
              (user_id, full_name, email, phone, country, date_of_birth, address, answers_json, auto_score, max_auto_score, level, status, feedback_summary)
              VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,args:[a,s.q1_name||null,s.q1_email||null,s.q1_phone||null,s.q2_country||null,s.q3_birthdate||null,s.q4_address||null,JSON.stringify(s),u,c,d,"submitted",g]});try{await Wt({userId:a,userName:s.q1_name??"Sin nombre",userEmail:s.q1_email??"Sin correo",autoScore:u,maxScore:c,level:d,feedback:g})}catch(p){console.error("[PLACEMENT] Notification error",p)}}catch(p){return{success:!1,error:je(p,"No pudimos guardar tu intento. Intenta nuevamente en unos segundos.")}}return{success:!0,autoScore:u,maxAutoScore:c,level:d,feedback:g}}catch(a){return{success:!1,error:je(a,"Tuvimos un problema al enviar tu prueba. Intenta nuevamente o contáctanos para ayudarte.")}}},Ft=te(b(On,"s_gsWImlbd3pM")),qn=()=>{var u,c;const t=Bt(),l=Ft(),a=v(t.value.latestAttempt),s={},r=t.value.existingAnswers;for(const d of fe)for(const g of d.questions){const i=r==null?void 0:r[g.id];typeof i=="string"&&i.length>0?s[g.id]=i:g.id==="q1_email"?s[g.id]=t.value.user.email??"":g.id==="q1_name"&&t.value.user.name?s[g.id]=t.value.user.name:s[g.id]=""}const o=oe(s);return q(w("s_OJ3d4LjtJY8",[a,l])),e("div",null,{class:"bg-gray-50 dark:bg-gray-900 py-10"},e("div",null,{class:"container mx-auto px-4 max-w-6xl"},[e("header",null,{class:"mb-8"},[e("p",null,{class:"text-sm text-teal-600 uppercase tracking-widest font-semibold"},"English Assessment",3,null),e("h1",null,{class:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4"},"EMOA Students' Placement Test",3,null),e("p",null,{class:"text-gray-600 dark:text-gray-300 max-w-3xl"},"Completa la prueba técnica para que podamos recomendarte el plan de estudios ideal. Guarda suficiente tiempo (30-40 minutos) y responde sin traductores.",3,null)],3,null),a.value&&e("section",null,{class:"mb-8 rounded-2xl border border-teal-200 bg-white/80 dark:bg-gray-800/80 p-6 shadow-sm"},e("div",null,{class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},[e("div",null,null,[e("p",null,{class:"text-sm text-gray-500 uppercase tracking-widest"},"Último resultado",3,null),e("p",null,{class:"text-2xl font-bold text-gray-900 dark:text-white"},[f(d=>d.value.auto_score,[a],"p0.value.auto_score"),"/",f(d=>d.value.max_auto_score,[a],"p0.value.max_auto_score")," puntos ―"," ",e("span",null,{class:"text-teal-600"},f(d=>d.value.level,[a],"p0.value.level"),3,null)],3,null),e("p",null,{class:"text-sm text-gray-500"},["Estado: ",f(d=>d.value.status,[a],"p0.value.status")," ·"," ",new Date(a.value.created_at).toLocaleString()],1,null)],1,null),e("div",null,{class:"text-sm text-gray-600 dark:text-gray-300"},"Puedes volver a intentar la prueba si sientes que tu puntaje no refleja tu nivel actual.",3,null)],1,null),1,"Ag_0"),((u=l.value)==null?void 0:u.error)&&e("div",null,{class:"mb-6 rounded-xl border border-red-200 bg-red-50/80 text-red-700 p-4"},f(d=>d.value.error,[l],"p0.value.error"),3,"Ag_1"),((c=l.value)==null?void 0:c.success)&&e("div",null,{class:"mb-6 space-y-4"},[e("div",null,{class:"rounded-xl border border-emerald-200 bg-emerald-50/80 text-emerald-900 dark:text-emerald-100 p-4"},[e("p",null,{class:"font-semibold"},"¡Gracias! Guardamos tu intento.",3,null),e("p",null,{class:"text-sm mt-1"},["Nivel automático estimado:"," ",e("span",null,{class:"font-bold"},f(d=>d.value.level??"Pendiente",[l],'p0.value.level??"Pendiente"'),3,null)," (",f(d=>d.value.autoScore??0,[l],"p0.value.autoScore??0"),"/",f(d=>d.value.maxAutoScore??0,[l],"p0.value.maxAutoScore??0")," puntos). Nuestro equipo revisará tus respuestas abiertas para darte retroalimentación adicional."],3,null)],3,null),l.value.feedback&&e("div",null,{class:"rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-gray-800 p-4 shadow-sm"},[e("h3",null,{class:"text-base font-semibold text-gray-900 dark:text-white mb-2"},"Resultado personalizado",3,null),e("p",null,{class:"text-sm text-gray-700 dark:text-gray-200 whitespace-pre-line"},f(d=>d.value.feedback,[l],"p0.value.feedback"),3,null)],3,"Ag_2")],1,"Ag_3"),m(me,{action:l,class:"space-y-10",children:[fe.map(d=>e("section",null,{class:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800/80 shadow-sm"},[e("div",null,{class:"border-b border-gray-100 dark:border-gray-700 px-6 py-4"},[e("h2",null,{class:"text-xl font-semibold text-gray-900 dark:text-white"},_(d,"title"),1,null),d.description&&e("p",null,{class:"text-gray-500 dark:text-gray-400 mt-1"},_(d,"description"),1,"Ag_4")],1,null),e("div",null,{class:"px-6 py-6 space-y-6"},d.questions.map(g=>m(Ht,{question:g,answers:o,[n]:{answers:n}},3,g.id)),1,null)],1,d.id)),e("div",null,{class:"flex justify-end"},e("button",{class:`inline-flex items-center px-6 py-3 rounded-xl text-white font-semibold shadow-lg transition ${l.isRunning?"bg-gray-400 cursor-not-allowed":"bg-teal-600 hover:bg-teal-700 focus:ring-4 focus:ring-teal-300"}`},{type:"submit",disabled:f(d=>d.isRunning,[l],"p0.isRunning")},f(d=>d.isRunning?"Enviando...":"Enviar prueba",[l],'p0.isRunning?"Enviando...":"Enviar prueba"'),3,null),1,null)],[n]:{action:n,class:n}},1,"Ag_5")],1,null),1,"Ag_6")},jn=L(b(qn,"s_NefnLv9aOfk")),ke={q5_profession:{src:"https://images.pexels.com/photos/2886937/pexels-photo-2886937.jpeg?auto=compress&cs=tinysrgb&w=1200",alt:"Farmer working in a field with crops and animals."},q6_profession:{src:"https://images.pexels.com/photos/5668773/pexels-photo-5668773.jpeg?auto=compress&cs=tinysrgb&w=1200",alt:"Lawyer or judge in a courtroom with law books and a gavel."},q7_spelling:{src:"https://images.pexels.com/photos/248797/pexels-photo-248797.jpeg?auto=compress&cs=tinysrgb&w=1200",alt:"Beach with palm trees and blue sea at sunset."},q20_vacation:{src:"https://images.pexels.com/photos/457882/pexels-photo-457882.jpeg?auto=compress&cs=tinysrgb&w=1200",alt:"Happy travelers with suitcases at an airport."},q21_climate:{src:"https://images.pexels.com/photos/2990650/pexels-photo-2990650.jpeg?auto=compress&cs=tinysrgb&w=1200",alt:"Planet Earth in a person’s hands with trees and pollution concept."},q31_preposition:{src:"https://images.pexels.com/photos/373912/pexels-photo-373912.jpeg?auto=compress&cs=tinysrgb&w=1200",alt:"City skyline with birds flying above the buildings at sunset."},q32_preposition:{src:"https://images.pexels.com/photos/145939/pexels-photo-145939.jpeg?auto=compress&cs=tinysrgb&w=1200",alt:"Rabbit near the entrance of a small cave in a forest."},q33_preposition:{src:"https://images.pexels.com/photos/158607/cairn-fog-mystical-background-158607.jpeg?auto=compress&cs=tinysrgb&w=1200",alt:"Person running along a path through a dense forest."},q34_preposition:{src:"https://images.pexels.com/photos/1004584/pexels-photo-1004584.jpeg?auto=compress&cs=tinysrgb&w=1200",alt:"Tourists boarding an airplane using a stairway on the runway."},q41_language_article:{src:"https://images.pexels.com/photos/1079033/pexels-photo-1079033.jpeg?auto=compress&cs=tinysrgb&w=1200",alt:"World map with flags and people speaking different languages."},q50_perfect_city:{src:"https://images.pexels.com/photos/373912/pexels-photo-373912.jpeg?auto=compress&cs=tinysrgb&w=1200",alt:"Modern city skyline with park, trees and skyscrapers at sunset."}},Nn=t=>e("div",null,null,[e("label",null,{class:"block text-sm font-medium text-gray-900 dark:text-gray-200 mb-2",for:f(l=>l.question.id,[t],"p0.question.id")},[f(l=>l.question.prompt,[t],"p0.question.prompt")," ",t.question.required&&e("span",null,{class:"text-red-500"},"*",3,"Ag_7")],1,null),ke[t.question.id]&&e("figure",null,{class:"mb-3 rounded-xl border border-gray-100 dark:border-gray-700 overflow-hidden bg-gray-50 dark:bg-gray-900"},e("img",{src:_(ke[t.question.id],"src"),alt:_(ke[t.question.id],"alt")},{class:"w-full max-h-64 object-contain md:object-cover",loading:"lazy"},null,3,null),1,"Ag_8"),zt(t.question,t.answers),t.question.helperText&&e("p",null,{class:"text-xs text-gray-500 mt-2"},f(l=>l.question.helperText,[t],"p0.question.helperText"),3,"Ag_9")],1,"Ag_10"),Ht=L(b(Nn,"s_0TgWlrXQVTE"));function zt(t,l){var a,s;switch(xe(),t.type){case"textarea":{const o=["q20_vacation","q45_language_article","q46_language_article","q50_perfect_city"].includes(t.id)?8:4;return m(Re,{children:[t.audioSrc&&e("audio",{src:_(t,"audioSrc")},{controls:!0,class:"mb-2 w-full",preload:"auto"},null,3,"Ag_11"),e("textarea",{id:_(t,"id"),name:_(t,"id"),required:_(t,"required"),rows:o,value:l[t.id]??"",placeholder:_(t,"placeholder"),onInput$:w("s_WIqDf0t7QNA",[l,t])},{class:"w-full rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white px-4 py-3 focus:ring-2 focus:ring-teal-500 focus:border-transparent","preventdefault:paste":!0},null,2,null)]},1,"Ag_12")}case"audio":return m(Fn,{get questionId(){return t.id},answers:l,[n]:{questionId:Zt(t,"id")}},3,"Ag_13");case"radio":return e("div",null,{class:"space-y-2"},(a=t.options)==null?void 0:a.map((r,o)=>e("label",null,{class:"flex items-center space-x-2 rounded-lg border border-gray-200 dark:border-gray-600 px-3 py-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("input",{name:_(t,"id"),value:_(r,"value"),checked:l[t.id]===r.value,required:t.required&&o===0,onChange$:w("s_YcYRrn88fXA",[l,t])},{type:"radio",class:"text-teal-600 focus:ring-teal-500"},null,2,null),e("span",null,{class:"text-sm text-gray-800 dark:text-gray-200"},_(r,"label"),1,null)],1,r.value)),1,null);case"select":return e("select",{id:_(t,"id"),name:_(t,"id"),required:_(t,"required"),value:l[t.id]??"",onChange$:w("s_k2rj37m4wMI",[l,t])},{class:"w-full rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white px-4 py-3 focus:ring-2 focus:ring-teal-500 focus:border-transparent"},[e("option",null,{value:""},t.placeholder??"Select an option",1,null),(s=t.options)==null?void 0:s.map(r=>e("option",{value:_(r,"value")},null,r.label,1,r.value))],0,null);default:return e("input",{id:_(t,"id"),name:_(t,"id"),required:_(t,"required"),value:l[t.id]??"",placeholder:_(t,"placeholder"),onInput$:w("s_97HBTSX0CbY",[l,t])},{type:"text",class:"w-full rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white px-4 py-3 focus:ring-2 focus:ring-teal-500 focus:border-transparent","preventdefault:paste":!0},null,2,null)}}const Un=async()=>{const[t,l,a,s,r]=E();r.value=!0;const o=await navigator.mediaDevices.getUserMedia({audio:!0}),u=new window.MediaRecorder(o);a.current=u,l.current=[],u.ondataavailable=c=>{c.data.size>0&&l.current.push(c.data)},u.onstop=()=>{const c=new Blob(l.current,{type:"audio/webm"}),d=URL.createObjectURL(c);t.value=d,s.answers[s.questionId]=d},u.start()},Dn=()=>{var a;const[t,l]=E();l.value=!1,(a=t.current)==null||a.stop()},Bn=t=>{const l=v(!1),a=v(null),s=oe({current:null}),r=oe({current:[]}),o=b(Un,"s_k8loodebKqU",[a,r,s,t,l]),u=b(Dn,"s_w8yr6bYIMaw",[s,l]);return e("div",null,{class:"mb-2"},[l.value?e("button",null,{type:"button",class:"px-4 py-2 rounded bg-red-600 text-white",onClick$:u},"Detener grabación",3,null):e("button",null,{type:"button",class:"px-4 py-2 rounded bg-teal-600 text-white flex items-center gap-2",onClick$:o},[e("span",null,{class:"material-icons","aria-label":"Grabar respuesta"},"mic",3,null),"Grabar respuesta"],3,"Ag_14"),a.value&&e("audio",null,{controls:!0,src:f(c=>c.value,[a],"p0.value"),class:"mt-2"},null,3,"Ag_15")],1,"Ag_16")},Fn=L(b(Bn,"s_frGWqgz004I")),Hn=D(async function({answers:t,autoScore:l,maxScore:a,autoLevel:s}){var c;const r=`Tu nivel automático estimado es ${s} (${l}/${a}). Nuestro equipo revisará tus respuestas abiertas para confirmar y asignarte el curso adecuado.`,o=this.env.get("OPENAI_API_KEY")||{}.OPENAI_API_KEY;this.env.get("SONIX_AUTH_KEY");async function u(d,g){if(!g||!d)return"";try{const h=await(await(await fetch(d)).blob()).arrayBuffer(),x=new FormData;return x.append("file",new Blob([h],{type:"audio/webm"}),"audio.webm"),x.append("model","whisper-1"),x.append("language","en"),(await(await fetch("https://api.openai.com/v1/audio/transcriptions",{method:"POST",headers:{Authorization:`Bearer ${g}`},body:x})).json()).text||""}catch(i){return console.error("Whisper transcription error",i),""}}for(const d of Object.keys(t))if(d.startsWith("q_audio_")){const g=t[d];g?t[d]=await u(g,o):t[d]=""}if(!o)return console.warn("[PLACEMENT] Missing OPENAI_API_KEY, skipping AI feedback."),r;try{const[{ChatOpenAI:d},{SystemMessage:g,HumanMessage:i}]=await Promise.all([import("@langchain/openai"),import("@langchain/core/messages")]),p=new d({openAIApiKey:o,model:"gpt-4o-mini",temperature:.2}),h=Yt(t),y=`
Datos del estudiante:
- Nombre: ${((c=t.q1_name)==null?void 0:c.trim())||"el/la estudiante"}
- Puntaje automático: ${l}/${a}
- Nivel automático sugerido: ${s}

Respuestas (resumidas):
${h}

Tarea:
1. Determina el nivel CEFR final (elige entre A1, A2, B1, B2, C1, C2) considerando tanto el puntaje como la calidad de las respuestas abiertas y las transcripciones de audio.
2. Explica en 2-3 oraciones por qué llegaste a ese nivel, en español.
3. Da dos recomendaciones claras para mejorar el siguiente nivel.
4. Cierra con un mensaje motivador breve.
`,S=await p.invoke([new g("Eres un evaluador académico de MOA Academy. Sé claro, empático y específico. Evita tecnicismos innecesarios."),new i(y)]),I=Array.isArray(S.content)?S.content.map(A=>A.text??"").join(`
`):S.content;return((I==null?void 0:I.trim())||r).slice(0,1500)}catch(d){return console.error("[PLACEMENT] AI feedback error:",d),r}},"oypZOwT7RDI"),Vt=U(b(Hn,"s_oypZOwT7RDI")),zn=D(async function({userId:t,userName:l,userEmail:a,autoScore:s,maxScore:r,level:o,feedback:u}){const c=this.env.get("RESEND_API_KEY");if(!c){console.warn("[PLACEMENT] Missing RESEND_API_KEY, skipping notification.");return}const d=this.env.get("SENDER_EMAIL")||"onboarding@resend.dev",g="emoa.recepcion@gmail.com",i=new at(c),p=`Placement Test completado · ${l||a}`,h=`
    <h2>Nuevo resultado del Placement Test</h2>
    <p><strong>ID de usuario:</strong> ${t}</p>
    <p><strong>Nombre:</strong> ${l}</p>
    <p><strong>Email:</strong> ${a}</p>
    <p><strong>Resultado automático:</strong> ${s}/${r}</p>
    <p><strong>Nivel sugerido:</strong> ${o}</p>
    <p><strong>Retroalimentación AI:</strong></p>
    <p>${(u||"No se generó retroalimentación adicional.").replace(/\n/g,"<br/>")}</p>
  `,x=`Nuevo resultado del Placement Test
ID de usuario: ${t}
Nombre: ${l}
Email: ${a}
Resultado automático: ${s}/${r}
Nivel sugerido: ${o}
Retroalimentación AI: ${u||"No disponible"}`,{error:y}=await i.emails.send({from:d,to:g,subject:p,html:h,text:x});y&&console.error("[PLACEMENT] Failed to send notification:",y)},"SgA9GykFf5M"),Wt=U(b(zn,"s_SgA9GykFf5M"));function Yt(t){return fe.map(a=>{const s=a.questions.slice(0,6).map(r=>{const o=r.prompt.length>90?`${r.prompt.slice(0,90).trim()}…`:r.prompt.trim(),u=t[r.id]??"",c=Vn(u);return`- ${o}: ${c||"Sin respuesta"}`}).join(`
`);return`${a.title}:
${s}`}).join(`

`)}function Vn(t,l=180){if(!t)return"";const a=t.replace(/\s+/g," ").trim();return a.length>l?`${a.slice(0,l)}…`:a}async function Be(t){var l;try{((l=(await t.execute("PRAGMA table_info(placement_test_attempts)")).rows)==null?void 0:l.some(r=>r.name==="feedback_summary"))||(await t.execute("ALTER TABLE placement_test_attempts ADD COLUMN feedback_summary TEXT"),console.log("[PLACEMENT] Added feedback_summary column to placement_test_attempts"))}catch(a){const s=a instanceof Error?a.message:String(a);/duplicate column/i.test(s)||console.warn("[PLACEMENT] Could not ensure feedback_summary column exists",a)}}function je(t,l){const a=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID().slice(0,8).toUpperCase():Math.random().toString(36).slice(2,10).toUpperCase(),s=t instanceof Error?t.message:typeof t=="string"?t:"Error desconocido";return console.error(`[PLACEMENT][${a}]`,s,t),`${l} (Código de referencia: ${a})`}const Wn={title:"Placement Test | MOA Academy",meta:[{name:"description",content:"Complete the EMOA placement test to evaluate your English skills across grammar, vocabulary, reading, and writing."}]},Yn=Object.freeze(Object.defineProperty({__proto__:null,_auto_QuestionField:Ht,_auto_buildAnswerDigest:Yt,_auto_ensurePlacementFeedbackColumn:Be,_auto_formatPlacementError:je,_auto_questionIllustrations:ke,_auto_renderInput:zt,_auto_sendPlacementResultNotification:Wt,_auto_serverGeneratePlacementFeedback:Vt,default:jn,head:Wn,usePlacementLoader:Bt,useSubmitPlacementTest:Ft},Symbol.toStringTag,{value:"Module"})),Qn=[],Ce=()=>dl,z=()=>Bl,Xn=[["/",[z,()=>Wl],"/",["q-89d73c83.js","q-1becf0cc.js"]],["api/chat-text/",[z,()=>Xl],"/api/chat-text/",["q-89d73c83.js"]],["auth/logout/",[z,Ce,()=>ta],"/auth/logout/",["q-89d73c83.js","q-b9ada265.js","q-7b1d5f9b.js"]],["auth/reset-password/",[z,Ce,()=>ra],"/auth/reset-password/",["q-89d73c83.js","q-b9ada265.js","q-86cd1b11.js"]],["about/",[z,()=>ca],"/about/",["q-89d73c83.js","q-42ba709e.js"]],["auth/",[z,Ce,()=>Sa],"/auth/",["q-89d73c83.js","q-b9ada265.js","q-8b239309.js"]],["chat/",[z,()=>cn],"/chat/",["q-89d73c83.js","q-79506bef.js"]],["courses/",[z,()=>mn],"/courses/",["q-89d73c83.js","q-ed7dc00d.js"]],["dashboard/",[z,()=>xn],"/dashboard/",["q-89d73c83.js","q-c3e195ac.js"]],["docs/",[z,()=>Rn],"/docs/",["q-89d73c83.js","q-0c26df5b.js"]],["placement-test/",[z,()=>Yn],"/placement-test/",["q-89d73c83.js","q-d72596b3.js"]]],Gn=[],Kn=!0,Jn="/",Zn=!0,pr={routes:Xn,serverPlugins:Qn,menus:Gn,trailingSlash:Kn,basePathname:Jn,cacheModules:Zn};export{Jn as basePathname,Zn as cacheModules,pr as default,Gn as menus,Xn as routes,Qn as serverPlugins,Kn as trailingSlash};
